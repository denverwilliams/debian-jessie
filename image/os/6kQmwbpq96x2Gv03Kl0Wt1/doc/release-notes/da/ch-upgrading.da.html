<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Kapitel 4. Opgraderinger fra Debian 7 (wheezy)</title><link rel="stylesheet" type="text/css" href="debian.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.da.html" title="Udgivelsesnoter til Debian 8 (jessie), 64-bit PC" /><link rel="up" href="index.da.html" title="Udgivelsesnoter til Debian 8 (jessie), 64-bit PC" /><link rel="prev" href="ch-installing.da.html" title="Kapitel 3. Installeringssystemet" /><link rel="next" href="ch-information.da.html" title="Kapitel 5. Ting man skal være opmærksom på i forbindelse med jessie" /><meta xmlns="" name="viewport" content="width=device-width, initial-scale=1" /><style xmlns="" type="text/css">
      body {
        background-repeat: no-repeat;
        background-image: none;
      }
    </style></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Kapitel 4. Opgraderinger fra Debian 7 (wheezy)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch-installing.da.html"><img src="images/prev.png" alt="forrige" /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch-information.da.html"><img src="images/next.png" alt="næste" /></a></td></tr></table><hr /></div><div xml:lang="da" class="chapter" lang="da"><div class="titlepage"><div><div><h1 class="title"><a id="ch-upgrading"></a>Kapitel 4. Opgraderinger fra Debian 7 (wheezy)</h1></div></div></div><div class="toc"><p><strong>Indholdsfortegnelse</strong></p><dl class="toc"><dt><span class="section"><a href="ch-upgrading.da.html#backup">4.1. Forberedelse af opgraderingen</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.da.html#data-backup">4.1.1. Sikkerhedskopier alle data og konfigurationsinformation</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#inform-users">4.1.2. Informer brugerne i forvejen</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#services-downtime">4.1.3. Forbered nedetid for tjenester</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#recovery">4.1.4. Forbered for gendannelse</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#upgrade-preparations">4.1.5. Forbered et sikkert miljø for opgraderingen</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.da.html#system-status">4.2. Kontrollerer systemstatus</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.da.html#review-actions">4.2.1. Gennemse handlinger der afventer i pakkehåndteringen</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#disable-apt-pinning">4.2.2. Deaktivering af APT-pinning</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#package-status">4.2.3. Kontrol af pakkestatus</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#proposed-updates">4.2.4. Afsnittet foreslåede opdateringer (proposed-updates)</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#unofficial-sources">4.2.5. Uofficielle kilder</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.da.html#upgrade-process">4.3. Forberedelse af kilder for APT</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.da.html#network">4.3.1. Tilføjelse af APT-internetkilder</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#localmirror">4.3.2. Tilføjelse af APT-kilder for et lokalt spejl</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#cdroms">4.3.3. Tilføjelse af APT-kilder fra et optisk medie</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.da.html#upgradingpackages">4.4. Opgradering af pakker</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.da.html#record-session">4.4.1. Optagelse af sessionen</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#updating-lists">4.4.2. Opdatering af pakkelisten</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#sufficient-space">4.4.3. Sikr dig, at du har tilstrækkelig med plads til opgraderingen</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#minimal-upgrade">4.4.4. Minimal systemopgradering</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#upgrading-full">4.4.5. Opgradering af systemet</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.da.html#trouble">4.5. Mulige problemstillinger under opgradering</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.da.html#immediate-configure">4.5.1. Dist-upgrade fejler med <span class="quote">“<span class="quote">Kunne ikke udføre øjeblikkelig
konfiguration</span>”</span></a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#expected-removals">4.5.2. Forventede fjernelser</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#conflicts-loops">4.5.3. Konflikter eller forhåndsafhængige (Pre-Depends) loop</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#file-conflicts">4.5.4. Filkonflikter</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#configuration-changes">4.5.5. Konfigurationsændringer</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#console-change">4.5.6. Ændring af session til konsol</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#package-specific-issues">4.5.7. Specielle forhold for specifikke pakker</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.da.html#newkernel">4.6. Opgradering af din kerne og relaterede pakker</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.da.html#kernel-metapackage">4.6.1. Installation af en kernens metapakke</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#initramfs-tools-issues">4.6.2. Changes to root and <code class="filename">/usr</code> filesystem mounting and
checking</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.da.html#nownownow">4.7. Ting der skal udføres før genstart</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#for-next">4.8. Forberedelse af den næste udgivelse</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.da.html#purge-removed-packages">4.8.1. Fuld fjernelse af afinstallerede pakker</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.da.html#deprecated">4.9. Forældede komponenter</a></span></dt><dt><span class="section"><a href="ch-upgrading.da.html#obsolete">4.10. Forældede pakker</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.da.html#dummy">4.10.1. Overgangspakker</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="backup"></a>4.1. Forberedelse af opgraderingen</h2></div></div></div><p>
Du bør læse informationen i <a class="xref" href="ch-information.da.html" title="Kapitel 5. Ting man skal være opmærksom på i forbindelse med jessie">Kapitel 5, <em>Ting man skal være opmærksom på i forbindelse med jessie</em></a>, inden du
opgraderer. Det kapitel dækker mulige problemer, som ikke er direkte
relateret til opgraderingsprocessen, men som stadig kan være vigtige at
kende til, inden du begynder.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="data-backup"></a>4.1.1. Sikkerhedskopier alle data og konfigurationsinformation</h3></div></div></div><p>
Inden opgradering af dit system anbefales det kraftigt, at du foretager en
fuldstændig sikkerhedskopiering, eller i det mindste laver en sikkerhedskopi
af alle de data og den konfigurationsinformation, som du ikke vil risikere
at miste. Opgraderingsværktøjerne og -processen er meget pålidelige, men en
maskinel fejl midt i en opgradering kan resultere i et alvorligt skadet
system.
</p><p>
De vigtigste dele, det vil være en god ide at lave sikkerhedskopier af, er
indholdet af <code class="filename">/etc</code>, <code class="filename">/var/lib/dpkg</code>,
<code class="filename">/var/lib/apt/extended_states</code> og uddata fra
<code class="literal">dpkg --get-selections "*"</code> (citationstegn er
vigtige). Hvis du bruger <span class="command"><strong>aptitude</strong></span> til at hente pakker på
dit system, vil en sikkerhedskopiering af
<code class="filename">/var/lib/aptitude/pkgstates</code> også være en god ide.
</p><p>
Selve opgraderingsprocessen ændrer ingenting i mappen
<code class="filename">/home</code>. Dog er det kendt at visse programmer (for
eksempel dele af Mozilla-pakken og skrivebordsmiljøerne GNOME og KDE)
overskriver eksisterende brugerindstillinger med nye standardværdier, når en
ny version af programmet startes for første gang af en bruger. Som en
sikkerhedsforanstaltning bør du foretage en sikkerhedskopiering af de
skjulte filer og mapper (såkaldte <span class="quote">“<span class="quote">punktum-filer</span>”</span>) i brugernes
hjemmemapper. Denne sikkerhedskopiering kan hjælpe til at gendanne eller
genoprette de gamle indstillinger. Du ønsker måske også at informere dine
brugere om dette.
</p><p>
Alle pakkeinstallationshandlinger skal køres med superbrugerprivilegier, så
log ind som <code class="literal">root</code> (administrator) eller brug
<span class="command"><strong>su</strong></span> eller <span class="command"><strong>sudo</strong></span> for at få de nødvendige
adgangsrettigheder.
</p><p>
Opgraderingen har nogle få forudsætninger; du bør tjekke dem, før du
gennemfører opgraderingen.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="inform-users"></a>4.1.2. Informer brugerne i forvejen</h3></div></div></div><p>
Det er klogt at informere alle brugerne i forvejen om eventuelle
opgraderinger, du planlægger, også selv om brugere der tilgår dit system via
en <span class="command"><strong>ssh</strong></span>-forbindelse ikke vil mærke meget under
opgraderingen, og bør kunne fortsætte deres arbejde. 
</p><p>
Hvis du vil være ekstra omhyggelig, så lav en sikkerhedskopi af eller
afmonter <code class="filename">/home</code> før opgraderingen.
</p><p>
Du skal udføre en kerneopgradering under opgraderingen til jessie, så
en genstart er nødvendig. Typisk vil dette udføres efter opgraderingen er
afsluttet.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="services-downtime"></a>4.1.3. Forbered nedetid for tjenester</h3></div></div></div><p>
Under opgraderingsprocessen kan der være tjenester, som er tilknyttet
pakker, som er en del af opgraderingen. Hvis dette er tilfældet, vil disse
tjenester måske stoppe mens pakkerne, som skal opgraderes bliver omplaceret
og konfigureret. I dette tidsrum vil disse tjenester ikke være tilgængelige.
</p><p>
Præcis hvor lang nedetiden er for disse tjenester vil afhænge af antallet af
pakker, som opgraderes på systemet, og vil også inkludere den tid som
systemadministratoren er om at besvare konfigurationsspørgsmål fra
forskellige pakkeopgraderinger. Bemærk at hvis opgraderingsprocessen foregår
uovervåget og systemet kræver svar under opgraderingen, er der stor
sandsynlighed for, at tjenester er utilgængelige<a href="#ftn.idp49024672" class="footnote" id="idp49024672"><sup class="footnote">[1]</sup></a> i en væsentlig tidsperiode.
</p><p>
Hvis systemet som opgraderes tilbyder kritiske tjenester for dine brugere
eller netværk<a href="#ftn.idp49026256" class="footnote" id="idp49026256"><sup class="footnote">[2]</sup></a>, så kan du minimere
nedetiden, hvis du foretager en minimal systemopgradering som beskrevet i
<a class="xref" href="ch-upgrading.da.html#minimal-upgrade" title="4.4.4. Minimal systemopgradering">Afsnit 4.4.4, “Minimal systemopgradering”</a>, efterfulgt af en kerneopgradering og en
genstart og efterfølgende opgraderer pakker, som hører til dine kritiske
tjenester. Opgrader disse pakker inden den komplette opgradering udføres
jævnfør instruktionen i <a class="xref" href="ch-upgrading.da.html#upgrading-full" title="4.4.5. Opgradering af systemet">Afsnit 4.4.5, “Opgradering af systemet”</a>. På denne måde kan
du sikre dig, at disse vigtige tjenester er startet op og er tilgængelige
gennem hele opgraderingsprocessen, og at deres nedetid er reduceret.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="recovery"></a>4.1.4. Forbered for gendannelse</h3></div></div></div><p>
Selom Debian forsøger at sikre, a dit system kan startes op på alle
tidspunkter, er der en reel risko for, at du kan opleve problemer efter
genstart af dit system, når opgraderingen er færdig. En del kendte problemer
er dokumenteret i dette og de næste kapitler af udgivelsesnoterne.
</p><p>
Af den grund er det klogt at sikre sig, at du vil kunne gendanne dit system,
såfremt det skulle fejle i at genstarte eller, for eksternt håndterede
systemer, ikke kan få netværket til at fungere.
</p><p>
Hvis du fjernopgraderer via en <span class="command"><strong>ssh</strong></span>-henvisning, anbefales
det kraftigt, at du foretager de nødvendige forholdsregler for at kunne
tilgå serveren via en ekstern seriel terminal. Der er en risiko for, at
efter opgradering af kernen og en genstart, at du skal rette
systemkonfigurationen via en lokal konsol. Hvis systemet ved et uheld
genstartes i midten af en opgradering, er der en risiko for, at du vil
skulle gendanne via en lokal konsol.
</p><p>
Generelt anbefaler vi at bruge <span class="emphasis"><em>redningstilstanden</em></span> for
Debians jessie-installationsprogram. Fordelen ved at bruge
installationsprogrammet er, at du kan vælge mellem dets mange
installationsmetoder efter en som bedst passer til din situation. For
yderligere information, så se venligst afsnittet <span class="quote">“<span class="quote">Gendannelse af et
ødelagt system</span>”</span> i kapitel 8 i <a class="ulink" href="https://www.debian.org/releases/jessie/installmanual" target="_top">Installationsvejledningen</a> og <a class="ulink" href="https://wiki.debian.org/DebianInstaller/FAQ" target="_top">OSS for Debians
installationsprogram</a>.
</p><p>
Hvis dette mislykkes, skal du bruge en alternativ måde for at starte dit
system op, så du kan tilgå det og reparere det. En mulighed er at bruge et
specielt redningsaftryk eller en Linux-live-cd. Efter opstart fra denne, bør
du kunne montere dit rodfilsystem og <code class="literal">chroot</code> ind i det for
at undersøge og rette problemet.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="recovery-initrd"></a>4.1.4.1. Fejlsøg skal under opstart med initrd</h4></div></div></div><p>
Pakken <code class="systemitem">initramfs-tools</code><a id="idp49041024" class="indexterm"></a> inkluderer en
fejlsøgningsskal<a href="#ftn.idp49041936" class="footnote" id="idp49041936"><sup class="footnote">[3]</sup></a> i initrds'en den
opretter. Hvis for eksempel initrd'en ikke kan montere dit rodfilsystem, vil
du blive placeret i denne fejlsøgningsskal, som har nogle grundlæggende
kommandoer tilgængelige til at hjælpe med at spore problemet og eventuelt
rette det.
</p><p>
Grundlæggende ting der kan kontrolleres: tilstedeværelse af korrekte
enhedsfiler i <code class="filename">/dev</code>; hvilke moduler indlæses
(<code class="literal">cat /proc/modules</code>); resultat af <span class="command"><strong>dmesg</strong></span>
for fejl under indlæsning af drivere. Resultatet af <span class="command"><strong>dmesg</strong></span>
vil også vise hvilke enhedsfiler, der er blevet tildelt til hvilke diske; du
bør kontrollere det imod resultatet af <code class="literal">echo $ROOT</code> for at
sikre, at rodfilsystemet er på den forventede enhed.
</p><p>
Hvis du lykkes med at rette problemet, vil indtastning af
<code class="literal">exit</code> afslutte fejlsøgningsskallen og fortsætte
opstartsprocessen på det punkt hvor den fejlede. Selvfølgelig skal du også
rette det underliggende problem og genoprette initrd'en så den næste opstart
ikke fejler igen.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="recovery-shell-systemd"></a>4.1.4.2. Fejlsøg skal under opstart med systemd</h4></div></div></div><p>
    Hvis opstarten fejler under systemd, er det muligt at indhente en fejlsøg
root-skal ved at ændre kernens kommandolinje. Hvis standardopstarten lykkes,
men nogle tjenester ikke kan starte, så kan det være nyttigt at tilføje
<code class="literal">systemd.unit=rescue.target</code> til kerneparametrene.
  </p><p>
    Ellers vil kerneparameteren <code class="literal">systemd.unit=emergency.target</code>
tilbyde dig en root-skal på det tidligste mulige punkt. Dette gøres dog før
montering af root-filsystemet med læse-skrive rettigheder. Du skal gøre det
manuelt med:
  </p><pre class="screen">
mount -o remount,rw /
</pre><p>
    Yderligere information om fejlsøgning af en ødelagt opstart under systemd
kan findes i artiklen <a class="ulink" href="http://freedesktop.org/wiki/Software/systemd/Debugging/" target="_top"> Diagnose for
opstartsproblemer</a>.
  </p><p>
    Hvis alt andet mislykkes, så kan du måske starte op via det gamle
sysvinit-system. Dette kræver at <code class="systemitem">sysvinit</code><a id="idp49058016" class="indexterm"></a> stadig installeres og den binære
<code class="filename">/lib/sysvinit/init</code> er inkluderet i din initramfs. Hvis
disse krav opfyldes, tilføj <code class="literal">init=/lib/sysvinit/init</code> på
kernekommandolinjen og den vil starte op med sysvinits binære fil.
  </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="upgrade-preparations"></a>4.1.5. Forbered et sikkert miljø for opgraderingen</h3></div></div></div><p>
Distributionsopgraderingen bør udføres enten lokalt fra en virtuel konsol i
teksttilstand (eller en direkte forbundet seriel terminal), eller eksternt
via en <span class="command"><strong>ssh</strong></span>-lænke. 
</p><div class="important"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Vigtigt]" src="images/important.png" /></td><th align="left">Vigtigt</th></tr><tr><td align="left" valign="top"><p>
  Hvis du bruger VPN-tjenester (såsom <code class="systemitem">tinc</code><a id="idp49064864" class="indexterm"></a>), så er de måske ikke tilgængelige igennem
hele opgraderingsprocessen. Se venligst <a class="xref" href="ch-upgrading.da.html#services-downtime" title="4.1.3. Forbered nedetid for tjenester">Afsnit 4.1.3, “Forbered nedetid for tjenester”</a>.
  </p></td></tr></table></div><p>
For at opnå en ekstra sikkerhedsmargen når der opgraderes eksternt, så
foreslår vi, at du kører opgraderingsprocesser i den virtuelle konsol
tilbudt af programmet <span class="command"><strong>screen</strong></span>, som aktiverer sikker
gentilslutning og sikrer at opgraderingsprocessen ikke afbrydes selv hvis
den eksterne tilslutningsproces mislykkes.
</p><div class="important"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Vigtigt]" src="images/important.png" /></td><th align="left">Vigtigt</th></tr><tr><td align="left" valign="top"><p>
    Du bør <span class="emphasis"><em>ikke</em></span> opgradere med <span class="command"><strong>telnet</strong></span>,
<span class="command"><strong>rlogin</strong></span>, <span class="command"><strong>rsh</strong></span> eller fra en X-session
håndteret af <span class="command"><strong>xdm</strong></span>, <span class="command"><strong>gdm</strong></span> eller
<span class="command"><strong>kdm</strong></span> etc. på maskinen du opgraderer. Dette skyldes at hver
af disse tjenester kan bliver termineret under opgraderingen, hvilket kan
resultere i et <span class="emphasis"><em>utilgængeligt</em></span> system som kun er halvt
opgraderet. Brug af GNOME-programmet <span class="command"><strong>update-manager</strong></span>
<span class="emphasis"><em>frarådes på det kraftigste</em></span> for opgraderinger til nye
versioner, da dette værktøj afhænger af at skrivebordet forbliver aktivt.
  </p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="system-status"></a>4.2. Kontrollerer systemstatus</h2></div></div></div><p>
Opgraderingsprocessen - beskrevet i dette kapitel - er blevet designet for
opgraderinger fra <span class="quote">“<span class="quote">rene</span>”</span> wheezy-systemer uden
tredjepartspakker. For den største troværdighed i opgraderingsprocessen, kan
du fjerne tredjepartspakker fra dit system, før du begynder opgraderingen.
</p><p>
Direkte opgraderinger fra Debianudgivelser ældre end 7
(wheezy) er ikke understøttet. Følg venligst instruktionerne i
<a class="ulink" href="https://www.debian.org/releases/wheezy/releasenotes" target="_top">Udgivelsesnoter
for Debian 7</a> for at opgradere til 7 først.
</p><p>
Denne procedure antager også, at dit sytem er blevet opdateret til den
sidste punktversion af wheezy. Hvis du ikke har udført dette eller
er usikker, så følg instruktionerne i <a class="xref" href="ap-old-stuff.da.html#old-upgrade" title="A.1. Opgradering af dit wheezy-system">Afsnit A.1, “Opgradering af dit wheezy-system”</a>.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="review-actions"></a>4.2.1. Gennemse handlinger der afventer i pakkehåndteringen</h3></div></div></div><p>
I nogle tilfælde kan brugen af <span class="command"><strong>apt-get</strong></span> til installation
af pakker i stedet for <span class="command"><strong>aptitude</strong></span> få
<span class="command"><strong>aptitude</strong></span> til at anse en pakke som <span class="quote">“<span class="quote">ubrugt</span>”</span>
og planlægge den for fjernelse. Generelt, skal du sikre dig, at systemet er
fuldt opdateret og <span class="quote">“<span class="quote">rent</span>”</span> før du fortsætter med opgraderingen.
</p><p>
På grund af dette bør du gennemse om der er nogle afventende handlinger i
pakkehåndteringen <span class="command"><strong>aptitude</strong></span>. Hvis en pakke er planlagt til
fjernelse eller opdatering i pakkehåndteringen, kan det negativt påvirke
opgraderingsproceduren. Bemærk at rettelse af dette kun er muligt hvis din
<code class="filename">sources.list</code> stadig peger på
<span class="emphasis"><em>wheezy</em></span> og ikke på <span class="emphasis"><em>stable</em></span>
eller <span class="emphasis"><em>jessie</em></span>; se <a class="xref" href="ap-old-stuff.da.html#old-sources" title="A.2. Kontroller din kildeliste">Afsnit A.2, “Kontroller din kildeliste”</a>.
</p><p>
For at udføre denne gennemgang, så start <span class="command"><strong>aptitude</strong></span> i
<span class="quote">“<span class="quote">visuel tilstand </span>”</span> og tryk på <span class="keycap"><strong>g</strong></span>
(<span class="quote">“<span class="quote">Go</span>”</span>). Hvis den viser nogle handlinger, så bør du gennemse dem
og enten rette dem eller implementere de foreslåede handlinger. Hvis ingen
handlinger foreslås, vil du blive præsenteret med en besked der siger
<span class="quote">“<span class="quote">Ingen pakker er planlagt for installation, fjernelse eller
opgradering</span>”</span>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="disable-apt-pinning"></a>4.2.2. Deaktivering af APT-pinning</h3></div></div></div><p>
Hvis du har konfigureret APT til at installere bestemte pakker fra en
distribution udover stable (f.eks. fra testing), så skal du måske ændre din
APT-pinnings konfiguration (gemt i
<code class="filename">/etc/apt/preferences</code>) for at tillade pakkeopgraderinger
af versioner i den nye stabile version. Yderligere information om
APT-pinning kan findes i <span class="citerefentry"><span class="refentrytitle">apt_preferences</span>(5)</span>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="package-status"></a>4.2.3. Kontrol af pakkestatus</h3></div></div></div><p>
Uanset den anvendte opgraderingsmetode, så anbefales det, at du kontrollerer
pakkernes status først, og verificerer at alle pakker er i en opgraderbar
tilstand. Den følgende kommando vil vise alle pakker, som har en status som
halvt installeret (Half-Installed) eller som ikke kunne konfigureres,
(Failed-Config) og dem med en eventuel fejlstatus.
</p><pre class="screen">
# dpkg --audit
</pre><p>
Du kan også inspicere tilstanden for alle pakker på dit system med
<span class="command"><strong>aptitude</strong></span>, eller med kommandoer såsom
</p><pre class="screen">
# dpkg -l | pager
</pre><p>
eller
</p><pre class="screen">
# dpkg --get-selections "*" &gt; ~/curr-pkgs.txt
</pre><p>
Det er ønskværdigt at fjerne alle pakker på hold før en opgradering. Hvis en
pakke - som er essentiel for opgraderingen - er på hold, så vil
opgraderingen fejle.
</p><p>
Bemærk at <span class="command"><strong>aptitude</strong></span> bruger en anden metode for
registrering af pakker, som er på hold end <span class="command"><strong>apt-get</strong></span> og
<span class="command"><strong>dselect</strong></span>. Du kan identificere pakker på hold for
<span class="command"><strong>aptitude</strong></span> med
</p><pre class="screen">
# aptitude search "~ahold" 
</pre><p>
Hvis du ønsker at kontrollere hvilke pakker du havde på hold for
<span class="command"><strong>apt-get</strong></span>, så skal du bruge
</p><pre class="screen">
# dpkg --get-selections | grep 'hold$'
</pre><p>
Hvis du ændrede og genkompilerede en pakke lokalt, og ikke omdøbte den eller
placerede en epoch i versionen, så skal du sætte den på hold for at
forhindre at den bliver opgraderet.
</p><p>
Pakketilstanden <span class="quote">“<span class="quote">hold</span>”</span> for <span class="command"><strong>apt-get</strong></span> kan
ændres med:
</p><pre class="screen">
# echo <em class="replaceable"><code>pakkenavn</code></em> hold | dpkg --set-selections
</pre><p>
Erstat <code class="literal">hold</code> med <code class="literal">install</code> for at fjerne
tilstanden <span class="quote">“<span class="quote">hold</span>”</span>.
</p><p>
Hvis der er noget som skal rettes, så er det bedst at sikre sig at din
<code class="filename">sources.list</code> stadig refererer til wheezy som
forklaret i <a class="xref" href="ap-old-stuff.da.html#old-sources" title="A.2. Kontroller din kildeliste">Afsnit A.2, “Kontroller din kildeliste”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="proposed-updates"></a>4.2.4. Afsnittet foreslåede opdateringer (proposed-updates)</h3></div></div></div><p>
    Hvis du har afsnittet <code class="literal">proposed-updates</code> i din
<code class="filename">/etc/apt/sources.list</code>-fil, så skal du fjerne afsnittet
fra den fil før du forsøger en opgradering af dit system. Dette er en
forberedelse for at reducere sandsynligheden for konflikter.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="unofficial-sources"></a>4.2.5. Uofficielle kilder</h3></div></div></div><p>
Hvis du har pakker, som ikke stammer fra Debian, på dit system, så skal du
være opmærksom på at disse kan blive fjernet under opgraderingen på grund af
afhængigheder i konflikt. Hvis disse pakker blev installeret ved at tilføje
et ekstra pakkearkiv i din <code class="filename">/etc/apt/sources.list</code>, så
skal du kontrollere om dette arkiv også tilbyder pakker kompileret for
jessie og ændre kildelinjen tilsvarende på samme tidspunkt som dine
kildelinjer for Debianpakker.
</p><p>
Nogle brugere kan have <span class="emphasis"><em>uofficielle</em></span> tilbageporterede
<span class="quote">“<span class="quote">nyere</span>”</span> versioner af pakker som i Debian
<span class="emphasis"><em>er</em></span> installeret på deres
wheezy-system. Sådanne pakker vil højst sandsynlig medføre
problemer under en opgradering, da de kan resultere i
filkonflikter<a href="#ftn.idp49126832" class="footnote" id="idp49126832"><sup class="footnote">[4]</sup></a>. <a class="xref" href="ch-upgrading.da.html#trouble" title="4.5. Mulige problemstillinger under opgradering">Afsnit 4.5, “Mulige problemstillinger under opgradering”</a> har lidt information om hvordan filkonflikter skal
håndteres, såfremt de opstår.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="upgrade-process"></a>4.3. Forberedelse af kilder for APT</h2></div></div></div><p>
Før du starter opgraderingen skal du opsætte <code class="systemitem">apt</code><a id="idp49131072" class="indexterm"></a>'s konfigurationsfil for pakkelister,
<code class="filename">/etc/apt/sources.list</code>.
</p><p>
<code class="systemitem">apt</code><a id="idp49133792" class="indexterm"></a> vil overveje alle pakker som kan
findes via en <span class="quote">“<span class="quote"><code class="literal">deb-linje</code></span>”</span> og installere en
pakke med højere versionsnummer. Den første linje i filen får prioritet (så
hvor du har flere spejlplaceringer, så har du typisk som første navn en
lokal harddisk, derefter <acronym title="Compact Disc Read Only Memory">cd-rom</acronym>-drev og derefter
HTTP/FTP-spejle).
</p><p>
En udgivelse kan ofte refereres til både efter dets kodenavn
(f.eks. <code class="literal">wheezy</code>,
<code class="literal">jessie</code>) og efter sit statusnavn
(dvs. <code class="literal">oldstable</code>, <code class="literal">stable</code>,
<code class="literal">testing</code>, <code class="literal">unstable</code>). En reference til
en udgivelse med sit kodenavn har den fordel, at du aldrig vil blive
overrasket af en ny udgivelse og er derfor fremgangsmåden anvendt her. Det
betyder selvfølgelig, at du selv skal holde øje med udgivelsesnoter. Hvis du
bruger statusnavnet i stedet for, så vil du bare se en masse opdateringer
for pakker så snart en udgivelse er tilgængelig.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="network"></a>4.3.1. Tilføjelse af APT-internetkilder</h3></div></div></div><p>
Standardkonfigurationen er opsat til installation fra internettes
hovedservere for Debian, men du kan ændre
<code class="filename">/etc/apt/sources.list</code> til at bruge andre spejle, helst
til et spejl som er tæt på dig netværksmæssigt.
</p><p>
Debians HTTP- eller FTP-spejladresser kan findes på <a class="ulink" href="https://www.debian.org/distrib/ftplist" target="_top">https://www.debian.org/distrib/ftplist</a> (kig i afsnittet <span class="quote">“<span class="quote">liste over
Debians spejle</span>”</span> section). HTTP-spejle er generelt hurtigere end
FTP-spejle.
</p><p>
For eksempel antag at dit nærmeste Debianspejl er
<code class="literal">http://mirrors.kernel.org</code>. Når du kigger på spejlet med en
internetbrowser eller FTP-program, så vil du bemærke at hovedmapperne er
organiseret således:
</p><pre class="programlisting">
http://mirrors.kernel.org/debian/dists/jessie/main/binary-<span class="phrase">amd64</span>/...
http://mirrors.kernel.org/debian/dists/jessie/contrib/binary-<span class="phrase">amd64</span>/...
</pre><p>
For at bruge dette spejl med <code class="systemitem">apt</code><a id="idp49150880" class="indexterm"></a>, så
kan du tilføje denne linje til din <code class="filename">sources.list</code>-fil:
</p><pre class="programlisting">deb http://mirrors.kernel.org/debian jessie main contrib</pre><p>
Bemærk at <span class="quote">“<span class="quote"><code class="literal">dists</code></span>”</span> tilføjes implicit, og
parametrene efter udgivelsesnavnet bruges til at udvide stien til flere
mapper.
</p><p>
Efter tilføjelse af dine nye kilder, så deaktiver de tidligere
<span class="quote">“<span class="quote"><code class="literal">deb</code></span>”</span>-liner i
<code class="filename">sources.list</code> ved at placere en havelåge
(<code class="literal">#</code>) foran dem.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="localmirror"></a>4.3.2. Tilføjelse af APT-kilder for et lokalt spejl</h3></div></div></div><p>
I stedet for at bruge HTTP eller FTP-pakkespejl, kan du ønske at ændre
<code class="filename">/etc/apt/sources.list</code> så der bruges et spejl på en
lokal disk (sandsynligvis monteret over <acronym title="Network File System (netværksfilsystem)">NFS</acronym>).
</p><p>
For eksempel kan dit pakkespejl være under
<code class="filename">/var/ftp/debian/</code>, og have hovedmapper som disse:
</p><pre class="programlisting">
/var/ftp/debian/dists/jessie/main/binary-<span class="phrase">amd64</span>/...
/var/ftp/debian/dists/jessie/contrib/binary-<span class="phrase">amd64</span>/...
</pre><p>
For at bruge dette med <code class="systemitem">apt</code><a id="idp49165184" class="indexterm"></a>, så
tilføj denne linje til din <code class="filename">sources.list</code>-fil:
</p><pre class="programlisting">deb file:/var/ftp/debian jessie main contrib</pre><p>
Bemærk at <span class="quote">“<span class="quote"><code class="literal">dists</code></span>”</span> tilføjes implicit, og
parametrene efter udgivelsesnavnet bruges til at udvide stien til flere
mapper.
</p><p>
Efter tilføjelse af dine nye kilder, så deaktiver de tidligere
<span class="quote">“<span class="quote"><code class="literal">deb</code></span>”</span>-liner i
<code class="filename">sources.list</code> ved at placere en havelåge
(<code class="literal">#</code>) foran dem.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cdroms"></a>4.3.3. Tilføjelse af APT-kilder fra et optisk medie</h3></div></div></div><p>
Hvis du ønsker <span class="emphasis"><em>kun</em></span> at bruge cd'er (eller dvd'er eller
Blu-ray-diske), så udkommenter de eksisterende
<span class="quote">“<span class="quote"><code class="literal">deb</code></span>”</span>-linjer i
<code class="filename">/etc/apt/sources.list</code> ved at placere en havelåge
(<code class="literal">#</code>) foran dem.
</p><p>
Make sure there is a line in <code class="filename">/etc/fstab</code> that enables
mounting your CD-ROM drive at the <code class="filename">/media/cdrom</code> mount
point.  For example, if <code class="filename">/dev/sr0</code> is your CD-ROM drive,
<code class="filename">/etc/fstab</code> should contain a line like:
</p><pre class="programlisting">
/dev/sr0 /media/cdrom auto noauto,ro 0 0
</pre><p>
Bemærk at der ikke må være <span class="emphasis"><em>mellemrum</em></span> mellem ordene
<code class="literal">noauto,ro</code> i det fjerde felt.
</p><p>
For at verificere, at det virker, så indsæt en cd og prøv igen
</p><pre class="screen">
# mount /media/cdrom    # this will mount the CD to the mount point
# ls -alF /media/cdrom  # this should show the CD's root directory
# umount /media/cdrom   # this will unmount the CD
</pre><p>
Næste, kør:
</p><pre class="screen">
# apt-cdrom add
</pre><p>
for hver Debian binær cd-rom du har, at tilføje dataene om hver cd til APT's
database.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="upgradingpackages"></a>4.4. Opgradering af pakker</h2></div></div></div><p>
Den anbefalede måde at opgradere fra tidligere Debian-udgivelser er at
bruge pakkehåndteringsværktøjet <span class="command"><strong>apt-get</strong></span>. I forrige
udgivelser blev <span class="command"><strong>aptitude</strong></span> anbefalet til dette formål, men
de seneste versioner af <span class="command"><strong>apt-get</strong></span> tilbyder lignende
funktionalitet og har også vist sig at give de ønskede
opgraderingsresultater mere konsistent.
</p><p>
Glem ikke at montere alle krævede partitioner (vigtigst partitionerne for
root og <code class="filename">/usr</code> som skrivbare med en kommando såsom:
</p><pre class="screen">
# mount -o remount,rw /<em class="replaceable"><code>monteringspunkt</code></em>
</pre><p>
Efterfølgende skal du dobbeltkontrollere at APT-kildepunkterne (i
<code class="filename">/etc/apt/sources.list</code>) refererer enten til
<span class="quote">“<span class="quote"><code class="literal">jessie</code></span>”</span> eller til
<span class="quote">“<span class="quote"><code class="literal">stable</code></span>”</span>. Der bør ikke være kildepunkter,
der peget på wheezy.
</p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Bemærk]" src="images/note.png" /></td><th align="left">Bemærk</th></tr><tr><td align="left" valign="top"><p>
    Kildelinjer for en cd-rom kan undertiden referere til
<span class="quote">“<span class="quote"><code class="literal">unstable</code></span>”</span>; selvom dette kan være
forvirrende, så skal du <span class="emphasis"><em>ikke</em></span> ændre det.
  </p></td></tr></table></div><p>
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="record-session"></a>4.4.1. Optagelse af sessionen</h3></div></div></div><p>
Det anbefales at du bruger programmet  <span class="command"><strong>/usr/bin/script</strong></span>
til at optage et sammendrag af opgraderingssessionen. Hvis der så opstår et
problem, så vil du have en log over hvad der skete, og hvis krævet, kan give
præcis information i en fejlrapport. For at starte registreringen tastes:
</p><pre class="screen">
# script -t 2&gt;~/upgrade-jessie<em class="replaceable"><code>step</code></em>.time -a ~/upgrade-jessie<em class="replaceable"><code>step</code></em>.script
</pre><p>
eller lignende. Hvis du skal køre typeskriptet igen (f.eks. hvis du skal
genstarte systemet) så brug forskellige værdier for
<em class="replaceable"><code>step</code></em> for at indikere hvilket trin af
opgraderingen du logger fra. Placer ikke typeskriptfilen i en midlertidig
mappe såsom <code class="filename">/tmp</code> eller <code class="filename">/var/tmp</code>
(filer i disse mapper kan blive slettet under opgraderingen eller under en
genstart).
</p><p>
Typeskriptet vil også give dig mulighed for at gennemse information, som er
rullet forbi skærmen. Hvis du er ved systemets konsol, så skift til VT2 (med
<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span>)
og efter at du er logget ind, så brug <code class="literal">less -R
~root/upgrade-jessie.script</code> for at se filen.
</p><p>
Efter at du har færdiggjort opgraderingen, så kan du stoppe
<span class="command"><strong>script</strong></span> ved at taste <code class="literal">exit</code> i prompten.
</p><p>
Hvis du har brugt tilvalget <span class="emphasis"><em>-t</em></span> for
<span class="command"><strong>script</strong></span> så kan du bruge programmet
<span class="command"><strong>scriptreplay</strong></span> for at afspille hele sessionen:
</p><pre class="screen">
# scriptreplay ~/upgrade-jessie.time ~/upgrade-jessie.script
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating-lists"></a>4.4.2. Opdatering af pakkelisten</h3></div></div></div><p>
Først skal listen over tilgængelige pakker for den nye udgivelse
hentes. Dette gøres ved at køre:
</p><pre class="screen">
# apt-get update
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sufficient-space"></a>4.4.3. Sikr dig, at du har tilstrækkelig med plads til opgraderingen</h3></div></div></div><p>
Du skal sikre dig, at du har tilstrækkelig med harddiskplads før du
opgraderer med den fulde systemopgradering beskrevet i <a class="xref" href="ch-upgrading.da.html#upgrading-full" title="4.4.5. Opgradering af systemet">Afsnit 4.4.5, “Opgradering af systemet”</a>. Først, alle pakker krævet for installation som
hentes fra netværket gemmes i <code class="filename">/var/cache/apt/archives</code>
(og undermappen <code class="filename">partial/</code>, under overførsel), så du skal
sikre dig, at du har nok plads på partitionen for filsystemet, som
indeholder <code class="filename">/var/</code> til midlertidigt at hente pakkerne,
som skal installeres på dit system. Efter overførslen skal du sikkert bruge
ekstra plads i andre filsystempartitioner for både at installere opgraderede
pakker (som kan indeholder større binære filer eller mere data) og nye
pakker, som vil blive hentet ned for opgraderingen. Hvis dit system ikke har
tilstrækkelig med plads, kan du ende med en ufuldstændig opgradering, som
det kan være svært at fortryde.
</p><p>
<span class="command"><strong>apt-get</strong></span> kan vise dig detaljeret information om
diskpladsen krævet for installationen. Før udførsel af opgraderingen, kan du
se dette estimat ved at køre:
</p><pre class="screen">
# apt-get -o APT::Get::Trivial-Only=true dist-upgrade
[ ... ]
XXX opgraderes, XXX nyinstalleres, XXX fjernes og XXX bliver ikke opgraderet.
Skal hente xx.xMB fra arkiverne. 
Efter denne operation vil AAAMB yderligere diskplads være brugt.
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Bemærk]" src="images/note.png" /></td><th align="left">Bemærk</th></tr><tr><td align="left" valign="top"><p>
Kørsel af denne kommando i begyndelsen af opgraderingsprocessen kan medføre
en fejl, på grund af årsagerne beskrevet i de næste afsnit. I disse tilfælde
skal du vente indtil du har udført den minimale systemopgradering som i
<a class="xref" href="ch-upgrading.da.html#minimal-upgrade" title="4.4.4. Minimal systemopgradering">Afsnit 4.4.4, “Minimal systemopgradering”</a> før du kører denne kommando for at
estimere diskpladsen.
</p></td></tr></table></div><p>
Hvis du ikke har nok plads for opgraderingen, så vil
<span class="command"><strong>apt-get</strong></span> advare dig med en besked:
</p><pre class="screen">
E: Du har ikke nok ledig plads i /var/cache/apt/archives/.
</pre><p>I denne situation, så skab først ledig plads. Du kan:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Fjerne pakker som tidligere er blevet hentet for installation (i
<code class="filename">/var/cache/apt/archives</code>). Oprydning i
pakkemellemlageret med <span class="command"><strong>apt-get clean</strong></span> vil fjerne alle
tidligere hentede pakkefiler.
</p></li><li class="listitem"><p>
Fjern glemte pakker. Hvis du har brugt <span class="command"><strong>aptitude</strong></span> eller
<span class="command"><strong>apt-get</strong></span> til manuelt at installere pakker i
wheezy vil programmet have styr på hvilke pakker du har
installeret manuelt og vil kunne markere forældet på de pakker der er
trukket ind af afhængigheder alene og som ikke længere er krævet hvis en
pakke er blevet fjernet. De vil ikke markere pakker til fjernelse, hvis du
har installeret dem manuelt. For at fjerne automatisk installerede pakker
som ikke længere bruges, kør:
</p><pre class="screen">
# apt-get autoremove
</pre><p>
Du kan også <span class="command"><strong>deborphan</strong></span>, <span class="command"><strong>debfoster</strong></span> eller
<span class="command"><strong>cruft</strong></span> ti lat finde redundante pakker. Fjern ikke blindt
pakkerne disse værktøjer præsenterer, specielt hvis du bruger aggressive
indstillinger, der ikke er standard, som er mere udsat for at give falske
positive resultater. Det anbefales stærkt, at du manuelt gennemser pakkerne
der bliver foreslået for fjernelse (dvs. deres indhold, størrelse og
beskrivelse) før du fjerner dem.
</p></li><li class="listitem"><p>
Fjern pakker som fylder for meget og ikke skal bruges i øjeblikket (du kan
altid geninstallere dem efter opgraderingen). Hvis du har <code class="systemitem">popularity-contest</code><a id="idp49238912" class="indexterm"></a> installeret, så kan du bruge
<span class="command"><strong>popcon-largest-unused</strong></span> til at vise pakkerne, du ikke
bruger og som bruger mest plads. Du kan finde pakkerne som bare bruger mest
plads med <span class="command"><strong>dpigs</strong></span> (tilgængelig i pakken <code class="systemitem">debian-goodies</code><a id="idp49242224" class="indexterm"></a>) eller med
<span class="command"><strong>wajig</strong></span> (kør <code class="literal">wajig size</code>). De kan også
findes med <code class="systemitem">aptitude</code><a id="idp49245392" class="indexterm"></a>.  Start
<span class="command"><strong>aptitude</strong></span> i <span class="quote">“<span class="quote">visual mode</span>”</span>, vælg
<span class="guimenu">Visninger</span> → <span class="guimenuitem">Ny flad
pakkeliste</span>, tryk <span class="keycap"><strong>l</strong></span> og indtast
<code class="literal">~i</code>, tryk <span class="keycap"><strong>S</strong></span> og indtast
<code class="literal">~installsize</code>. Så får du en liste at arbejde med. 
</p></li><li class="listitem"><p>
  Fjern oversættelser og sprogfiler fra system hvis de ikke er krævet. Du kan
installere pakken <code class="systemitem">localepurge</code><a id="idp49253824" class="indexterm"></a> og
konfigurere den så at kun nogle få udvalgte sprog bevares i systemet. Dette
vil reducere den forbrugt diskplads i
<code class="filename">/usr/share/locale</code>.
</p></li><li class="listitem"><p>
   Flyt midlertidigt til et andet system, eller fjern permanent, systemlogge
under <code class="filename">/var/log/</code>.
</p></li><li class="listitem"><p>
    Brug en midlertidig <code class="filename">/var/cache/apt/archives</code>: Du kan
bruge en midlertidigt mellemlagermappe fra et andet filsystem
(<acronym title="Universal Serial Bus">USB</acronym>-lagerenhed, midlertidig harddisk, filsystem allerede
i brug, ...)
  </p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Bemærk]" src="images/note.png" /></td><th align="left">Bemærk</th></tr><tr><td align="left" valign="top"><p>
      Brug ikke en <acronym title="Network File System (netværksfilsystem)">NFS</acronym>-montering da netværksforbindelsen kan
blive afbrudt under opgraderingen.
    </p></td></tr></table></div><p>
  For eksempel hvis du har et <acronym title="Universal Serial Bus">USB</acronym>-drev monteret på
<code class="filename">/media/usbkey</code>:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
	fjern pakkerne som tidligere er blevet hentet for installation:

	</p><pre class="screen"># apt-get clean</pre><p>
      </p></li><li class="listitem"><p>
	kopier mappen <code class="filename">/var/cache/apt/archives</code> til
<acronym title="Universal Serial Bus">USB</acronym>-drevet:

	</p><pre class="screen"># cp -ax /var/cache/apt/archives /media/usbkey/</pre><p>
      </p></li><li class="listitem"><p>
	monter den midlertidige mappe for mellemlageret på den aktuelle:

	</p><pre class="screen"># mount --bind /media/usbkey/archives /var/cache/apt/archives</pre><p>
      </p></li><li class="listitem"><p>
	efter opgraderingen, gendan den originale
<code class="filename">/var/cache/apt/archives</code>-mappe:

	</p><pre class="screen"># umount /media/usbkey/archives</pre><p>
      </p></li><li class="listitem"><p>
	fjern den tilbageværende <code class="filename">/media/usbkey/archives</code>.
      </p></li></ol></div><p>
  Du kan oprette den midlertidige mappe for mellemlageret på det filsystem som
er monteret på dit system.
  </p></li><li class="listitem"><p>
    Udfør en minimal opgradering af systemet (se <a class="xref" href="ch-upgrading.da.html#minimal-upgrade" title="4.4.4. Minimal systemopgradering">Afsnit 4.4.4, “Minimal systemopgradering”</a>) eller delvise opgraderinger af systemet
efterfulgt af en fuld opgradering. Dette vil gøre det muligt at opgradere
systemet delvist, og give dig mulighed for at rydde pakkemellemlageret før
den fulde opgradering.
  </p></li></ul></div><p>
Bemærk at for sikkert at fjerne pakker, så er det tilrådeligt at skifte din
<code class="filename">sources.list</code> tilbage til wheezy som beskrevet
i <a class="xref" href="ap-old-stuff.da.html#old-sources" title="A.2. Kontroller din kildeliste">Afsnit A.2, “Kontroller din kildeliste”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="minimal-upgrade"></a>4.4.4. Minimal systemopgradering</h3></div></div></div><p>
I nogle tilfælde under udførelse af den fulde opgradering (som beskrevet
nedenfor) kan der blive fjernet et stort antal pakker, som du måske ønsker
at beholde. Vi anbefaler derfor en todelt opgraderingsproces, først en
minimal opgradering til at forbigå disse konflikter, og så en fuld
opgradering som beskrevet i <a class="xref" href="ch-upgrading.da.html#upgrading-full" title="4.4.5. Opgradering af systemet">Afsnit 4.4.5, “Opgradering af systemet”</a>. 
</p><p>
For at gøre dette, så kør først:
</p><pre class="screen">
# apt-get upgrade
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Bemærk]" src="images/note.png" /></td><th align="left">Bemærk</th></tr><tr><td align="left" valign="top"><p>
      Opgraderingsprocessen for tidligere udgivelser anbefalede brugen af
<span class="command"><strong>aptitude</strong></span> til opgraderingen. Dette værktøj er ikke
anbefalet for opgraderinger fra wheezy til jessie.
    </p></td></tr></table></div><p>
Dette medfører en opgradering af de pakker, som kan opgraderes uden at kærve
at andre pakker fjernes eller installeres.
</p><p>
Den mimimale systemopgradering kan også være nyttig når systemet har lidt
ledig plads og en fuld opgradering ikke kan køres på grund af
pladsbegrænsninger.
</p><p>
  Hvis pakken <code class="systemitem">apt-listchanges</code><a id="idp49285376" class="indexterm"></a> er
installeret, så vil den (i sin standardkonfiguration) vise vigtig
information om opgraderede pakker i en tekstviser. Tryk på
<span class="keycap"><strong>q</strong></span> efter du har læst informationen for at afslutte
tekstviseren og fortsæt opgraderingen.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="upgrading-full"></a>4.4.5. Opgradering af systemet</h3></div></div></div><p>
Når du har udført de tidligere trin, er du nu klar til at fortsætte med
hoveddelen af opgraderingen. Kør:
</p><pre class="screen">
# apt-get dist-upgrade
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Bemærk]" src="images/note.png" /></td><th align="left">Bemærk</th></tr><tr><td align="left" valign="top"><p>
      Opgraderingsprocessen for tidligere udgivelser anbefalede brugen af
<span class="command"><strong>aptitude</strong></span> til opgraderingen. Dette værktøj er ikke
anbefalet for opgraderinger fra wheezy til jessie.
    </p></td></tr></table></div><p>
Dette vil udføre en fuldstændig opgradering af systemet, dvs. installere de
nyeste tilgængelige versioner af alle pakker, og løse alle eventuelle
afhængighedsændringer mellem pakker i forskellige udgivelser. Hvis
nødvendigt vil den installere nogle nye pakker (normalt nye
biblioteksversioner, eller omdøbte pakker), og fjerne alle forældede pakker
der er i konflikt med andre pakker.
</p><p>
Når der opgraderes fra et sæt af cd-rommer (eller dvd'er), så vil du blive
spurgt om at indsætte specifikke cd'er på flere punkter under
opgraderingen. Du skal måske indsætte den samme cd flere gange; dette
skyldes forbundne pakker som er blevet spredt ud over cd'erne.
</p><p>
Nye versioner af aktuelt installerede pakker, som ikke kan opgraderes uden
at ændre installationsstatus for andre pakker vil blive efterladt med deres
aktuelle version (vist som <span class="quote">“<span class="quote">held back</span>”</span>). Dette kan løses ved
enten at bruge <span class="command"><strong>aptitude</strong></span> til at vælge disse pakker for
installation elelr ved at prøve <code class="literal">apt-get install
<em class="replaceable"><code>package</code></em></code>.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="trouble"></a>4.5. Mulige problemstillinger under opgradering</h2></div></div></div><p>
De følgende afsnit beskriver kendte problemstillinger, som kan opstå under
en opgradering til jessie.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="immediate-configure"></a>4.5.1. Dist-upgrade fejler med <span class="quote">“<span class="quote">Kunne ikke udføre øjeblikkelig
konfiguration</span>”</span></h3></div></div></div><p>
I nogle tilfælde kan trinet <span class="command"><strong>apt-get dist-upgrade</strong></span> fejl
efter overførsel af pakker med:
</p><pre class="screen">
E: Kunne ikke udføre øjeblikkelig konfiguration på »<em class="replaceable"><code>package</code></em>«. Se venligt man 5 apt.conf under APT::Immediate-Configure for detaljer.
</pre><p>
</p><p>
Hvis det sker, så bør kørsel af <span class="command"><strong>apt-get dist-upgrade -o
APT::Immediate-Configure=0</strong></span> i stedet for tillade at opgraderingen
fortsætter.
</p><p>
En anden mulig omgåelse af dette problem er midlertidig at tilføje både
wheezy- og jessie-kilder til din
<code class="filename">sources.list</code> og køre <span class="command"><strong>apt-get update</strong></span>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="expected-removals"></a>4.5.2. Forventede fjernelser</h3></div></div></div><p>
Opgraderingsprocessen for jessie kan anmode om fjernelse af pakker i
systemet. Den præcise liste over disse pakker vil variere afhængig af det
pakkesæt du har installeret. Disse udgivelsesnoter giver generelle råd om
disse fjernelser, men hvis du er i tvivl, så anbefales det, at du undersøger
pakkefjernelserne foreslået af hver metode før du fortsætter. For yderligere
information om pakker, der er blevet forældet i jessie, se <a class="xref" href="ch-upgrading.da.html#obsolete" title="4.10. Forældede pakker">Afsnit 4.10, “Forældede pakker”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="conflicts-loops"></a>4.5.3. Konflikter eller forhåndsafhængige (Pre-Depends) loop</h3></div></div></div><p>
Undertiden er det nødvendigt at aktivere tilvalget
<code class="literal">APT::Force-LoopBreak</code> i ATP for midlertidigt at kunne
fjerne en essentiel pakke på grund af en konflikt/forhåndsafhængig
loop. <span class="command"><strong>apt-get</strong></span> vil påminde dig om dette og afbryde
opgraderingen. Du kan omgå dette ved at angive tilvalget <code class="literal">-o
APT::Force-LoopBreak=1</code> på kommandolinjen for
<span class="command"><strong>apt-get</strong></span>.
</p><p>
Det kan ske, at et systems afhængighedsstruktur kan være så ødelagt, at det
kræver manuel intervention. Normalt betyder dette brug af
<span class="command"><strong>apt-get</strong></span> eller
</p><pre class="screen">
# dpkg --remove <em class="replaceable"><code>pakkenavn</code></em>
</pre><p>
for at eliminere nogle af de stridende pakker, eller
</p><pre class="screen">
# apt-get -f install
# dpkg --configure --pending
</pre><p>
I ekstreme tilfælde kan det være nødvendigt at fremtvinge reinstallation med
en kommando som
</p><pre class="screen">
# dpkg --install <em class="replaceable"><code>/path/to/package_name.deb</code></em>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="file-conflicts"></a>4.5.4. Filkonflikter</h3></div></div></div><p>
Filkonflikter bør ikke opstå hvis du opgraderer fra et <span class="quote">“<span class="quote">rent</span>”</span>
wheezy-system, men kan opstå hvis du har uofficielle backports
installeret. En filkonflikt vil resultere i en fejl såsom:
</p><pre class="screen">
Udpakker <em class="replaceable"><code>&lt;package-foo&gt;</code></em> (fra <em class="replaceable"><code>&lt;package-foo-file&gt;</code></em>) ...
dpkg: fejl under behandling af <em class="replaceable"><code>&lt;package-foo&gt;</code></em> (--install):
 forsøger at overskrive »<em class="replaceable"><code>&lt;some-file-name&gt;</code></em>«,
 som også er i pakke <em class="replaceable"><code>&lt;package-bar&gt;</code></em>
dpkg-deb: indsætning af underproces dræbt af signal (ødelagt datakanal)
 Der opstod fejl under behandlingen:
 <em class="replaceable"><code>&lt;package-foo&gt;</code></em>
</pre><p>
Du kan forsøge at løse en filkonflikt ved med tvang at fjerne pakken nævnt
på den <span class="emphasis"><em>sidste</em></span> linje i fejlbeskeden:
</p><pre class="screen">
# dpkg -r --force-depends <em class="replaceable"><code>pakkenavn</code></em>
</pre><p>
Efter rettelse, bør du være i stand til at genoptage opgraderingen ved at
gentage de tidligere beskrevne kommandoer for <span class="command"><strong>apt-get</strong></span>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-changes"></a>4.5.5. Konfigurationsændringer</h3></div></div></div><p>
Under opgraderingen vil du blive stillet nogle spørgsmål angående
konfigurationen eller omkonfigurationen af flere pakker. Når du bliver
spurgt om en fil i mappen <code class="filename">/etc/init.d</code> eller filen
<code class="filename">/etc/manpath.config</code> skal erstattes af
pakkevedligeholderens version, så er det normalt nødvendigt at svare »ja«
for at sikre systemkonsistens. Du kan altid vende tilbage til de ældre
versioner, da de bliver gemt med filendelsen <code class="literal">.dpkg-old</code>.
</p><p>
Hvis du ikke er sikker på, hvad du skal gøre, så skriv navnet på pakken
eller filen ned og udred så problemstillingen senere. Du kan søge i
typescript-filen for at gennemse informationen på skærmen fra opgraderingen.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="console-change"></a>4.5.6. Ændring af session til konsol</h3></div></div></div><p>
Hvis du kører opgraderingen med systemets lokale konsol, så vil du måske
opleve, at under visse steder af opgraderingen så skifter konsollen over til
en anden visning og du mister synlighed over opgraderingsprocessen. For
eksempel vil dette ske på skrivebordssystemer når skærmhåndteringen
genstartes.
</p><p>
For at gendanne konsollen hvor opgraderingen var nået til, skal du bruge
<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>
(hvis i den grafiske opstartsskærm) eller bruge <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> (hvis i
den lokale konsol for teksttilstand) for at skifte tilbage til den virtuelle
terminal 1. Erstat F1 med funktionstasten med det samme antal som den
virtuelle terminal opgraderingen kørte i. Du kan også bruge <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Venstre
piletast</strong></span> eller <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Højre
piletast</strong></span> for at skifte mellem de forskellige terminaler
i teksttilstand.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="package-specific-issues"></a>4.5.7. Specielle forhold for specifikke pakker</h3></div></div></div><p>
I de fleste tilfælde, bør pakker blive opgraderet uden problemer mellem
wheezy og jessie. Der er nogle få tilfælde, hvor
intervention kan være krævet, enten før eller under opgraderingen; disse er
detaljeret beskrevet nedenfor per pakke.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="issues-systemd"></a>4.5.7.1. systemd</h4></div></div></div><p>
    Debianopgraderingen fra wheezy til jessie vil som standard
migrere dit init-system fra SysV til systemd. Afhængig af dit system og
opsætning, skal du udføre nogle manuelle ændringer. Vi har detaljerede
kendte problemstillinger i <a class="xref" href="ch-information.da.html#systemd-upgrade-default-init-system" title="5.6. Upgrading installs the new default init system for Jessie">Afsnit 5.6, “Upgrading installs the new default init system for Jessie”</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="issues-lxc"></a>4.5.7.2. LXC</h4></div></div></div><p>
    Hvis du har LXC installeret, så skal du tage specielle hensyn, når du
opgraderer dit system og dine containere. Se venligst <a class="xref" href="ch-information.da.html#lxc-upgrade-issues" title="5.8. Upgrade considerations for LXC hosts and containers">Afsnit 5.8, “Upgrade considerations for LXC hosts and containers”</a> for kendte problemstillinger og løsninger.
  </p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="newkernel"></a>4.6. Opgradering af din kerne og relaterede pakker</h2></div></div></div><p>
Dette afsnit forklarer hvordan du opgraderer din kerne og identificerer
potentielle problemstillinger forbundet med denne opgradering. Du kan enten
installere en af <code class="systemitem">linux-image-*</code><a id="idp49354512" class="indexterm"></a>-pakkerne tilbudt af Debian, eller
kompilere en tilpasset kerne fra kilde.
</p><p>
Bemærk at en masse informaton i dette afsnit er baseret på den antagelse, at
du vil bruge en af de modulære Debiankerner, sammen med <code class="systemitem">initramfs-tools</code><a id="idp49356944" class="indexterm"></a> og <code class="systemitem">udev</code><a id="idp49358640" class="indexterm"></a>. Hvis du vælger at bruge en tilpasset
kerne, som ikke kræver en initrd eller hvis du bruger en anden
initrd-opretter, kan noget af informationen være urelevant for dig.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="kernel-metapackage"></a>4.6.1. Installation af en kernens metapakke</h3></div></div></div><p>
Når du laver en dist-upgrade (distributionsopgradering) fra wheezy
til jessie, så anbefales det, at du installerer en
linux-image-*-metapakke, hvis du ikke har gjort det tidligere. Disse
metapakker vil automatisk placere en nyere version af kernen under
opgraderinger. Du kan verificere om du har en installeret ved at køre:
</p><pre class="screen">
# dpkg -l "linux-image*" | grep ^ii | grep -i meta
</pre><p>
Hvis du ikke ser et resultat, så skal du installere en ny pakke for
linux-image manuelt eller installere en linux-image-metapakke. For at se en
liste over tilgængelige metapakker for linux-image, så kør:
</p><pre class="screen">
# apt-cache search linux-image- | grep -i meta | grep -v transition
</pre><p>
If you are unsure about which package to select, run <code class="literal">uname
-r</code> and look for a package with a similar name.  For example, if
you see '<code class="literal">2.6.32-5-amd64</code>', it is recommended that you
install <code class="systemitem">linux-image-amd64</code><a id="idp49366864" class="indexterm"></a>.  You may
also use <span class="command"><strong>apt-cache</strong></span> to see a long description of each
package in order to help choose the best one available.  For example:
</p><pre class="screen">
# apt-cache show linux-image-amd64
</pre><p>
Du skal så bruge <code class="literal">apt-get install</code> til at installere
den. Når først denne nye kerne er installeret, så skal du genstarte ved
næste tilgængelige mulighed for at få fordelene tilbudt af den nye
kerneversion. Kig dog venligst på <a class="xref" href="ch-upgrading.da.html#nownownow" title="4.7. Ting der skal udføres før genstart">Afsnit 4.7, “Ting der skal udføres før genstart”</a> før du
udfører den første genstart efter opgraderingen.
</p><p>
For de mere eventyrllystne er der en nem måde at kompilere din egen
tilpasset kerne på Debian. Installer kernekilderne, tilbudt i pakken
<code class="systemitem">linux-source</code><a id="idp49372976" class="indexterm"></a>. Du kan også gøre brug
af målet <code class="literal">deb-pkg</code> tilgængelig i kildernes makefile for
bygning af en binær pakke. Yderligere information kan findes i <a class="ulink" href="http://kernel-handbook.alioth.debian.org/" target="_top">Håndbogen for Debians
Linux-kerne</a>, som også kan findes i pakken <code class="systemitem">debian-kernel-handbook</code><a id="idp49376496" class="indexterm"></a>.
</p><p>
Hvis muligt så er det en fordel for dig at opgradere kernepakken adskilt fra
hoveddelen af <code class="literal">dist-upgrade</code> for at reducere risikoen for
et midlertidigt system der ikke kan startes op. Bemærk at dette kun skal
gøres efter den minimale opgraderingsproces beskrevet i <a class="xref" href="ch-upgrading.da.html#minimal-upgrade" title="4.4.4. Minimal systemopgradering">Afsnit 4.4.4, “Minimal systemopgradering”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="initramfs-tools-issues"></a>4.6.2. Changes to root and <code class="filename">/usr</code> filesystem mounting and
checking</h3></div></div></div><p>
    <code class="systemitem">initramfs-tools</code><a id="idp49382496" class="indexterm"></a> will now also run
<code class="literal">fsck</code> on the root filesystem before mounting it.  If the
chosen init program is <code class="literal">systemd</code> and there is a separate
<code class="filename">/usr</code> filesystem, it will also fsck and mount
<code class="filename">/usr</code>.
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	If <code class="filename">/usr</code> is a separate filesystem on a RAID device and
the <code class="literal">INITRDSTART</code> setting in
<code class="filename">/etc/default/mdadm</code> is not '<code class="literal">all</code>', you
will need to change it to include that device.
      </p></li><li class="listitem"><p>
	If <code class="filename">/usr</code> is a separate filesystem on an LVM logical
volume, and the line for <code class="filename">/usr</code> in
<code class="filename">/etc/fstab</code> specifies the device by
<code class="literal">UUID</code> or <code class="literal">LABEL</code>, you must change this
line to specify the device using the format
<code class="filename">/dev/mapper/<em class="replaceable"><code>VG</code></em>-<em class="replaceable"><code>LV</code></em></code>
or
<code class="filename">/dev/<em class="replaceable"><code>VG</code></em>/<em class="replaceable"><code>LV</code></em></code>.
      </p></li><li class="listitem"><p>
	It is no longer possible to bind-mount the <code class="filename">/usr</code>
filesystem.
      </p></li><li class="listitem"><p>
	If the RTC (real time clock) is set to local time and the local time is
ahead of UTC, <code class="literal">e2fsck</code> will print a warning during boot
about the time changing backward (<a class="ulink" href="https://bugs.debian.org/767040" target="_top">bug #767040</a>).  You can disable
this by putting the following lines in
<code class="filename">/etc/e2fsck.conf</code>:
      </p><pre class="screen">
[options]
broken_system_clock=1
</pre></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="nownownow"></a>4.7. Ting der skal udføres før genstart</h2></div></div></div><p>
Når <code class="literal">apt-get dist-upgrade</code> er færdig, så er den
<span class="quote">“<span class="quote">formelle</span>”</span> opgradering færdig, men der er nogle få andre
forhold, som der skal tages hånd om <span class="emphasis"><em>før</em></span> den næste
genstart.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
      Når der opgraderes fra Wheezy til Jessie, så kan det være
en god ide helt at fjerne gamle pakker <span class="emphasis"><em>før</em></span> den første
genstart. Specielt forældede init-skripter kan medføre problemstillinger. Se
venligst <a class="xref" href="ch-upgrading.da.html#purge-removed-packages" title="4.8.1. Fuld fjernelse af afinstallerede pakker">Afsnit 4.8.1, “Fuld fjernelse af afinstallerede pakker”</a> for detaljer om hvordan
du finder og helt fjerner disse pakker.
    </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="for-next"></a>4.8. Forberedelse af den næste udgivelse</h2></div></div></div><p>
Efter opgraderingen er der nogle ting, du kan forberede for din næste
udgivelse.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Fjern nye redundante og forældede pakker som beskrevet i <a class="xref" href="ch-upgrading.da.html#sufficient-space" title="4.4.3. Sikr dig, at du har tilstrækkelig med plads til opgraderingen">Afsnit 4.4.3, “Sikr dig, at du har tilstrækkelig med plads til opgraderingen”</a> og <a class="xref" href="ch-upgrading.da.html#obsolete" title="4.10. Forældede pakker">Afsnit 4.10, “Forældede pakker”</a>. Du bør gennemgå
hvilke konfigurationsfiler de bruger og overveje at fjerne pakkerne, så
deres konfigurationsfiler forsvinder. Se også <a class="xref" href="ch-upgrading.da.html#purge-removed-packages" title="4.8.1. Fuld fjernelse af afinstallerede pakker">Afsnit 4.8.1, “Fuld fjernelse af afinstallerede pakker”</a>.
</p></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="purge-removed-packages"></a>4.8.1. Fuld fjernelse af afinstallerede pakker</h3></div></div></div><p>
    Det er generelt et godt råd at fjerne afinstallerde pakker. Dette gælder
specielt hvis de er blevet afinstalleret i en tidligere
udgivelsesopgradering f.eks. fra opgraderingen til wheezy) eller
de kom fra en tredjeparts leverandør. Specielt gamle init.d-skripter vides
at kunne medføre problemer.
  </p><div class="caution"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Pas på]" src="images/caution.png" /></td><th align="left">Pas på</th></tr><tr><td align="left" valign="top"><p>
      Fuld fjernelse af en pakke vil generelt også fjerne logfilerne, så du vil
skulle lave en sikkerhedskopi af dem først.
    </p></td></tr></table></div><p>
    Den følgende kommando viser en liste over alle fjernede pakker, som kan have
konfigurationsfiler tilbage på systemet (hvis nogen):
  </p><pre class="screen">
# dpkg -l | awk '/^rc/ { print $2 }'
</pre><p>
    Pakkerne kan fjernes ved at bruge <span class="command"><strong>apt-get purge</strong></span>. Hvis vi
antager du vil fjerne dem alle på en gang, så kan du bruge den følgende
kommando:
  </p><pre class="screen">
# apt-get purge $(dpkg -l | awk '/^rc/ { print $2 }')
</pre><p>
    Hvis du bruger <code class="systemitem">aptitude</code><a id="idp49421920" class="indexterm"></a>, så kan du
også bruge det følgende alternativ til kommandoerne ovenfor:
  </p><pre class="screen">
$ aptitude search '~c'
$ aptitude purge '~c'
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="deprecated"></a>4.9. Forældede komponenter</h2></div></div></div><p>
Med den næste udgivelse af Debian 9 (kodenavn
stretch) vil nogle funktioner blive forældet. Brugere vil skulle
migrere til andre alternativer for at forhindre problemer under opgradering
til 9.
</p><p>
Dette inkluderer de følgende funktioner:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The <code class="systemitem">hardening-wrapper</code><a id="idp49431984" class="indexterm"></a> package is
deprecated and is expected to be removed in Stretch.
		</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="obsolete"></a>4.10. Forældede pakker</h2></div></div></div><p>
Der introduceres en masse nye pakker i jessie, men der fjernes og
udelades også en del gamle pakker, som var i wheezy. Der tilbydese
ingen opgraderingssti for disse forældede pakker. Selv om intet forhindrer
dig i fortsat at benytte en forældet pakke, så vil Debianprojektet normat
ikke fortsætte den sikkerhedsmæssige support af pakken mere end et år efter
jessies udgivelse<a href="#ftn.idp49435392" class="footnote" id="idp49435392"><sup class="footnote">[5]</sup></a>, og vil
normalt heller ikke tilbyde anden støtte i mellemperioden. Erstatning af dem
med tilgængelige alternativer, hvis sådanne findes, anbefales.
</p><p>
Der kan være mange årsager til at pakker er blevet fjernet fra
distributionen: De bliver ikke længere vedligeholdt opstrøms, der er ikke
længere en Debianudvikler interesseret i at vedligeholde pakkerne;
funktionaliteten de tilbyder er blevet efterfulgt af andre programmer (eller
en ny version); eller de anses ikke længere for at være egnet for
jessie på grund af fejl i dem. I det sidste tilfælde, kan pakker
stadig være til stede i distributionen <span class="quote">“<span class="quote">unstable</span>”</span>.
</p><p>
Detektering af hvilke pakker på et opdateret system som er
<span class="quote">“<span class="quote">obsolete</span>”</span> (forældet) er meget nemt da pakkehåndteringernes
brugerflader vil markere dem som sådan. Hvis du bruger
<span class="command"><strong>aptitude</strong></span>, så vil du se en liste over disse pakker under
punktet <span class="quote">“<span class="quote">Forældede og lokalt oprettede pakker</span>”</span>.
</p><p>
<a class="ulink" href="https://bugs.debian.org/" target="_top">Debians fejlsporingssystem</a> tilbyder ofte
yderligere information om hvorfor pakkerne blev fjernet. Du bør gennemse
både de arkiverede fejlrapporter for selve pakken og de arkiverede
fejlrapporter for <a class="ulink" href="https://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=ftp.debian.org&amp;archive=yes" target="_top">ftp.debian.org
pseudo-package</a>.
</p><p>
  Listen over forældede pakker inkluderer:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	<code class="systemitem">postgresql-9.1</code><a id="idp49444896" class="indexterm"></a>, efterfølger er
<code class="systemitem">postgresql-9.4</code><a id="idp49446608" class="indexterm"></a>. Når først
operativsystemets opgradering er afsluttet, så bør du planlægge også at
opgradere din PostgreSQL 9.1-databaseklynger til den nye PostgreSQL version
9.4 via værktøjet <span class="command"><strong>pg_upgradecluster</strong></span>. For brugere af det
proceduremæssige sprog PL/perl tilbyder Jessie en opdateret pakke
<code class="systemitem">postgresql-plperl-9.1</code><a id="idp49449536" class="indexterm"></a> lænkedt mod
Jessies version af libperl for at kunne aktivere opgradering til den nye
Perlversion i Jessie, mens de gamle PL/perl-databasefunktioner stadig er
brugbare indtil også databasen er opgraderet.
      </p></li><li class="listitem"><p>
        
        
<code class="systemitem">python3.2</code><a id="idp49452416" class="indexterm"></a>, efterfølger er
<code class="systemitem">python3.4</code><a id="idp49454128" class="indexterm"></a>. (Version 2.7 er
understøttet i både wheezy og jessie.)
      </p></li><li class="listitem"><p>
        <code class="systemitem">ruby1.8</code><a id="idp49456704" class="indexterm"></a> og <code class="systemitem">ruby1.9.1</code><a id="idp49458400" class="indexterm"></a>; efterfølger er <code class="systemitem">ruby2.1</code><a id="idp49460112" class="indexterm"></a>. Installer venligst pakken <code class="systemitem">ruby</code><a id="idp49461824" class="indexterm"></a> for automatisk at spore den nuværende
Ruby-version.
      </p></li><li class="listitem"><p>
        <code class="systemitem">mplayer</code><a id="idp49464400" class="indexterm"></a>; alternativer er <code class="systemitem">mplayer2</code><a id="idp49466096" class="indexterm"></a>, og <code class="systemitem">mpv</code><a id="idp49467808" class="indexterm"></a> (ny i jessie).  Mens den første
hovedsagelig er kompatibel med mplayer i form af kommandolinjeparametre og
konfiguration (og tilføjer nogle nye funktioner), så tilføjer den sidste en
masse nye funktioner og forbedringer, og bliver aktivt vedligeholdt af
opstrømsudviklerne.
      </p></li><li class="listitem"><p>
        <code class="systemitem">openoffice.org</code><a id="idp49470800" class="indexterm"></a>, brug venligst
<code class="systemitem">libreoffice</code><a id="idp49472496" class="indexterm"></a>.
      </p></li><li class="listitem"><p>
        <code class="systemitem">squid</code><a id="idp49474960" class="indexterm"></a>, efterfølger er <code class="systemitem">squid3</code><a id="idp49476672" class="indexterm"></a>.
      </p></li><li class="listitem"><p>
        <code class="systemitem">libjpeg-progs</code><a id="idp49479136" class="indexterm"></a>, efterfølger er
<code class="systemitem">libjpeg-turbo-progs</code><a id="idp49480848" class="indexterm"></a>.
      </p></li><li class="listitem"><p>
        <code class="systemitem">openjdk-6-*</code><a id="idp49483312" class="indexterm"></a>, efterfølger er
<code class="systemitem">openjdk-7-*</code><a id="idp49485024" class="indexterm"></a>.
      </p></li></ul></div><p>
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dummy"></a>4.10.1. Overgangspakker</h3></div></div></div><p>
Nogle pakker fra wheezy er blevet delt op i flere pakker i
jessie, ofte for at forbedre vedligeholdelsen. For at gøre
opgraderingsstien nemmere i sådanne tilfælde, tilbyder jessie ofte
<span class="quote">“<span class="quote">overgangspakker</span>”</span>: Tomme pakker som har det samme navn som den
gamle pakke i wheezy med afhængigheder som medfører, at de nye
pakker bliver installeret. Disse <span class="quote">“<span class="quote">overgangspakker</span>”</span> anses for at
ævre redundante efter opgraderingen og kan fjernes igen.
</p><p>
De fleste (men ikke alle) tomme pakkers beskrivelser indikerer deres
formål. Pakkebeskrivelser for tomme pakker er dog ikke ensartet, så du kan
også finde <span class="command"><strong>deborphan</strong></span> med tilvalgene
<code class="literal">--guess-<em class="replaceable"><code>*</code></em></code>
(f.eks. <code class="literal">--guess-dummy</code>) nyttige til at detektere dem i dit
system. Bemærk at nogle tomme pakker ikke skal fjernes efter en opgradering,
men i stedet bruges til at holde styr på den aktuelle tilgængelig version af
et program over tid.
</p></div></div><div class="footnotes"><br /><hr width="100" align="left" /><div id="ftn.idp49024672" class="footnote"><p><a href="#idp49024672" class="para"><sup class="para">[1] </sup></a>Hvis debconf-prioriteten er sat til et meget højt niveau kan du måske
forhindre konfigurationsprompter, men tjenester som afhænger af standardsvar
som ikke er gældende for dit system vil ikke starte.</p></div><div id="ftn.idp49026256" class="footnote"><p><a href="#idp49026256" class="para"><sup class="para">[2] </sup></a>Eksempelvis: DNS- eller DHCP-tjenester, specielt hvis der ikke er nogen
redundans eller reserve. I tilfældet med DHCP kan slutbrugere blive
frakoblet fra netværket, hvis låneperioden er kortere end tiden, det tager
for opgraderingsprocessen at blive færdig.</p></div><div id="ftn.idp49041936" class="footnote"><p><a href="#idp49041936" class="para"><sup class="para">[3] </sup></a> Denne funktion kan deaktiveres ved at tilføje parameteren
<code class="literal">panic=0</code> til dine opstartsparametre.  </p></div><div id="ftn.idp49126832" class="footnote"><p><a href="#idp49126832" class="para"><sup class="para">[4] </sup></a> Debians pakkehåndteringssystem tillader normalt ikke at en pakke fjerner en
fil ejet af en anden pakke medmindre, at den er blevet defineret til at
erstatte denne pakke.  </p></div><div id="ftn.idp49435392" class="footnote"><p><a href="#idp49435392" class="para"><sup class="para">[5] </sup></a> Eller i den periode hvor der endnu ikke er en ny udgivelse. Typisk er kun to
stabile udgivelser understøttet på samme tidspunkt.  </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch-installing.da.html"><img src="images/prev.png" alt="forrige" /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch-information.da.html"><img src="images/next.png" alt="næste" /></a></td></tr><tr><td width="40%" align="left" valign="top">Kapitel 3. Installeringssystemet </td><td width="20%" align="center"><a accesskey="h" href="index.da.html"><img src="images/home.png" alt="hjem" /></a></td><td width="40%" align="right" valign="top"> Kapitel 5. Ting man skal være opmærksom på i forbindelse med jessie</td></tr></table></div></body></html>
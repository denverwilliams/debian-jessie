<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cap. 4. Actualizarea de la Debian 7 (wheezy)</title><link rel="stylesheet" type="text/css" href="debian.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.ro.html" title="Note de lansare pentru Debian 8 (jessie), 64-bit PC" /><link rel="up" href="index.ro.html" title="Note de lansare pentru Debian 8 (jessie), 64-bit PC" /><link rel="prev" href="ch-installing.ro.html" title="Cap. 3. Sistemul de instalare" /><link rel="next" href="ch-information.ro.html" title="Cap. 5. Probleme în jessie de care ar trebui să știți" /><meta xmlns="" name="viewport" content="width=device-width, initial-scale=1" /><style xmlns="" type="text/css">
      body {
        background-repeat: no-repeat;
        background-image: none;
      }
    </style></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Cap. 4. Actualizarea de la Debian  7 (wheezy)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch-installing.ro.html"><img src="images/prev.png" alt="Înapoi" /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch-information.ro.html"><img src="images/next.png" alt="Înainte" /></a></td></tr></table><hr /></div><div xml:lang="ro" class="chapter" lang="ro"><div class="titlepage"><div><div><h1 class="title"><a id="ch-upgrading"></a>Cap. 4. Actualizarea de la Debian  7 (wheezy)</h1></div></div></div><div class="toc"><p><strong>Cuprins</strong></p><dl class="toc"><dt><span class="section"><a href="ch-upgrading.ro.html#backup">4.1. Pregătirile pentru actualizare</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.ro.html#data-backup">4.1.1. Faceți copii de siguranță pentru orice date sau configurații</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#inform-users">4.1.2. Informați utilizatorii din timp</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#services-downtime">4.1.3. Pregătire pentru oprirea serviciilor</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#recovery">4.1.4. Pregătiți recuperarea</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#upgrade-preparations">4.1.5. Pregătiți un mediu sigur pentru actualizare</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.ro.html#system-status">4.2. Verificarea stării sistemului</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.ro.html#review-actions">4.2.1. Verificați în managerul de pachete acțiunile de efectuat</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#disable-apt-pinning">4.2.2. Dezactivarea alegerilor selective APT</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#package-status">4.2.3. Verificarea stării pachetelor</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#proposed-updates">4.2.4. Secțiunea proposed-updates</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#unofficial-sources">4.2.5. Unofficial sources</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.ro.html#upgrade-process">4.3. Pregătirea surselor pentru APT</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.ro.html#network">4.3.1. Adăugarea de surse APT din Internet</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#localmirror">4.3.2. Adăugarea de surse APT pentru un sit-oglindă local</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#cdroms">4.3.3. Adăugarea de surse APT de pe un mediu optic</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.ro.html#upgradingpackages">4.4. Actualizarea pachetelor</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.ro.html#record-session">4.4.1. Înregistrarea sesiunii</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#updating-lists">4.4.2. Actualizarea listei de pachete</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#sufficient-space">4.4.3. Verificați dacă aveți suficient spațiu pentru actualizare</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#minimal-upgrade">4.4.4. Actualizare minimală de sistem</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#upgrading-full">4.4.5. Actualizarea sistemului </a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.ro.html#trouble">4.5. Probleme posibile în timpul actualizării</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.ro.html#immediate-configure">4.5.1. Dist-upgrade eșuează cu eroarea „Could not perform immediate configuration”</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#expected-removals">4.5.2. Programe îndepărtate</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#conflicts-loops">4.5.3. Conflicte sau cicluri de pre-dependențe </a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#file-conflicts">4.5.4. Conflict de fișiere</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#configuration-changes">4.5.5. Modificări de configurare</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#console-change">4.5.6. Schimbare a sesiunii la consolă</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#package-specific-issues">4.5.7. Atenție deosebită la anumite pachete</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.ro.html#newkernel">4.6. Actualizarea nucleului și a pachetelor conexe</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.ro.html#kernel-metapackage">4.6.1. Installing a kernel metapackage</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#initramfs-tools-issues">4.6.2. Changes to root and <code class="filename">/usr</code> filesystem mounting and
checking</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.ro.html#nownownow">4.7. Lucruri de făcut înainte de repornire</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#for-next">4.8. Pregătirile pentru următoarea versiune</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.ro.html#purge-removed-packages">4.8.1. Purging removed packages</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.ro.html#deprecated">4.9. Componente depășite</a></span></dt><dt><span class="section"><a href="ch-upgrading.ro.html#obsolete">4.10. Pachete învechite</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.ro.html#dummy">4.10.1. Pachetele marionetă</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="backup"></a>4.1. Pregătirile pentru actualizare</h2></div></div></div><p>
Vă sugerăm ca înainte de actualizare să citiți informațiile din <a class="xref" href="ch-information.ro.html" title="Cap. 5. Probleme în jessie de care ar trebui să știți">Cap. 5, <em>Probleme în jessie de care ar trebui să știți</em></a>. Acel capitol tratează probleme potențiale care
nu sunt legate direct de procesul de actualizare, dar care ar putea fi
important de știut înainte să începeți.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="data-backup"></a>4.1.1. Faceți copii de siguranță pentru orice date sau configurații</h3></div></div></div><p>
Înainte de a vă actualiza sistemul, este indicat să faceți o copie de
siguranță completă, sau cel puțin a datelor sau a configurațiilor pe care nu
vă permiteți să le pierdeți. Uneltele și procesele de actualizare sunt
foarte fiabile, însă o problemă hardware apărută în mijlocul actualizării
poate afecta sever un sistem.
</p><p>
Cele mai importate lucruri de copiat sunt conținutul lui
<code class="filename">/etc</code>, al lui <code class="filename">/var/lib/dpkg</code>, al lui
<code class="filename">/var/lib/apt/extended_states</code> și rezultatul comenzii
<code class="literal">dpkg --get-selections "*"</code> (ghilimelele sunt
importante). Dacă folosiți <span class="command"><strong> aptitude</strong></span> pentru administrarea
pachetelor pe sistemul dumneavoastră, va trebui să salvați și
<code class="filename">/var/lib/aptitude/pkgstates</code>.
</p><p>
Procesul de actualizare, în sine, nu modifică nimic în directorul
<code class="filename">/home</code>. Totuși, unele aplicații (cum ar fi unele
componente ale suitei Mozilla, mediile grafice GNOME și KDE) sunt cunoscute
pentru faptul că suprascriu valorile existente ale configurațiilor
utilizatorilor cu noi valori implicite în momentul în care o versiune nouă a
aplicației este pornită pentru prima oară de către utilizator. Ca măsură de
precauție, veți dori probabil să faceți o copie de siguranță a fișierelor și
directoarelor ascunse (care încep cu punct, „dotfiles”) din directoarele
utilizatorilor. Copia ar putea să vă ajute să recreați vechile
configurații. Probabil veți dori să informați și utilizatorii în legătură cu
această problemă.
</p><p>
Orice operație de instalare a pachetelor trebuie executată cu drepturi de
superutilizator, deci fie vă autentificați ca <code class="literal">root</code>, fie
utilizați <span class="command"><strong>su</strong></span> sau <span class="command"><strong>sudo</strong></span> pentru a obține
drepturile de acces necesare.
</p><p>
Operația de actualizare trebuie să respecte câteva precondiții; va trebui să
verificați dacă sunt respectate înainte de actualizare.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="inform-users"></a>4.1.2. Informați utilizatorii din timp</h3></div></div></div><p>
Este o idee bună să vă informați din timp toți utilizatorii despre
actualizările planificate, chiar dacă utilizatorii ce vă accesează sistemul
prin conexiuni <span class="command"><strong>ssh</strong></span> n-ar trebui să sesizeze prea multe în
timpul actualizării și ar trebui să-și poată continua lucrul. 
</p><p>
Dacă doriți să vă luați măsuri suplimentare de precauție, faceți o copie de
siguranță sau demontați partiția <code class="filename">/home</code> înainte de
actualizare.
</p><p>
Va trebui sa faceți o înnoire de nucleu odată cu trecerea la jessie,
deci o repornire va fi necesară. În mod normal aceasta se face atunci când
actualizarea este încheiată.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="services-downtime"></a>4.1.3. Pregătire pentru oprirea serviciilor</h3></div></div></div><p>
Pot exista servicii oferite de sistem, care sunt asociate cu pachete care
vor fi incluse in actualizare. În acest caz țineți cont că aceste servicii
vor fi oprite în timp ce pachetele asociate sunt înlocuite și
configurate. În această perioadă, serviciile respective nu vor fi
disponibile.
</p><p>
Timpul precis de indisponibilitate a acestor servicii variază în funcție de
numărul de pachete înnoite în sistem și include de asemenea timpul necesar
administratorului de sistem să răspundă la întrebările de configurare ale
diverselor pachete înnoite (dacă există). Țineți cont că în cazul în care
procesul de înnoire se face nesupraveghat și sistemul solicită indicații pe
parcursul actualizării, este foarte posibil ca serviciile să fie
indisponibile<a href="#ftn.idp53005968" class="footnote" id="idp53005968"><sup class="footnote">[1]</sup></a> pentru o perioadă de timp
semnificativă.
</p><p>
Dacă sistemul de actualizat furnizează servicii critice pentru utilizatori
sau rețea<a href="#ftn.idp53007664" class="footnote" id="idp53007664"><sup class="footnote">[2]</sup></a> puteți reduce timpul de
indisponibilitate dacă faceți o înnoire minimală, cum este descrisă în <a class="xref" href="ch-upgrading.ro.html#minimal-upgrade" title="4.4.4. Actualizare minimală de sistem">Secțiune 4.4.4, „Actualizare minimală de sistem”</a>, urmată de o înnoire a nucleului și o repornire
și apoi înnoiți pachetele asociate cu serviciile critice. Înnoiți aceste
pachete înainte de înnoirea completă a sistemului, descrisă în <a class="xref" href="ch-upgrading.ro.html#upgrading-full" title="4.4.5. Actualizarea sistemului">Secțiune 4.4.5, „Actualizarea sistemului ”</a>.  În acest fel puteți să vă asigurați că aceste
servicii critice rulează și sunt disponibile pe durata întregului proces de
înnoire și timpul cât sunt indisponibile este redus.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="recovery"></a>4.1.4. Pregătiți recuperarea</h3></div></div></div><p>
Deși Debian face tot posibilul ca sistemul să poată fi pornit în orice
moment există un risc real să întâmpinați probleme la reinițializarea
sistemului, după actualizare. Problemele potențial cunoscute sunt
documentate aici și în următorul capitol al Notelor de lansare.
</p><p>
Din acest motiv are sens să vă asigurați că veți putea să recuperați
sistemul în eventualitatea că acesta nu va mai putea reporni sau, în cazul
sistemelor la distanță, nu va putea să activeze conexiunile la rețea.
</p><p>
Dacă faceți actualizarea de la distanță printr-o conexiune
<span class="command"><strong>ssh</strong></span> este recomandabil să luați măsurile necesare pentru a
putea accesa serverul printr-un terminal serial. Există posibilitatea ca
după actualizarea nucleului și repornirea sistemului, să fie nevoie să
reparați configurația sistemului printr-o consolă locală. De asemenea, dacă
sistemul este repornit accidental în mijlocul actualizării există șansa să
fie nevoie să recuperați folosind o consolă locală.
</p><p>
Generally we recommend using the <span class="emphasis"><em>rescue mode</em></span> of the
jessie Debian Installer.  The advantage of using the installer is
that you can choose between its many methods to find one that best suits
your situation.  For more information, please consult the section
<span class="quote">„<span class="quote">Recovering a Broken System</span>”</span> in chapter 8 of the <a class="ulink" href="https://www.debian.org/releases/jessie/installmanual" target="_top">Installation Guide</a> and the <a class="ulink" href="https://wiki.debian.org/DebianInstaller/FAQ" target="_top">Debian Installer FAQ</a>.
</p><p>
Dacă aceasta nu reușește, va trebui să porniți sistemul printr-o metodă
alternativă, astfel încât să-l puteți accesa și repara. O opțiune este să
folosiți o imagine specială pentru recuperare sau un Linux care rulează de
pe CD. După pornirea în acest fel ar trebui să puteți monta sistemul de
fișiere rădăcină și să faceți <code class="literal">chroot</code> în el pentru a
investiga și repara problema.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="recovery-initrd"></a>4.1.4.1. Consola de depanare în timpul inițializării folosind initrd</h4></div></div></div><p>
Pachetul <code class="systemitem">initramfs-tools</code><a id="idp53022208" class="indexterm"></a> include un
interpretor de comenzi minimal<a href="#ftn.idp53023040" class="footnote" id="idp53023040"><sup class="footnote">[3]</sup></a> în
imaginile initrd pe care le generează. Dacă, de exemplu, imaginea initrd nu
poate să monteze sistemul de fișiere rădăcină, veți fi transferat la acest
interpretor de comenzi, care dispune de comenzi de bază pentru a putea
detecta și, în măsura posibilităților, de a rezolva problema.
</p><p>
Lucruri uzuale pe care ar trebui să le verificați: prezența
fișierelor-dispozitiv corecte în <code class="filename">/dev</code>, care module sunt
încărcate (<code class="literal">cat /proc/modules</code>), verificarea rezultatului
comenzii <span class="command"><strong>dmesg</strong></span> pentru erori la încărcarea
driverelor. Rezultatul comenzii <span class="command"><strong>dmesg</strong></span> va arăta și care
fișiere-dispozitiv au fost alocate discurilor. Ar trebui să verificați
rezultatul comenzii <code class="literal">echo $ROOT</code> pentru a vă asigura că
sistemul de fișiere rădăcină este pe dispozitivul pe care vă așteptați să
fie.
</p><p>
Dacă reușiți să corectați problema, puteți ieși din consola de depanare cu
comanda <code class="literal">exit</code> și apoi se va continua procesul de
inițializare de la punctul în care a eșuat. Desigur, va trebui să reparați
problema reală și să regenerați imaginea initrd pentru ca următoarea
inițializare a sistemului să nu eșueze la fel.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="recovery-shell-systemd"></a>4.1.4.2. Debug shell during boot using systemd</h4></div></div></div><p>
    If the boot fails under systemd, it is possible to obtain a debug root shell
by changing the kernel command line.  If the basic boot succeeds, but some
services fail to start, it may be useful to add
<code class="literal">systemd.unit=rescue.target</code> to the kernel parameters.
  </p><p>
    Otherwise, the kernel parameter
<code class="literal">systemd.unit=emergency.target</code> will provide you with a
root shell at the earliest possible point.  However, this is done before
mounting the root file system with read-write permissions.  You will have to
do that manually with:
  </p><pre class="screen">
mount -o remount,rw /
</pre><p>
    More information on debugging a broken boot under systemd can be found in
the <a class="ulink" href="http://freedesktop.org/wiki/Software/systemd/Debugging/" target="_top">
Diagnosing Boot Problems</a> article.
  </p><p>
    If everything else fails, you might be able to boot via the old sysvinit
system.  This requires that <code class="systemitem">sysvinit</code><a id="idp53038128" class="indexterm"></a>
is still installed and the binary <code class="filename">/lib/sysvinit/init</code> is
included in your initramfs.  If these requirements are met, add
<code class="literal">init=/lib/sysvinit/init</code> on the kernel command-line and it
will boot with the sysvinit binary.
  </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="upgrade-preparations"></a>4.1.5. Pregătiți un mediu sigur pentru actualizare</h3></div></div></div><p>
Actualizarea distribuției ar trebui făcută fie local dintr-o consolă
virtuală în mod text (sau printr-o conexiune la un terminal serial), fie de
la distanță printr-o conexiune <span class="command"><strong>ssh</strong></span>. 
</p><div class="important"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png" /></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>
  Dacă utilizați servicii VPN (ca <code class="systemitem">tinc</code><a id="idp53044640" class="indexterm"></a>) este posibil să nu fie disponibile pe
parcursul procesului de înnoire. Mai multe informații la <a class="xref" href="ch-upgrading.ro.html#services-downtime" title="4.1.3. Pregătire pentru oprirea serviciilor">Secțiune 4.1.3, „Pregătire pentru oprirea serviciilor”</a>.
  </p></td></tr></table></div><p>
Pentru a avea încă o măsură de siguranță când actualizați de la distanță, vă
sugerăm să rulați procesul de actualizare într-o consolă virtuală furnizată
de programul <span class="command"><strong>screen</strong></span>, lucru care vă va permite să vă
reconectați în siguranță și oferă siguranța că procesul de instalare nu va
fi întrerupt, chiar dacă procesul care întreține conexiunea la distanță
eșuează.
</p><div class="important"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png" /></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>
    <span class="emphasis"><em>Nu</em></span> actualizați sistemul folosind o sesiune
<span class="command"><strong>telnet</strong></span>, <span class="command"><strong>rlogin</strong></span>,
<span class="command"><strong>rsh</strong></span>, sau dintr-o sesiune X administrată de
<span class="command"><strong>xdm</strong></span>, <span class="command"><strong>gdm</strong></span> sau <span class="command"><strong>kdm</strong></span>,
etc. pe sistemul pe care îl actualizați. Acest lucru este necesar deoarece
oricare dintre aceste servicii poate fi oprit în timpul actualizării, ceea
ce poate rezulta într-un sistem <span class="emphasis"><em>inaccesibil</em></span>, actualizat
doar parțial. Utilizarea aplicației GNOME <span class="command"><strong>update-manager</strong></span>
pentru actualizarea la versiuni noi de sistem este
<span class="emphasis"><em>descurajată</em></span>, deoarece acest utilitar depinde de
sesiunea de birou curentă.
  </p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="system-status"></a>4.2. Verificarea stării sistemului</h2></div></div></div><p>
Procedeul de actualizare descris în acest capitol a fost conceput pentru
actualizări de la sisteme wheezy <span class="quote">„<span class="quote">pure</span>”</span>, fără pachete
din surse terțe. Pentru o mai mare fiabilitate a procedeului de actualizare
veți dori să ștergeți pachetele provenite din surse terțe înainte să
începeți actualizarea.
</p><p>
Direct upgrades from Debian releases older than 7
(wheezy)  are not supported.  Please follow the instructions in
the <a class="ulink" href="https://www.debian.org/releases/wheezy/releasenotes" target="_top">Release
Notes for Debian 7</a> to upgrade to 7 first.
</p><p>
De asemenea, se pleacă de la premiza că ați actualizat până la ultima
versiune minoră a lui wheezy. Dacă nu ați făcut acest lucru sau
dacă aveți dubii, urmați instrucțiunile din <a class="xref" href="ap-old-stuff.ro.html#old-upgrade" title="A.1. Actualizarea sistemului wheezy">Secțiune A.1, „Actualizarea sistemului wheezy”</a>.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="review-actions"></a>4.2.1. Verificați în managerul de pachete acțiunile de efectuat</h3></div></div></div><p>
În anumite cazuri, dacă ați folosit <span class="command"><strong>apt-get</strong></span> să instalați
pachete în loc să folosiți <span class="command"><strong>aptitude</strong></span>,
<span class="command"><strong>aptitude</strong></span> poate considera un pachet ca fiind nefolosit și
să-l înregistreze pentru ștergere. În general, ar trebui să vă asigurați că
sistemul este adus la zi și curat, înainte de a continua procesul de
actualizare.
</p><p>
Din această cauză ar trebui să verificați dacă sunt acțiuni în așteptare în
managerul de pachete <span class="command"><strong>aptitude</strong></span>. Dacă un pachet este
programat pentru ștergere sau actualizare în managerul de pachete ar putea
avea un impact negativ asupra procedeului de actualizare. Țineți cont că
acest lucru nu poate fi corectat decât dacă
<code class="filename">sources.list</code> se referă încă la
<span class="emphasis"><em>wheezy</em></span> și nu la <span class="emphasis"><em>stable</em></span>
sau <span class="emphasis"><em>jessie</em></span>, vedeți <a class="xref" href="ap-old-stuff.ro.html#old-sources" title="A.2. Verificarea listei de surse">Secțiune A.2, „Verificarea listei de surse”</a>.
</p><p>
Pentru a face această verificare porniți <span class="command"><strong>aptitude</strong></span> în
<span class="quote">„<span class="quote">modul visual</span>”</span> și apăsați <span class="keycap"><strong>g</strong></span> (de la
<span class="quote">„<span class="quote">Go</span>”</span>). Dacă vă arată vreo acțiune ar trebui să revizuiți și să
anulați sau să efectuați acțiunile sugerate. Dacă nu este sugerată nici o
acțiune va fi afișat mesajul <span class="quote">„<span class="quote">No packages are scheduled to be
installed, removed, or upgraded</span>”</span> (sau <span class="quote">„<span class="quote">Nici un pachet nu este
programat sa fie instalat, șters sau înnoit</span>”</span>).
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="disable-apt-pinning"></a>4.2.2. Dezactivarea alegerilor selective APT</h3></div></div></div><p>
Dacă ați configurat APT să instaleze anumite pachete dintr-o distribuție
diferită de cea stabilă (ex. din testare), ar putea fi nevoie să schimbați
configurația alegerilor selective APT (prezentă în
<code class="filename">/etc/apt/preferences</code> și
<code class="filename">/etc/apt/preferences.d/</code>) pentru a permite actualizarea
pachetelor la versiunile din noua versiune stabilă. Mai multe informații
despre alegeri selective APT pot fi găsite în <span class="citerefentry"><span class="refentrytitle">apt_preferences</span>(5)</span>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="package-status"></a>4.2.3. Verificarea stării pachetelor</h3></div></div></div><p>
Indiferent de metoda utilizată pentru actualizare, este recomandat să
verificați, mai întâi, starea tuturor pachetelor, asigurându-vă că toate
pachetele sunt într-o stare actualizabilă. Următoarea comandă vă va afișa
eventualele pachete care au starea de jumătate-instalat sau
eșec-configurare, precum și cele cu o stare eronată.
</p><pre class="screen">
# dpkg --audit
</pre><p>
Ați putea, de asemenea, să inspectați starea tuturor pachetelor de pe
sistemul dumneavoastră utilizând <span class="command"><strong>aptitude</strong></span> sau folosind
comenzi precum
</p><pre class="screen">
# dpkg -l | pager
</pre><p>
sau
</p><pre class="screen">
# dpkg --get-selections "*" &gt; ~/pachete-curente.txt
</pre><p>
Este preferabil să ștergeți marcajul „păstrat” al oricărui pachet în această
stare, înaintea actualizării. Dacă un pachet esențial care trebuie
actualizat este „păstrat”, actualizarea va eșua.
</p><p>
A se reține că <span class="command"><strong>aptitude</strong></span> folosește o metodă diferită de a
marca pachetele care sunt păstrate față de <span class="command"><strong>apt-get</strong></span> și
<span class="command"><strong>dselect</strong></span>. Puteți identifica pachetele păstrate pentru
<span class="command"><strong>aptitude</strong></span> cu
</p><pre class="screen">
# aptitude search "~ahold" 
</pre><p>
Dacă vreți să verificați ce pachete aveți păstrate pentru
<span class="command"><strong>apt-get</strong></span>, ar trebui să folosiți
</p><pre class="screen">
# dpkg --get-selections | grep 'hold$'
</pre><p>
Dacă ați modificat și recompilat un pachet local și nu l-ați redenumit sau
nu i-ați atașat o epocă în versiune, trebuie să îl plasați pe „păstrat”
pentru a preveni actualizarea sa.
</p><p>
Starea „păstrat” pentru <span class="command"><strong>apt-get</strong></span> poate fi schimbată
folosind:
</p><pre class="screen">
# echo <em class="replaceable"><code>nume_pachet</code></em> hold | dpkg --set-selections
</pre><p>
Înlocuiți <code class="literal">hold</code> cu <code class="literal">install</code> pentru a
demarca starea <span class="quote">„<span class="quote">hold</span>”</span>.
</p><p>
Dacă este ceva ce trebui rezolvat, cel mai bine vă asigurați că
<code class="filename">sources.list</code> încă se referă la wheezy după
cum este explicat în <a class="xref" href="ap-old-stuff.ro.html#old-sources" title="A.2. Verificarea listei de surse">Secțiune A.2, „Verificarea listei de surse”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="proposed-updates"></a>4.2.4. Secțiunea proposed-updates</h3></div></div></div><p>
    Dacă aveți secțiunea <code class="literal">proposed-updates</code> enumerată în
fișierul <code class="filename">/etc/apt/sources.list</code>, ar fi bine să o
ștergeți înainte de a încerca să actualizați sistemul. Aceasta este o măsură
de precauție pentru a reduce probabilitatea de apariție a unor conflicte.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="unofficial-sources"></a>4.2.5. Unofficial sources</h3></div></div></div><p>
Dacă aveți pachete non-Debian pe sistemul dumneavoastră, ar trebui să știți
că acestea ar putea fi eliminate în cursul actualizării datorită
dependențelor conflictuale. Dacă aceste pachete au fost instalate prin
adăugarea unei arhive suplimentare în
<code class="filename">/etc/apt/sources.list</code>, ar trebui să verificați dacă
această arhivă oferă pachete compilate pentru jessie și să schimbați
linia cu sursa corespunzătoare la același moment cu schimbarea surselor
pentru pachetele Debian.
</p><p>
Some users may have <span class="emphasis"><em>unofficial</em></span> backported
<span class="quote">„<span class="quote">newer</span>”</span> versions of packages that <span class="emphasis"><em>are</em></span> in
Debian installed on their wheezy system.  Such packages are most
likely to cause problems during an upgrade as they may result in file
conflicts<a href="#ftn.idp53107808" class="footnote" id="idp53107808"><sup class="footnote">[4]</sup></a>.  <a class="xref" href="ch-upgrading.ro.html#trouble" title="4.5. Probleme posibile în timpul actualizării">Secțiune 4.5, „Probleme posibile în timpul actualizării”</a>
has some information on how to deal with file conflicts if they should
occur.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="upgrade-process"></a>4.3. Pregătirea surselor pentru APT</h2></div></div></div><p>
Înainte de a începe actualizarea trebuie să ajustați fișierul de configurare
<code class="systemitem">apt</code><a id="idp53112192" class="indexterm"></a> pentru listele de pachete,
<code class="filename">/etc/apt/sources.list</code>.
</p><p>
<code class="systemitem">apt</code><a id="idp53114912" class="indexterm"></a> va lua în considerare toate
pachetele care pot fi găsite prin intermediul unei linii
<span class="quote">„<span class="quote"><code class="literal">deb</code></span>”</span> și va instala pachetul cu cea mai mare
versiune, stabilind prioritatea în funcție de poziția liniilor (astfel, în
cazul mai multor locații ar trebui să listați în primul rând un harddisk
local, după care <acronym title="Compact Disc">CD</acronym>-uri și după aceea situri-oglindă
HTTP/FTP).
</p><p>
O versiune poate fi referită deseori atât prin numele de cod (de ex:
<code class="literal">wheezy</code>, <code class="literal">jessie</code>) cât
și prin numele de stare (ex: <code class="literal">oldstable</code>,
<code class="literal">stable</code>, <code class="literal">testing</code>,
<code class="literal">unstable</code>). Referirea la o versiune folosind numele de cod
are avantajul că nu veți avea surpriza unei noi versiuni, motiv pentru care
am folosit această abordare aici. Evident, aceasta înseamnă că va trebui să
urmăriți anunțurile de lansare. Dacă utilizați numele de stare, veți observa
multe actualizări pentru pachete, disponibile imediat ce o versiune a fost
lansată.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="network"></a>4.3.1. Adăugarea de surse APT din Internet</h3></div></div></div><p>
Configurația implicită este pregătită pentru instalarea de pe serverele
Debian din Internet, însă poate veți dori să modificați
<code class="filename">/etc/apt/sources.list</code> pentru a utiliza servere
alternative, preferabil dintr-un loc apropiat de dumneavoastră, din punct de
vedere a rețelei în care vă aflați.
</p><p>
Serverele Debian alternative HTTP sau FTP pot fi găsite la <a class="ulink" href="https://www.debian.org/distrib/ftplist" target="_top">https://www.debian.org/distrib/ftplist</a> (secțiunea <span class="quote">„<span class="quote">Lista completă a
siturilor-oglindă Debian</span>”</span>). Locațiile alternative HTTP sunt în
general mai rapide decât cele FTP.
</p><p>
De exemplu, să presupunem că cea mai apropiată locație alternativă Debian
este <code class="literal">http://mirrors.kernel.org/</code>. Când inspectați această
locație cu un navigator de web sau un client de FTP, veți observa că
directoarele principale sunt organizate astfel:
</p><pre class="programlisting">
http://mirrors.kernel.org/debian/dists/jessie/main/binary-<span class="phrase">amd64</span>/...
http://mirrors.kernel.org/debian/dists/jessie/contrib/binary-<span class="phrase">amd64</span>/...
</pre><p>
Pentru a utiliza această locație cu <code class="systemitem">apt</code><a id="idp53132704" class="indexterm"></a>, trebuie să adăugați această linie la
fișierul dumneavoastră <code class="filename">sources.list</code>:
</p><pre class="programlisting">deb http://mirrors.kernel.org/debian jessie main contrib</pre><p>
A se observa faptul că <span class="quote">„<span class="quote"><code class="literal">dists</code></span>”</span> este adăugat
implicit, iar argumentele de după numele versiunii sunt utilizate pentru a
expanda calea în directoare multiple.
</p><p>
După ce adăugați noile surse, dezactivați liniile
<span class="quote">„<span class="quote"><code class="literal">deb</code></span>”</span> care existau înainte în
<code class="filename">sources.list</code>, prin plasarea unui diez
(<code class="literal">#</code>) la începutul lor.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="localmirror"></a>4.3.2. Adăugarea de surse APT pentru un sit-oglindă local</h3></div></div></div><p>
În loc să folosiți situri-oglindă HTTP sau FTP, ați putea dori să modificați
<code class="filename">/etc/apt/sources.list</code> pentru a folosi o sursă pe un
disc local (poate montat cu <acronym title="Network File System">NFS</acronym>).
</p><p>
De exemplu, locația dumneavoastră cu pachete poate fi în
<code class="filename">/var/ftp/debian/</code>, având directoarele principale astfel:
</p><pre class="programlisting">
/var/ftp/debian/dists/jessie/main/binary-<span class="phrase">amd64</span>/...
/var/ftp/debian/dists/jessie/contrib/binary-<span class="phrase">amd64</span>/...
</pre><p>
Pentru a utiliza această locație cu <code class="systemitem">apt</code><a id="idp53147184" class="indexterm"></a>, trebuie să adăugați această linie la
fișierul dumneavoastră <code class="filename">sources.list</code>:
</p><pre class="programlisting">deb file:/var/ftp/debian jessie main contrib</pre><p>
A se observa faptul că <span class="quote">„<span class="quote"><code class="literal">dists</code></span>”</span> este adăugat
implicit, iar argumentele de după numele versiunii sunt utilizate pentru a
expanda calea în directoare multiple.
</p><p>
După ce adăugați noile surse, dezactivați liniile
<span class="quote">„<span class="quote"><code class="literal">deb</code></span>”</span> care existau înainte în
<code class="filename">sources.list</code>, prin plasarea unui diez
(<code class="literal">#</code>) la începutul lor.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cdroms"></a>4.3.3. Adăugarea de surse APT de pe un mediu optic</h3></div></div></div><p>
Dacă doriți să folosiți <span class="emphasis"><em>doar</em></span> CD-uri (sau DVD-uri sau
discuri Blu-ray), dezactivați liniile <span class="quote">„<span class="quote"><code class="literal">deb</code></span>”</span>
care existau înainte în <code class="filename">sources.list</code>, prin plasarea
unui diez (<code class="literal">#</code>) la începutul lor.
</p><p>
Make sure there is a line in <code class="filename">/etc/fstab</code> that enables
mounting your CD-ROM drive at the <code class="filename">/media/cdrom</code> mount
point.  For example, if <code class="filename">/dev/sr0</code> is your CD-ROM drive,
<code class="filename">/etc/fstab</code> should contain a line like:
</p><pre class="programlisting">
/dev/sr0 /media/cdrom auto noauto,ro 0 0
</pre><p>
A se reține că nu trebuie să existe <span class="emphasis"><em>nici un spațiu</em></span>
între cuvintele <code class="literal">noauto,ro</code> din cel de-al patrulea câmp.
</p><p>
Pentru a verifica funcționarea, introduceți un CD și încercați să rulați
</p><pre class="screen">
# mount /media/cdrom    # this will mount the CD to the mount point
# ls -alF /media/cdrom  # this should show the CD's root directory
# umount /media/cdrom   # this will unmount the CD
</pre><p>
Apoi, rulați
</p><pre class="screen">
# apt-cdrom add
</pre><p>
pentru fiecare CD-ROM Debian cu binare pe care îl aveți, pentru a adăuga
date despre fiecare CD în baza de date APT.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="upgradingpackages"></a>4.4. Actualizarea pachetelor</h2></div></div></div><p>
Metoda recomandată pentru actualizarea de la versiuni Debian precedente
este folosirea utilitarului pentru administrarea pachetelor
<span class="command"><strong>apt-get</strong></span>. În lansările anterioare utilitarului
<span class="command"><strong>aptitude</strong></span> era recomandat pentru acest scop, dar versiuni
recente ale <span class="command"><strong>apt-get</strong></span> oferă același nivel de
funcționalitate și se pare că produce în mai multe cazuri rezultatul dorit
la actualizări.
</p><p>
Nu uitați să montați toate partițiile necesare (în special partiția rădăcină
și partiția <code class="filename">/usr</code>) în mod citire-scriere, cu o comandă
ca:
</p><pre class="screen">
# mount -o remount,rw /<em class="replaceable"><code>punct_de_montare</code></em>
</pre><p>
În continuare ar trebui să verificați că sursele APT (din
<code class="filename">/etc/apt/sources.list</code>) se referă la
<span class="quote">„<span class="quote"><code class="literal">jessie</code></span>”</span> sau la
<span class="quote">„<span class="quote"><code class="literal">stable</code></span>”</span>. Nu ar trebui să fie nici o sursă
care se referă la wheezy.
</p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Notă]" src="images/note.png" /></td><th align="left">Notă</th></tr><tr><td align="left" valign="top"><p>
    Liniile de surse pentru CD-ROM pot uneori conține
<span class="quote">„<span class="quote"><code class="literal">unstable</code></span>”</span>. Deși asta ar putea fi derutant,
ele <span class="emphasis"><em>nu</em></span> trebuie schimbate.
  </p></td></tr></table></div><p>
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="record-session"></a>4.4.1. Înregistrarea sesiunii</h3></div></div></div><p>
Este recomandat să utilizați programul <span class="command"><strong>/usr/bin/script</strong></span>
pentru a înregistra sesiunea de actualizare. În cazul în care intervine vreo
problemă veți avea un istoric a ceea ce s-a întâmplat, iar dacă este nevoie,
veți putea oferi informații exacte când raportați problema. Pentru a porni
înregistrarea, tastați:
</p><pre class="screen">
# script -t 2&gt;~/upgrade-jessie<em class="replaceable"><code>etapă</code></em>.time -a ~/upgrade-jessie<em class="replaceable"><code>etapă</code></em>.script
</pre><p>
sau similar. Dacă trebuie să porniți înregistrarea din nou (ex. dacă trebuie
să reporniți sistemul) folosiți valori diferite pentru
<em class="replaceable"><code>etapă</code></em> pentru a indica ce etapă a actualizării
este înregistrată. Nu puneți fișierul script într-un director temporar cum
ar fi <code class="filename">/tmp</code> sau <code class="filename">/var/tmp</code> (fișiere
în aceste directoare ar putea fi șterse în timpul actualizării sau la o
repornire).
</p><p>
Fișierul script vă va permite, de asemenea, să consultați informația care a
defilat în afara ecranului. Dacă sunteți la consola sistemul puteți schimba
la VT2 (folosind <span class="keycap"><strong>Alt-F2</strong></span>) și, după ce vă
autentificați, utilizați <code class="literal">less -R
~root/actualizare-jessie.script</code> pentru a vedea fișierul.
</p><p>
După terminarea actualizării, puteți opri comanda <span class="command"><strong>script</strong></span>
tastând <code class="literal">exit</code> la prompt.
</p><p>
Dacă ați folosit opțiunea <span class="emphasis"><em>-t</em></span> a lui
<span class="command"><strong>script</strong></span> puteți folosi programul
<span class="command"><strong>scriptreplay</strong></span> pentru a reda întreaga sesiune:
</p><pre class="screen">
# scriptreplay ~/actualizare-jessie.time ~/actualizare-jessie.script
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating-lists"></a>4.4.2. Actualizarea listei de pachete</h3></div></div></div><p>
Mai întâi trebuie preluată lista pachetelor disponibile în noua
versiune. Aceasta se face cu:
</p><pre class="screen">
# apt-get update
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sufficient-space"></a>4.4.3. Verificați dacă aveți suficient spațiu pentru actualizare</h3></div></div></div><p>
Înainte de a începe actualizarea completă, așa cum este descrisă în <a class="xref" href="ch-upgrading.ro.html#upgrading-full" title="4.4.5. Actualizarea sistemului">Secțiune 4.4.5, „Actualizarea sistemului ”</a>, trebuie să vă asigurați că aveți suficient
spațiu pe disc. În primul rând, orice pachet necesar pentru instalare, care
este descărcat prin rețea este stocat în
<code class="filename">/var/cache/apt/archives</code> (și subdirectorul
<code class="filename">partial/</code> în timpul descărcării), deci trebuie să aveți
suficient spațiu pe sistemul de fișiere pe care se află
<code class="filename">/var/</code> pentru a descărca pachetele ce vor fi instalate
pe sistemul dumneavoastră. După descărcare veți avea nevoie de mai mult
spațiu pe alte partiții de sistem pentru a instala atât pachetele
actualizate (care e posibil să conțină binare mai mari sau mai multe date)
cât și pachetele noi care vor fi aduse pentru actualizare. Dacă sistemul
dumneavoastră nu are suficient spațiu este posibil să rămâneți cu o
actualizare incompletă. În această situație, recuperarea este foarte
dificilă.
</p><p>
<span class="command"><strong>apt-get</strong></span> vă poate arăta informații detaliate despre
spațiul necesar pentru instalare. Înainte să începeți actualizarea, puteți
vedea această estimare folosind comanda:
</p><pre class="screen">
# apt-get -o APT::Get::Trivial-Only=true dist-upgrade
[ ... ]
XXX actualizate, XXX noi instalate, XXX de îndepărtat și XXX neactualizate.
Trebuie descărcate xx.xMB de arhive. 
După această operațiune, AAAMB spațiu suplimentar va fi folosit.
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Notă]" src="images/note.png" /></td><th align="left">Notă</th></tr><tr><td align="left" valign="top"><p>
Rulând această comandă la începutul procedeului de actualizare ar putea
genera o eroare, din motive descrise în următoarele secțiuni. În acest caz
va trebui să așteptați până ați făcut o actualizare minimală conform <a class="xref" href="ch-upgrading.ro.html#minimal-upgrade" title="4.4.4. Actualizare minimală de sistem">Secțiune 4.4.4, „Actualizare minimală de sistem”</a> înainte de a rula această comandă pentru a
estima spațiul pe disc.
</p></td></tr></table></div><p>
Dacă nu aveți spațiu suficient pentru actualizare,
<span class="command"><strong>apt-get</strong></span> vă va avertiza cu un mesaj asemănător cu:
</p><pre class="screen">
E: Nu aveți spațiu suficient în /var/cache/apt/archives/.
</pre><p>În această situație eliberați spațiu înainte de actualizare. Aveți mai multe
opțiuni: 
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Ștergeți pachetele care au fost descărcate anterior pentru a fi instalate
(în <code class="filename">/var/cache/apt/archive</code>). Curățarea depozitului
temporar de pachete, cu comanda <span class="command"><strong>apt-get clean</strong></span> va șterge
toate fișierele descărcate anterior.
</p></li><li class="listitem"><p>
Îndepărtați pachete uitate. Dacă ați utilizat <span class="command"><strong>aptitude</strong></span>
sau <span class="command"><strong>apt-get</strong></span> pentru a instala manual pachete în
wheezy, acesta va reține faptul că au fost instalate manual și va
putea marca drept inutile pachetele care au fost instalate doar ca
dependențe și nu mai sunt necesare deoarece pachetele care aveau nevoie de
ele au fost șterse. În consecință nu va marca pentru ștergere pachetele pe
care le-ați instalat manual. Pentru a îndepărta pachetele instalate automat
și care nu mai sunt folosite, executați:
</p><pre class="screen">
# apt-get autoremove
</pre><p>
Puteți folosi și <span class="command"><strong>deborphan</strong></span>, <span class="command"><strong>debfoster</strong></span>
sau <span class="command"><strong>cruft</strong></span> pentru a găsi pachete inutile. Nu dezinstalați
pachetele prezentate de aceste unelte fără o examinare atentă, mai ales dacă
folosiți opțiunile agresive, neimplicite, care sunt susceptibile de a da
rezultate eronate cu privire la starea pachetelor. Este indicat să analizați
pachetele sugerate pentru dezinstalare (ex: conținutul, dimensiunea și
descrierea) înainte de a le dezinstala.
</p></li><li class="listitem"><p>
Îndepărtați pachete care ocupă prea mult loc și nu sunt necesare imediate
(le puteți instala din nou după actualizare). Dacă aveți instalat pachetul
<code class="systemitem">popularity-contest</code><a id="idp53221616" class="indexterm"></a>, puteți folosi
<span class="command"><strong>popcon-largest-unused</strong></span> pentru a afișa pachetele nefolosite
care ocupă cel mai mult spațiu. Puteți găsi pachetele care ocupă cel mai
mult spațiu cu <span class="command"><strong>dpigs</strong></span> (disponibil în pachetul <code class="systemitem">debian-goodies</code><a id="idp53225056" class="indexterm"></a>) sau cu  <span class="command"><strong>wajig</strong></span>
(rulând <code class="literal">wajig size</code>). Puteți folosi și <code class="systemitem">aptitude</code><a id="idp53228224" class="indexterm"></a>. Porniți <span class="command"><strong>aptitude</strong></span> în
<span class="quote">„<span class="quote">modul vizual</span>”</span>, alegeți
<span class="guimenu">Vizualizări</span> → <span class="guimenuitem">Listă nouă simplă de
pachete</span>
(<span class="guimenu">Views</span> → <span class="guimenuitem">New Flat Package
List</span> în varianta engleză), apăsați tasta
<span class="keycap"><strong>l</strong></span> și introduceți <code class="literal">~i</code>, apăsați
<span class="keycap"><strong>S</strong></span> și introduceți <code class="literal">~installsize</code> iar ca
rezultat veți obține o listă cu care veți putea lucra. 
</p></li><li class="listitem"><p>
  Din sistem se pot șterge fișierele de traducere și localizare, în caz că nu
mai sunt necesare. Se poate instala <code class="systemitem">localepurge</code><a id="idp53238528" class="indexterm"></a> și configura astfel încât doar
câteva din localizări să fie păstrate în sistem. Aceasta va reduce din
spațiul ocupat în <code class="filename">/usr/share/locale</code>.
</p></li><li class="listitem"><p>
   Mutați temporar pe un alt sistem sau ștergeți permanent fișierele jurnal de
sistem din <code class="filename">/var/log/</code>.
</p></li><li class="listitem"><p>
    Folosiți un <code class="filename">/var/cache/apt/archives</code> temporar: puteți
folosi un director pentru depozitul temporar de pe alt sistem de fișiere
(dispozitiv de stocare <acronym title="Universal Serial Bus">USB</acronym>, harddisk de împrumut, un alt
sistem de fișiere în utilizare, ...)
  </p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Notă]" src="images/note.png" /></td><th align="left">Notă</th></tr><tr><td align="left" valign="top"><p>
      Nu folosiți o partiție <acronym title="Network File System">NFS</acronym> deoarece conexiunea la rețea
ar putea fi întreruptă în timpul actualizării.
    </p></td></tr></table></div><p>
  De exemplu, dacă aveți un dispozitiv <acronym title="Universal Serial Bus">USB</acronym> montat la
<code class="filename">/media/usbkey</code>:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
	ștergeți pachetele care au fost descărcate anterior spre instalare:

	</p><pre class="screen"># apt-get clean</pre><p>
      </p></li><li class="listitem"><p>
	copiați directorul <code class="filename">/var/cache/apt/archives</code> pe
dispozitivul <acronym title="Universal Serial Bus">USB</acronym>:

	</p><pre class="screen"># cp -ax /var/cache/apt/archives /media/usbkey/</pre><p>
      </p></li><li class="listitem"><p>
	montați directorul pentru depozit temporar peste cel curent:

	</p><pre class="screen"># mount --bind /media/usbkey/archives /var/cache/apt/archives</pre><p>
      </p></li><li class="listitem"><p>
	după actualizare restaurați directorul
<code class="filename">/var/cache/apt/archives</code> original:

	</p><pre class="screen"># umount /media/usbkey/archives</pre><p>
      </p></li><li class="listitem"><p>
	ștergeți <code class="filename">/media/usbkey/archives</code> rămas.
      </p></li></ol></div><p>
  puteți crea directorul pentru depozit temporar pe orice sistem de fișiere
montat pe sistemul dumneavoastră.
  </p></li><li class="listitem"><p>
    Executați o actualizare minimală a sistemului (citiți <a class="xref" href="ch-upgrading.ro.html#minimal-upgrade" title="4.4.4. Actualizare minimală de sistem">Secțiune 4.4.4, „Actualizare minimală de sistem”</a>)  sau actualizări parțiale a sistemului urmată
de o actualizare completă. Acest lucru va face posibil să actualizați
sistemul parțial și vă va permite curățirea depozitului temporar de pachete
înainte de actualizarea completă.
  </p></li></ul></div><p>
Țineți cont că pentru a putea șterge pachete în siguranță se recomandă să
treceți <code class="filename">sources.list</code> înapoi la wheezy după
cum este descris în <a class="xref" href="ap-old-stuff.ro.html#old-sources" title="A.2. Verificarea listei de surse">Secțiune A.2, „Verificarea listei de surse”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="minimal-upgrade"></a>4.4.4. Actualizare minimală de sistem</h3></div></div></div><p>
În unele cazuri, dacă faceți direct o actualizare completă (așa cum e
descrisă mai jos), puteți șterge un număr mare de pachete pe care ați dori
să le păstrați. Așadar vă recomandăm o actualizare în doi pași, mai întâi o
actualizare minimală pentru a depăși conflictele, apoi o actualizare
completă așa cum este descrisă în  <a class="xref" href="ch-upgrading.ro.html#upgrading-full" title="4.4.5. Actualizarea sistemului">Secțiune 4.4.5, „Actualizarea sistemului ”</a>. 
</p><p>
Pentru a face acest lucru mai întâi rulați:
</p><pre class="screen">
# apt-get upgrade
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Notă]" src="images/note.png" /></td><th align="left">Notă</th></tr><tr><td align="left" valign="top"><p>
      Procesul de actualizare pentru unele versiuni precedente recomanda
utilizarea  <span class="command"><strong>aptitude</strong></span> pentru actualizare. Această unealtă
nu este recomandată pentru actualizări de la wheezy la
jessie.
    </p></td></tr></table></div><p>
Aceasta are ca efect actualizarea acelor pachete care pot fi actualizate
fără ca alte pachete să fie șterse sau instalate.
</p><p>
Actualizarea minimală a sistemului poate fi folositoare și atunci când
sistemul nu dispune de spațiu suficient și nu se poate face o actualizare
completă datorită constrângerilor de spațiu.
</p><p>
  Dacă pachetul <code class="systemitem">apt-listchanges</code><a id="idp53271120" class="indexterm"></a> este
instalat acesta va afișa informații importante despre pachetele actualizate
(în configurația implicită). După ce ați citit apăsați <span class="keycap"><strong>q</strong></span>
pentru a ieși din cititor și a continua actualizarea.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="upgrading-full"></a>4.4.5. Actualizarea sistemului </h3></div></div></div><p>
Odată executați pașii anteriori, sunteți gata să continuați cu partea
principală a actualizării. Executați:
</p><pre class="screen">
# apt-get dist-upgrade
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Notă]" src="images/note.png" /></td><th align="left">Notă</th></tr><tr><td align="left" valign="top"><p>
      Procesul de actualizare pentru unele versiuni precedente recomanda
utilizarea  <span class="command"><strong>aptitude</strong></span> pentru actualizare. Această unealtă
nu este recomandată pentru actualizări de la wheezy la
jessie.
    </p></td></tr></table></div><p>
Aceasta va efectua o actualizare completă a sistemului, instalând cele mai
noi versiuni disponibile ale tuturor pachetelor și va rezolva toate
posibilele schimbări de dependențe dintre pachetele din diferitele
versiuni. Dacă este necesar, va instala câteva pachete noi (de obicei,
versiuni de biblioteci mai noi sau pachete redenumite) și va elimina orice
pachete învechite care sunt în conflict.
</p><p>
Când actualizați de pe un set de CD-uri (sau DVD-uri), vi se va cere să
introduceți anumite CD-uri la diverse momente în timpul actualizării. S-ar
putea să trebuiască să introduceți de mai multe ori același CD, datorită
pachetelor interdependente dispersate pe mai multe CD-uri.
</p><p>
Pachetele deja instalate care nu pot fi înnoite la versiuni mai noi fără a
schimba statutul instalării altui pachet vor fi lăsate la versiunea curentă
(marcate ca <span class="quote">„<span class="quote">held back</span>”</span>). Acest lucru poate fi rezolvat prin
utilizarea comenzii <span class="command"><strong>aptitude</strong></span> și alegerea acestor pachete
pentru instalare sau prin rularea comenzii <code class="literal">apt-get install
<em class="replaceable"><code>pachet</code></em></code>.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="trouble"></a>4.5. Probleme posibile în timpul actualizării</h2></div></div></div><p>
Secțiunile următoare descriu probleme cunoscute care pot apărea pe timpul
procesului de actualizare la jessie.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="immediate-configure"></a>4.5.1. Dist-upgrade eșuează cu eroarea „Could not perform immediate configuration”</h3></div></div></div><p>
În anumite cazuri pasul <span class="command"><strong>apt-get dist-upgrade</strong></span> poate să
eșueze după descărcarea pachetelor cu:
</p><pre class="screen">
E: Could not perform immediate configuration on '<em class="replaceable"><code>package</code></em>'.  Please see man 5 apt.conf under APT::Immediate-Configure for details.
</pre><p>
</p><p>
Dacă se întâmplă acest lucru, rularea comenzii <span class="command"><strong>apt-get dist-upgrade
-o APT::Immediate-Configure=0</strong></span> ar putea permite continuarea
actualizării.
</p><p>
O altă posibilă ocolire a problemei ar fi să adăugați temporar surse pentru
wheezy și jessie în <code class="filename">sources.list</code> și să
rulați <span class="command"><strong>apt-get update</strong></span>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="expected-removals"></a>4.5.2. Programe îndepărtate</h3></div></div></div><p>
The upgrade process to jessie might ask for the removal of packages
on the system. The precise list of packages will vary depending on the set
of packages that you have installed.  These release notes give general
advice on these removals, but if in doubt, it is recommended that you
examine the package removals proposed by each method before proceeding.  For
more information about packages obsoleted in jessie, see <a class="xref" href="ch-upgrading.ro.html#obsolete" title="4.10. Pachete învechite">Secțiune 4.10, „Pachete învechite”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="conflicts-loops"></a>4.5.3. Conflicte sau cicluri de pre-dependențe </h3></div></div></div><p>
Uneori este necesar să activați opțiunea
<code class="literal">APT::Force-LoopBreak</code> în APT pentru a putea elimina
temporar un pachet esențial, datorită unei bucle
Conflict/Pre-Dependență. <span class="command"><strong>apt-get</strong></span> vă va avertiza în
legătură cu aceasta și va abandona actualizarea. Puteți ocoli această
situație precizând opțiunea <code class="literal">-o APT::Force-LoopBreak=1</code> în
linia de comandă a lui <span class="command"><strong>apt-get</strong></span>.
</p><p>
Este posibil ca structura dependențelor dintr-un sistem să fie coruptă
într-o asemenea măsură încât să necesite intervenție manuală. În mod
obișnuit aceasta înseamnă utilizarea <span class="command"><strong>apt-get</strong></span> sau
</p><pre class="screen">
# dpkg --remove <em class="replaceable"><code>nume_pachet</code></em>
</pre><p>
pentru a elimina pachetele problemă, sau
</p><pre class="screen">
# apt-get -f install
# dpkg --configure --pending
</pre><p>
În cazuri extreme s-ar putea să fie nevoie să forțați o reinstalare cu o
comandă cum ar fi
</p><pre class="screen">
# dpkg --install <em class="replaceable"><code>/cale/către/nume_pachet.deb</code></em>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="file-conflicts"></a>4.5.4. Conflict de fișiere</h3></div></div></div><p>
Dacă actualizați de la un sistem wheezy <span class="quote">„<span class="quote">pur</span>”</span> nu ar
trebui să apară conflicte de fișiere, însă acestea pot interveni dacă aveți
pachete neoficiale de tip backport. Un conflict de fișiere poate rezulta
într-o eroare de genul:
</p><pre class="screen">
Unpacking <em class="replaceable"><code>&lt;pachet-oarecare&gt;</code></em> (from <em class="replaceable"><code>&lt;fișier-pachet-oarecare&gt;</code></em>) ...
dpkg: error processing <em class="replaceable"><code>&lt;pachet-oarecare&gt;</code></em> (--install):
 trying to overwrite `<em class="replaceable"><code>&lt;ceva-fișier&gt;</code></em>',
 which is also in package <em class="replaceable"><code>&lt;alt-pachet&gt;</code></em>
dpkg-deb: subprocess paste killed by signal (Broken pipe)
 Errors were encountered while processing:
 <em class="replaceable"><code>&lt;pachet-oarecare&gt;</code></em>
</pre><p>
Puteți încerca să rezolvați un conflict de fișiere prin eliminarea forțată a
pachetelor menționate în <span class="emphasis"><em>ultima</em></span> linie a mesajului de
eroare:
</p><pre class="screen">
# dpkg -r --force-depends <em class="replaceable"><code>nume_pachet</code></em>
</pre><p>
După ce ați rezolvat problema, ar trebui să puteți continua actualizarea
prin repetarea comenzilor <span class="command"><strong>apt-get</strong></span> descrise mai sus.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-changes"></a>4.5.5. Modificări de configurare</h3></div></div></div><p>
În timpul actualizării este posibil să apară întrebări referitor la
configurarea sau re-configurarea mai multor pachete. Dacă sunteți întrebat
dacă un fișier din directorul <code class="filename">/etc/init.d</code>, sau fișierul
<code class="filename">/etc/manpath.config</code> ar trebui înlocuit cu versiunea
responsabilului de pachet, în general este necesar să răspundeți cu
<span class="quote">„<span class="quote">da</span>”</span> (<span class="quote">„<span class="quote">yes</span>”</span> în engleză) pentru a asigura
integritatea sistemului. Puteți oricând reveni la versiunile vechi, deoarece
acestea vor fi salvate cu extensia <code class="literal">.dpkg-old</code>.
</p><p>
Dacă nu știți sigur ce să faceți, scrieți numele pachetului sau fișierului
și amânați rezolvarea problemelor pentru mai târziu. Puteți căuta în
fișierul script informația afișată în timpul actualizării.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="console-change"></a>4.5.6. Schimbare a sesiunii la consolă</h3></div></div></div><p>
Dacă faceți actualizare folosind consola de sistem locală, veți observa că
la un moment dat în timpul actualizării consola va fi mutată într-o altă
vizualizare și procesul de actualizare nu va mai fi vizibil. Acest lucru se
poate întâmpla spre exemplu pe sisteme de birou când este repornit managerul
de display.
</p><p>
Pentru a recupera consola cu procesul de actualizare în derulare va trebui
să folosiți <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>
(dacă sunteți în mediul grafic) sau <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> (dacă
sunteți în modul text) pentru a vă întoarce la terminalul virtual
1. Înlocuiți F1 cu tasta funcțională cu același număr ca terminalul virtual
pe care se derulează procesul de actualizare. Puteți de asemenea să folosiți
<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>săgeată-stânga</strong></span>
sau <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>săgeată-dreapta</strong></span>
pentru a schimba între diferitele terminale în mod text.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="package-specific-issues"></a>4.5.7. Atenție deosebită la anumite pachete</h3></div></div></div><p>
În cele mai multe cazuri actualizarea pachetelor de la wheezy la
jessie ar trebui să se desfășoare fără probleme. Există un număr mic
de cazuri când este necesar să interveniți, fie înainte, fie în procesul de
actualizare. Acestea sunt detaliate mai jos în funcție de pachet.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="issues-systemd"></a>4.5.7.1. systemd</h4></div></div></div><p>
    The Debian upgrade from wheezy to jessie will by default
migrate your init system from the SysV to systemd.  Depending on your system
and setup, you may need to do some manual changes.  We have detailed known
issues in <a class="xref" href="ch-information.ro.html#systemd-upgrade-default-init-system" title="5.6. Upgrading installs the new default init system for Jessie">Secțiune 5.6, „Upgrading installs the new default init system for Jessie”</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="issues-lxc"></a>4.5.7.2. LXC</h4></div></div></div><p>
    If you have LXC installed, you may need special care when upgrading your
system and your containers.  Please have a look at <a class="xref" href="ch-information.ro.html#lxc-upgrade-issues" title="5.8. Upgrade considerations for LXC hosts and containers">Secțiune 5.8, „Upgrade considerations for LXC hosts and containers”</a> for known issues and solutions.
  </p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="newkernel"></a>4.6. Actualizarea nucleului și a pachetelor conexe</h2></div></div></div><p>
Această secțiune explică actualizarea nucleului și identifică potențialele
probleme legate de aceasta. Puteți instala unul din pachetele <code class="systemitem">linux-image-*</code><a id="idp53340960" class="indexterm"></a> oferite de Debian sau să compilați
un nucleul personalizat din surse.
</p><p>
O mare parte din informația expusă în această secțiune se bazează pe
presupunerea că veți folosi un nucleu modular din Debian împreună cu
<code class="systemitem">initramfs-tools</code><a id="idp53343488" class="indexterm"></a> și <code class="systemitem">udev</code><a id="idp53345184" class="indexterm"></a>. Dacă ați ales să folosiți un nucleu ce nu
necesită initrd sau este folosit un alt generator initrd, atunci o parte din
aceste informații ar putea să nu fie de interes.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="kernel-metapackage"></a>4.6.1. Installing a kernel metapackage</h3></div></div></div><p>
When you dist-upgrade from wheezy to jessie, it is strongly
recommended that you install a linux-image-* metapackage, if you have not
done so before.  These metapackages will automatically pull in a newer
version of the kernel during upgrades.  You can verify whether you have one
installed by running:
</p><pre class="screen">
# dpkg -l "linux-image*" | grep ^ii | grep -i meta
</pre><p>
If you do not see any output, then you will either need to install a new
linux-image package by hand or install a linux-image metapackage.  To see a
list of available linux-image metapackages, run:
</p><pre class="screen">
# apt-cache search linux-image- | grep -i meta | grep -v transition
</pre><p>
If you are unsure about which package to select, run <code class="literal">uname
-r</code> and look for a package with a similar name.  For example, if
you see '<code class="literal">2.6.32-5-amd64</code>', it is recommended that you
install <code class="systemitem">linux-image-amd64</code><a id="idp53352880" class="indexterm"></a>.  You may
also use <span class="command"><strong>apt-cache</strong></span> to see a long description of each
package in order to help choose the best one available.  For example:
</p><pre class="screen">
# apt-cache show linux-image-amd64
</pre><p>
You should then use <code class="literal">apt-get install</code> to install it.  Once
this new kernel is installed you should reboot at the next available
opportunity to get the benefits provided by the new kernel version.
However, please have a look at <a class="xref" href="ch-upgrading.ro.html#nownownow" title="4.7. Lucruri de făcut înainte de repornire">Secțiune 4.7, „Lucruri de făcut înainte de repornire”</a> before
performing the first reboot after the upgrade.
</p><p>
Pentru cei mai îndrăzneți există un mod mai ușor să compilați propriul
nucleu folosind Debian. Instalați sursele nucleului oferite de pachetul
<code class="systemitem">linux-source</code><a id="idp53358704" class="indexterm"></a>. Puteți folosi ținta
<code class="literal">deb-pkg</code> disponibilă în fișierul „makefile” ce vine cu
sursele pentru a construi fișierele binare. Mai multe informații pot fi
găsite în manualul <a class="ulink" href="http://kernel-handbook.alioth.debian.org/" target="_top">Debian Linux Kernel
Handbook</a>, care este disponibil și sub forma pachetului <code class="systemitem">debian-kernel-handbook</code><a id="idp53362288" class="indexterm"></a>.
</p><p>
Dacă este posibil, ar fi spre avantajul dumneavoastră să înnoiți pachetul cu
nucleul separat de procedura de <code class="literal">dist-upgrade</code> pentru a
reduce șansele de a avea temporar probleme la inițializarea sistemului. A se
reține că aceasta ar trebui să se facă doar după înnoirea minimală descrisă
în <a class="xref" href="ch-upgrading.ro.html#minimal-upgrade" title="4.4.4. Actualizare minimală de sistem">Secțiune 4.4.4, „Actualizare minimală de sistem”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="initramfs-tools-issues"></a>4.6.2. Changes to root and <code class="filename">/usr</code> filesystem mounting and
checking</h3></div></div></div><p>
    <code class="systemitem">initramfs-tools</code><a id="idp53368352" class="indexterm"></a> will now also run
<code class="literal">fsck</code> on the root filesystem before mounting it.  If the
chosen init program is <code class="literal">systemd</code> and there is a separate
<code class="filename">/usr</code> filesystem, it will also fsck and mount
<code class="filename">/usr</code>.
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	If <code class="filename">/usr</code> is a separate filesystem on a RAID device and
the <code class="literal">INITRDSTART</code> setting in
<code class="filename">/etc/default/mdadm</code> is not '<code class="literal">all</code>', you
will need to change it to include that device.
      </p></li><li class="listitem"><p>
	If <code class="filename">/usr</code> is a separate filesystem on an LVM logical
volume, and the line for <code class="filename">/usr</code> in
<code class="filename">/etc/fstab</code> specifies the device by
<code class="literal">UUID</code> or <code class="literal">LABEL</code>, you must change this
line to specify the device using the format
<code class="filename">/dev/mapper/<em class="replaceable"><code>VG</code></em>-<em class="replaceable"><code>LV</code></em></code>
or
<code class="filename">/dev/<em class="replaceable"><code>VG</code></em>/<em class="replaceable"><code>LV</code></em></code>.
      </p></li><li class="listitem"><p>
	It is no longer possible to bind-mount the <code class="filename">/usr</code>
filesystem.
      </p></li><li class="listitem"><p>
	If the RTC (real time clock) is set to local time and the local time is
ahead of UTC, <code class="literal">e2fsck</code> will print a warning during boot
about the time changing backward (<a class="ulink" href="https://bugs.debian.org/767040" target="_top">bug #767040</a>).  You can disable
this by putting the following lines in
<code class="filename">/etc/e2fsck.conf</code>:
      </p><pre class="screen">
[options]
broken_system_clock=1
</pre></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="nownownow"></a>4.7. Lucruri de făcut înainte de repornire</h2></div></div></div><p>
După ce <code class="literal">apt-get dist-upgrade</code> a terminat, înseamnă că
actualizarea <span class="quote">„<span class="quote">formală</span>”</span> s-a terminat, dar există alte lucruri
care trebuie făcute <span class="emphasis"><em>înainte</em></span> să reporniți sistemul.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
      When upgrading from Wheezy to Jessie, it can be a good idea
to purge old packages <span class="emphasis"><em>before</em></span> the first reboot.  In
particular, obsolete init scripts may cause issues.  Please see <a class="xref" href="ch-upgrading.ro.html#purge-removed-packages" title="4.8.1. Purging removed packages">Secțiune 4.8.1, „Purging removed packages”</a> for details on finding and purging
removed packages.
    </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="for-next"></a>4.8. Pregătirile pentru următoarea versiune</h2></div></div></div><p>
După actualizare sunt mai multe lucruri pe care le puteți face pentru a
pregăti următoarea lansare.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Remove newly redundant or obsolete packages as described in <a class="xref" href="ch-upgrading.ro.html#sufficient-space" title="4.4.3. Verificați dacă aveți suficient spațiu pentru actualizare">Secțiune 4.4.3, „Verificați dacă aveți suficient spațiu pentru actualizare”</a> and <a class="xref" href="ch-upgrading.ro.html#obsolete" title="4.10. Pachete învechite">Secțiune 4.10, „Pachete învechite”</a>.  You should
review which configuration files they use and consider purging the packages
to remove their configuration files.  See also <a class="xref" href="ch-upgrading.ro.html#purge-removed-packages" title="4.8.1. Purging removed packages">Secțiune 4.8.1, „Purging removed packages”</a>.
</p></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="purge-removed-packages"></a>4.8.1. Purging removed packages</h3></div></div></div><p>
    It is generally advisable to purge removed packages.  This is especially
true if these have been removed in an earlier release upgrade (e.g. from the
upgrade to wheezy) or they were provided by third-party vendors.
In particular, old init.d scripts have been known to cause issues.
  </p><div class="caution"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Atenție]" src="images/caution.png" /></td><th align="left">Atenție</th></tr><tr><td align="left" valign="top"><p>
      Purging a package will generally also purge its log files, so you might want
to back them up first.
    </p></td></tr></table></div><p>
    The following command displays a list of all removed packages that may have
configuration files left on the system (if any):
  </p><pre class="screen">
# dpkg -l | awk '/^rc/ { print $2 }'
</pre><p>
    The packages can be removed by using <span class="command"><strong>apt-get purge</strong></span>.
Assuming you want to purge all of them in one go, you can use the following
command:
  </p><pre class="screen">
# apt-get purge $(dpkg -l | awk '/^rc/ { print $2 }')
</pre><p>
    If you use <code class="systemitem">aptitude</code><a id="idp53410752" class="indexterm"></a>, you can also
use the following alternative to the commands above:
  </p><pre class="screen">
$ aptitude search '~c'
$ aptitude purge '~c'
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="deprecated"></a>4.9. Componente depășite</h2></div></div></div><p>
Odată cu următoarea lansare Debian 9 (numită
stretch) unele caracteristici vor fi învechite. Utilizatorii vor
trebui să migreze către alternative pentru a preveni apariția problemelor la
actualizare la 9.
</p><p>
Acestea includ următoarele caracteristici:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The <code class="systemitem">hardening-wrapper</code><a id="idp53416704" class="indexterm"></a> package is
deprecated and is expected to be removed in Stretch.
		</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="obsolete"></a>4.10. Pachete învechite</h2></div></div></div><p>
Introducing lot of new packages, jessie also retires and omits quite
some old packages that were in wheezy.  It provides no upgrade
path for these obsolete packages.  While nothing prevents you from
continuing to use an obsolete package where desired, the Debian project will
usually discontinue security support for it a year after jessie's
release<a href="#ftn.idp53419712" class="footnote" id="idp53419712"><sup class="footnote">[5]</sup></a>, and will not normally provide
other support in the meantime.  Replacing them with available alternatives,
if any, is recommended.
</p><p>
Există multe motive pentru care pachetele pot fi eliminate din distribuție:
nu mai sunt întreținute de către autorii originari, nu mai există un
dezvoltator Debian interesat de întreținerea pachetelor, funcționalitatea
oferită a fost înlocuită de alt software (sau o nouă versiune), sau nu mai
sunt considerate a fi potrivite pentru jessie datorită problemelor
avute. În cazul din urmă, pachetele ar putea fi încă prezente în distribuția
<span class="quote">„<span class="quote">instabil</span>”</span>.
</p><p>
Detectarea pachetelor <span class="quote">„<span class="quote">învechite</span>”</span> într-un sistem actualizat
este ușoară, deoarece vor fi marcate ca atare în interfețele de administrare
a pachetelor. Dacă folosiți <span class="command"><strong>aptitude</strong></span>, veți observa o
listă a acestor pachete în secțiunea <span class="quote">„<span class="quote">Pachete învechite și pachete
create local</span>”</span>.
</p><p>
<a class="ulink" href="https://bugs.debian.org/" target="_top">Sistemul Debian de raportare a problemelor (Debian
Bug Tracking System)</a> oferă deseori informații suplimentare despre
motivele pentru care un pachet a fost eliminat. Ar trebui să analizați atât
arhiva problemelor pentru pachetul în sine, cât și pentru <a class="ulink" href="https://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=ftp.debian.org&amp;archive=yes" target="_top">pseudo-pachetul
ftp.debian.org</a>.
</p><p>
  Lista pachetelor depășite include:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	<code class="systemitem">postgresql-9.1</code><a id="idp53429040" class="indexterm"></a>, successor is
<code class="systemitem">postgresql-9.4</code><a id="idp53430736" class="indexterm"></a>.  Once the operating
system upgrade is finished, you should plan to also upgrade your PostgreSQL
9.1 database clusters to the new PostgreSQL version 9.4 using the
<span class="command"><strong>pg_upgradecluster</strong></span> tool.  For users of the PL/perl
procedural language, jessie provides an updated <code class="systemitem">postgresql-plperl-9.1</code><a id="idp53433360" class="indexterm"></a> package linked against
jessie's version of libperl in order to enable upgrading to the new perl
version in jessie while keeping the old PL/perl database functions usable
until the database is upgraded as well.
      </p></li><li class="listitem"><p>
        
        
<code class="systemitem">python3.2</code><a id="idp53436032" class="indexterm"></a>, successor is <code class="systemitem">python3.4</code><a id="idp53437728" class="indexterm"></a>. (Version 2.7 is supported in both
wheezy and jessie.)
      </p></li><li class="listitem"><p>
        <code class="systemitem">ruby1.8</code><a id="idp53440240" class="indexterm"></a> and <code class="systemitem">ruby1.9.1</code><a id="idp53441936" class="indexterm"></a>; successor is <code class="systemitem">ruby2.1</code><a id="idp53443632" class="indexterm"></a>.  Please install the package <code class="systemitem">ruby</code><a id="idp53445344" class="indexterm"></a> to automatically track the current ruby
version.
      </p></li><li class="listitem"><p>
        <code class="systemitem">mplayer</code><a id="idp53447856" class="indexterm"></a>; alternatives are
<code class="systemitem">mplayer2</code><a id="idp53449552" class="indexterm"></a>, and <code class="systemitem">mpv</code><a id="idp53451216" class="indexterm"></a> (new in jessie).  Whilst the former
is mostly compatible with mplayer in terms of command-line arguments and
configuration (and adds a few new features too), the latter adds a lot of
new features and improvements, and it is actively maintained upstream.
      </p></li><li class="listitem"><p>
        <code class="systemitem">openoffice.org</code><a id="idp53453888" class="indexterm"></a>; please use
<code class="systemitem">libreoffice</code><a id="idp53455584" class="indexterm"></a>.
      </p></li><li class="listitem"><p>
        <code class="systemitem">squid</code><a id="idp53458048" class="indexterm"></a>, successor is <code class="systemitem">squid3</code><a id="idp53459744" class="indexterm"></a>.
      </p></li><li class="listitem"><p>
        <code class="systemitem">libjpeg-progs</code><a id="idp53462208" class="indexterm"></a>, successor is
<code class="systemitem">libjpeg-turbo-progs</code><a id="idp53463904" class="indexterm"></a>.
      </p></li><li class="listitem"><p>
        <code class="systemitem">openjdk-6-*</code><a id="idp53466368" class="indexterm"></a>, successor is
<code class="systemitem">openjdk-7-*</code><a id="idp53468064" class="indexterm"></a>.
      </p></li></ul></div><p>
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dummy"></a>4.10.1. Pachetele marionetă</h3></div></div></div><p>
Anumite pachete din wheezy au fost împărțite în mai multe pachete
în jessie, deseori pentru a îmbunătăți mentenabilitatea
sistemului. Pentru a ușura actualizarea în aceste cazuri, jessie
oferă pachete <span class="quote">„<span class="quote">marionetă</span>”</span>: pachete goale care au același nume
ca versiunea din wheezy cu dependențe ce cauzează instalarea
pachetelor noi. Aceste pachete <span class="quote">„<span class="quote">marionetă</span>”</span> sunt considerate
învechite și după actualizare pot fi dezinstalate fără probleme.
</p><p>
Cele mai multe (însă nu toate) descrieri ale pachetelor marionetă indică
scopul lor. Descrierile pachetelor marionetă nu sunt uniforme, totuși puteți
folosi <span class="command"><strong>deborphan</strong></span> cu opțiunile
<code class="literal">--guess-<em class="replaceable"><code>*</code></em></code> (de
ex. <code class="literal">--guess-dummy</code>) pentru a le detecta în sistemul
dumneavoastră. Notați faptul că anumite pachete marionetă nu sunt destinate
dezinstalării după actualizare, ci sunt utilizate pentru a urmări în timp
versiunea curentă a unui program.
</p></div></div><div class="footnotes"><br /><hr width="100" align="left" /><div id="ftn.idp53005968" class="footnote"><p><a href="#idp53005968" class="para"><sup class="para">[1] </sup></a>Dacă prioritatea debconf este stabilită la un nivel foarte ridicat puteți
preveni întrebările de configurare, dar serviciile care depind de opțiuni de
configurare implicite ce nu se potrivesc sistemului dumneavoastră nu vor
porni.</p></div><div id="ftn.idp53007664" class="footnote"><p><a href="#idp53007664" class="para"><sup class="para">[2] </sup></a>Spre exemplu: serviciile DNS sau DHCP, îndeosebi când nu există redundanță
sau soluție de rezervă. În cazul DHCP utilizatorii pot fi deconectați de la
rețea dacă timpul de deținere a adresei este mai mic decât timpul necesar
procesului de înnoire.</p></div><div id="ftn.idp53023040" class="footnote"><p><a href="#idp53023040" class="para"><sup class="para">[3] </sup></a> Această facilitate poate fi dezactivată prin adăugarea parametrului
<code class="literal">panic=0</code> la parametrii de inițializare.  </p></div><div id="ftn.idp53107808" class="footnote"><p><a href="#idp53107808" class="para"><sup class="para">[4] </sup></a> Sistemul de management al pachetelor din Debian nu permite, în mod normal,
unui pachet să șteargă sau să înlocuiască un fișier deținut de alt pachet,
decât dacă a fost definit ca înlocuitor pentru acel pachet.  </p></div><div id="ftn.idp53419712" class="footnote"><p><a href="#idp53419712" class="para"><sup class="para">[5] </sup></a> Sau atât timp cât nu este o altă lansare în acel interval de timp. În mod
obișnuit sunt doar două versiuni stabile suportate în același timp.  </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch-installing.ro.html"><img src="images/prev.png" alt="Înapoi" /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch-information.ro.html"><img src="images/next.png" alt="Înainte" /></a></td></tr><tr><td width="40%" align="left" valign="top">Cap. 3. Sistemul de instalare </td><td width="20%" align="center"><a accesskey="h" href="index.ro.html"><img src="images/home.png" alt="Acasă" /></a></td><td width="40%" align="right" valign="top"> Cap. 5. Probleme în jessie de care ar trebui să știți</td></tr></table></div></body></html>
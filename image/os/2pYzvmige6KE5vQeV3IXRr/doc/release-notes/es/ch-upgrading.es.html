<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Capítulo 4. Actualizaciones desde Debian 7 (wheezy)</title><link rel="stylesheet" type="text/css" href="debian.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.es.html" title="Notas de publicación de Debian 8 (jessie), 64-bit PC" /><link rel="up" href="index.es.html" title="Notas de publicación de Debian 8 (jessie), 64-bit PC" /><link rel="prev" href="ch-installing.es.html" title="Capítulo 3. Sistema de instalación" /><link rel="next" href="ch-information.es.html" title="Capítulo 5. Problemas que debe tener en cuenta para jessie" /><meta xmlns="" name="viewport" content="width=device-width, initial-scale=1" /><style xmlns="" type="text/css">
      body {
        background-repeat: no-repeat;
        background-image: none;
      }
    </style></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 4. Actualizaciones desde Debian 7 (wheezy)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch-installing.es.html"><img src="images/prev.png" alt="Anterior" /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch-information.es.html"><img src="images/next.png" alt="Siguiente" /></a></td></tr></table><hr /></div><div xml:lang="es" class="chapter" lang="es"><div class="titlepage"><div><div><h1 class="title"><a id="ch-upgrading"></a>Capítulo 4. Actualizaciones desde Debian 7 (wheezy)</h1></div></div></div><div class="toc"><p><strong>Tabla de contenidos</strong></p><dl class="toc"><dt><span class="section"><a href="ch-upgrading.es.html#backup">4.1. Prepararse para la actualización</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.es.html#data-backup">4.1.1. Haga copias de seguridad de sus datos e información de configuración</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#inform-users">4.1.2. Informar a los usuarios anticipadamente</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#services-downtime">4.1.3. Prepararse para la indisponibilidad de servicios</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#recovery">4.1.4. Prepararse para la recuperación</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#upgrade-preparations">4.1.5. Preparar un entorno seguro para la actualización</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.es.html#system-status">4.2. Comprobar el estado del sistema</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.es.html#review-actions">4.2.1. Revisar las acciones pendientes en el gestor de paquetes</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#disable-apt-pinning">4.2.2. Desactivar el bloqueo de APT</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#package-status">4.2.3. Verificar el estado de los paquetes</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#proposed-updates">4.2.4. La sección <span class="quote">“<span class="quote">proposed-updates</span>”</span></a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#unofficial-sources">4.2.5. Fuentes no oficiales</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.es.html#upgrade-process">4.3. Preparar las fuentes para APT</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.es.html#network">4.3.1. Añadir fuentes en Internet para APT</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#localmirror">4.3.2. Añadir las réplicas locales para APT</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#cdroms">4.3.3. Añadir fuentes para APT de medios ópticos</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.es.html#upgradingpackages">4.4. Actualizar los paquetes</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.es.html#record-session">4.4.1. Grabar la sesión</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#updating-lists">4.4.2. Actualizar las listas de paquetes</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#sufficient-space">4.4.3. Asegúrese de que tiene suficiente espacio libre para actualizar</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#minimal-upgrade">4.4.4. Actualización mínima del sistema</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#upgrading-full">4.4.5. Actualizar el sistema</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.es.html#trouble">4.5. Posibles problemas durante o después de la actualización</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.es.html#immediate-configure">4.5.1. Dist-upgrade falla con «No se pudo realizar la configuración inmediata»</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#expected-removals">4.5.2. Eliminaciones esperadas</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#conflicts-loops">4.5.3. Bucles en Conflictos o Pre-Dependencias</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#file-conflicts">4.5.4. Conflictos de archivo</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#configuration-changes">4.5.5. Cambios de configuración</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#console-change">4.5.6. Cambio de la sesión en consola</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#package-specific-issues">4.5.7. Precauciones especiales con paquetes específicos</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.es.html#newkernel">4.6. Actualización de su núcleo y paquetes relacionados</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.es.html#kernel-metapackage">4.6.1. Instalación de un metapaquete del núcleo</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#initramfs-tools-issues">4.6.2. Cambios al montaje y comprobaciones del sistema de ficheros raíz y
<code class="filename">/usr</code></a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.es.html#nownownow">4.7. Qué hacer antes del siguiente reinicio</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#for-next">4.8. Prepararse para la siguiente distribución</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.es.html#purge-removed-packages">4.8.1. Purgando los paquetes eliminados</a></span></dt></dl></dd><dt><span class="section"><a href="ch-upgrading.es.html#deprecated">4.9. Componentes descontinuados</a></span></dt><dt><span class="section"><a href="ch-upgrading.es.html#obsolete">4.10. Paquetes obsoletos</a></span></dt><dd><dl><dt><span class="section"><a href="ch-upgrading.es.html#dummy">4.10.1. Paquetes «dummy»</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="backup"></a>4.1. Prepararse para la actualización</h2></div></div></div><p>
Le sugerimos que antes de actualizar lea también la información en <a class="xref" href="ch-information.es.html" title="Capítulo 5. Problemas que debe tener en cuenta para jessie">Capítulo 5, <em>Problemas que debe tener en cuenta para jessie</em></a>. Ese capítulo cubre problemas que se pueden dar y
que no están directamente relacionados con el proceso de actualización, pero
que aún así podría ser importante conocer antes de empezar.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="data-backup"></a>4.1.1. Haga copias de seguridad de sus datos e información de configuración</h3></div></div></div><p>
Es muy recomendable realizar una copia de seguridad completa o al menos una
de los datos o información de configuración que no pueda permitirse perder
antes de actualizar su sistema. Las herramientas y el proceso de
actualización son bastante fiables, pero un fallo de hardware a mitad de una
actualización podría resultar en un sistema muy dañado.
</p><p>
Los elementos principales que debería querer salvaguardar son los contenidos
de <code class="filename">/etc</code>, <code class="filename">/var/lib/dpkg</code>,
<code class="filename">/var/lib/apt/extended_states</code> y la salida de
«<code class="literal">dpkg --get-selections "*"</code>» (las comillas son
importantes). Si utiliza <span class="command"><strong>aptitude</strong></span> para gestionar los
paquetes en su sistema, también querrá hacer una copia de seguridad de
<code class="filename">/var/lib/aptitude/pkgstates</code>.
</p><p>
El proceso de actualización no modifica nada dentro del directorio
<code class="filename">/home</code>. Algunas aplicaciones (como es el caso de algunas
partes del conjunto de aplicaciones Mozilla y el de los entornos de
escritorio de KDE y GNOME) sí sobreescribirán la configuración del usuario
con los nuevos valores por omisión cuando el usuario arranque una nueva
versión de la aplicación. Como medida preventiva quizás desee realizar una
copia de seguridad de los directorios y archivos ocultos («dotfiles»,
archivos que comienzan por punto, N. del T.) en los directorios personales
de los usuarios. Esta copia de seguridad le será útil para restaurar o
recrear la configuración previa a la actualización. Quizás quiera también
avisar a los usuarios de este asunto.
</p><p>
Cualquier operación de instalación de paquetes debe ser ejecutada con
privilegios de superusuario, bien accediendo al sistema como
<code class="literal">root</code> o usando los programas <span class="command"><strong>su</strong></span> o
<span class="command"><strong>sudo</strong></span> para obtener los derechos de acceso necesarios.
</p><p>
La actualización tiene unas cuantas condiciones previas, así que debería
revisarlas antes de ponerse a ello.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="inform-users"></a>4.1.2. Informar a los usuarios anticipadamente</h3></div></div></div><p>
Es aconsejable informar a los usuarios con antelación de cualquier
actualización que esté planeando realizar, aunque los usuarios que accedan
al sistema mediante <span class="command"><strong>ssh</strong></span> no deberían apenas notar nada
durante la actualización, y deberían poder seguir trabajando. 
</p><p>
Si desea tomar precauciones adicionales, haga una copia de seguridad, o
desmonte la partición <code class="filename">/home</code> antes de actualizar.
</p><p>
Tendrá que hacer una actualización del núcleo cuando se actualice a
jessie, por lo que será necesario reiniciar el sistema. Esto se
realizará habitualmente una vez la actualización haya terminado.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="services-downtime"></a>4.1.3. Prepararse para la indisponibilidad de servicios</h3></div></div></div><p>
Es posible que existan servicios ofrecidos por el sistema que están
asociados a paquetes incluidos en el proceso de instalación. Si esto sucede,
ha de tener en cuenta que los servicios se interrumpirán mientras los
paquete asociados se están actualizando o están siendo reemplazados y
configurados. El servicio no estará disponible durante este tiempo.
</p><p>
El tiempo exacto de indisponibilidad para estos servicios dependerá del
número de paquetes que se están actualizando en el sistema, y también
incluye el tiempo que el administrador dedica a responder a las preguntas de
configuración de las distintas actualizaciones de paquetes (si las
hubiera). Tenga en cuenta que si el proceso de actualización se hace de
forma desatendida y el sistema realiza alguna pregunta durante éste hay una
alta probabilidad de que los servicios no estén disponibles <a href="#ftn.idp41677520" class="footnote" id="idp41677520"><sup class="footnote">[1]</sup></a> durante un periodo de tiempo significativo.
</p><p>
Si el sistema que está vd. actualizando ofrece servicios críticos para sus
usuarios o para la red <a href="#ftn.idp41679216" class="footnote" id="idp41679216"><sup class="footnote">[2]</sup></a>, Vd. puede
reducir el tiempo de disponibilidad si realiza una actualización mínima del
sistema como se describe en <a class="xref" href="ch-upgrading.es.html#minimal-upgrade" title="4.4.4. Actualización mínima del sistema">Sección 4.4.4, “Actualización mínima del sistema”</a>, seguido de
una actualización del núcleo y un reinicio, y después una actualización de
los paquetes asociados con sus servicios críticos. Actualice estos paquetes
antes de hacer la actualización completo como se describe en <a class="xref" href="ch-upgrading.es.html#upgrading-full" title="4.4.5. Actualizar el sistema">Sección 4.4.5, “Actualizar el sistema”</a>.  De esta forma puede asegurarse que estos
servicios críticos están ejecutándose y disponibles durante todo el proceso
de actualización, reduciendo su indisponibilidad.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="recovery"></a>4.1.4. Prepararse para la recuperación</h3></div></div></div><p>
Aunque Debian intenta garantizar que el sistema es arrancable en todo
momento, siempre hay una posibilidad de que  experimente problemas al
reiniciar el sistema tras la instalación. Muchos de los problemas conocidos
se describen tanto en este capítulo como en los siguientes de estas notas de
publicación.
</p><p>
Por esta misma razón tiene sentido asegurarse de que es capaz de recuperar
el sistema en el caso que éste no pudiera reiniciarse o, para aquellos
sistemas gestionados de forma remota, no pudiera arrancar correctamente la
configuración de red.
</p><p>
Si está actualizando de forma remota a través de un enlace con
<span class="command"><strong>ssh</strong></span> es altamente recomendable que tome las debidas
precauciones para poder acceder al servidor a través de un terminal serie
remoto. Existe la posibilidad de que tras actualizar el núcleo y reiniciar
tenga que arreglar la configuración del sistema a través de una consola
remota. Igualmente, es posible que tenga que recuperar con una consola local
en caso de que el sistema se reinicie accidentalmente a la mitad de la
actualización.
</p><p>
Generalmente recomendamos la utlización del <span class="emphasis"><em>modo de
rescate</em></span> del Instalador de Debian de jessie. La ventaja en
el caso de utilizar el instalador es que podrá encontrar, de entre los
distintos métodos de instalación, el más apropiado para su situación. Si
desea más información, consulte la sección <span class="quote">“<span class="quote">Recuperar un sistema
roto</span>”</span> en el capítulo octavo de la <a class="ulink" href="https://www.debian.org/releases/jessie/installmanual" target="_top">Guía de instalación</a> y las <a class="ulink" href="http://wiki.debian.org/DebianInstaller/FAQ" target="_top">PUF del Instalador de
Debian</a>.
</p><p>
Necesitará un mecanismo alternativo para arrancar su sistema y poder acceder
al mismo y repararlo si esto falla. Una opción es utilizar una imagen
especial de rescate o un CD «vivo» de Linux («live CD», N. del T.). Una vez
haya arrancado con cualquiera de éstos debería poder montar su sistema de
archivos raíz y utilizar <code class="literal">chroot</code> para acceder a éste,
investigar y solucionar el problema.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="recovery-initrd"></a>4.1.4.1. Intérprete de línea de órdenes de depuración durante el arranque con initrd</h4></div></div></div><p>
El paquete <code class="systemitem">initramfs-tools</code><a id="idp41694816" class="indexterm"></a> incluye
un intérprete de órdenes de depuración<a href="#ftn.idp41695696" class="footnote" id="idp41695696"><sup class="footnote">[3]</sup></a>
en los «initrds» que genera. Por ejemplo, si el initrd es incapaz de montar
su sistema de archivos raíz vd. accederá a este sistema de depuración. En
este sistema podrá utilizar algunas órdenes básicas que pueden ayudarle a
trazar el problema y quizás incluso arreglarlo.
</p><p>
Algunas de las cosas básicas a comprobar son: la existencia de los archivos
de dispositivos correctos en <code class="filename">/dev</code>, los módulos cargados
(<code class="literal">cat /proc/modules</code>), y la salida de
<span class="command"><strong>dmesg</strong></span> para ver si se producen errores al cargar los
controladores de dispositivos. La salida de <span class="command"><strong>dmesg</strong></span> también
muestra qué archivos de dispositivos se han asignado a qué discos, debería
comparar esa información con la salida de <code class="literal">echo $ROOT</code> para
asegurarse que el sistema de archivos está en el dispositivo que esperaba.
</p><p>
En el caso de que arregle el problema puede escribir <code class="literal">exit</code>
para salir del entorno de depuración y continuar el proceso de arranque a
partir del punto que falló. Por supuesto, tendrá que arreglar el problema
subyacente y regenerar el «initrd» para que no vuelva a fallar en el
siguiente arranque.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="recovery-shell-systemd"></a>4.1.4.2. Intérprete de línea de órdenes de depuración durante el arranque con systemd</h4></div></div></div><p>
    En el caso de que falle el arranque con systemd, aún es posible obtener una
interfaz de línea de órdenes para depuración como «root» cambiando la línea
de órdenes del núcleo. Si el arranque básico funciona, pero algunos
servicios no llegan a iniciarse, puede ser útil añadir a los parámetros del
núcleo la opción <code class="literal">systemd.unit=rescue.target</code>.
  </p><p>
    En cualquier otro caso, el parámetro del núcleo
<code class="literal">systemd.unit=emergency.target</code> le proporcionará un
intérprete de órdenes como usuario «root» en el primer momento en que sea
posible. Sin embargo, ésto se hace antes de que el sistema de archivos raíz
se monte con permisos de lectura y escritura. Puede hacerlo manualmente con:
  </p><pre class="screen">
mount -o remount,rw /
</pre><p>
    Puede encontrar más información de la depuración de un sistema de arranque
con problemas bajo systemd en el artículo <a class="ulink" href="http://freedesktop.org/wiki/Software/systemd/Debugging/" target="_top">Diagnosticando
problemas de arranque</a>.
  </p><p>
    Puede que sea capaz de arrancar con el antiguo sistema sysvinit si todo lo
demás falla. Para poder hacerlo es necesario que aún esté instalado el
paquete <code class="systemitem">sysvinit</code><a id="idp41711856" class="indexterm"></a> y que el binario
<code class="filename">/lib/sysvinit/init</code> esté incluido en su archivo
initramfs. Si se cumplen estos requisitos, podrá arrancar con el binario de
sysvinit utilizando el siguiente parámetro en la línea de órdenes del
núcleo: <code class="literal">init=/lib/sysvinit/init</code>.
  </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="upgrade-preparations"></a>4.1.5. Preparar un entorno seguro para la actualización</h3></div></div></div><p>
La actualización de la distribución debería hacerse de forma local, frente a
una consola virtual en modo texto (o conectado de forma directa mediante un
terminal por puerto serie), o de forma remota mediante una conexión
<span class="command"><strong>ssh</strong></span>. 
</p><div class="important"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Importante]" src="images/important.png" /></td><th align="left">Importante</th></tr><tr><td align="left" valign="top"><p>
  Si está utilizando algún tipo de servicio de VPN (como pueda ser <code class="systemitem">tinc</code><a id="idp41718576" class="indexterm"></a>) puede que éstos no están disponibles
durante el proceso de actualización. Para más información consulte <a class="xref" href="ch-upgrading.es.html#services-downtime" title="4.1.3. Prepararse para la indisponibilidad de servicios">Sección 4.1.3, “Prepararse para la indisponibilidad de servicios”</a>.
  </p></td></tr></table></div><p>
Para poder tener un margen de seguridad mayor cuando actualiza de forma
remota le sugerimos que realice su proceso de actualización en una consola
virtual como la que ofrece el programa <span class="command"><strong>screen</strong></span>, lo que
permite una reconexión segura y asegura que el proceso de actualización no
se interrumpe aunque falle el proceso de conexión remota.
</p><div class="important"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Importante]" src="images/important.png" /></td><th align="left">Importante</th></tr><tr><td align="left" valign="top"><p>
    <span class="emphasis"><em>No</em></span> debería actualizar usando <span class="command"><strong>telnet</strong></span>,
<span class="command"><strong>rlogin</strong></span>, <span class="command"><strong>rsh</strong></span>, ni desde una sesión de X
controlada por <span class="command"><strong>xdm</strong></span>, <span class="command"><strong>gdm</strong></span> o
<span class="command"><strong>kdm</strong></span> en la máquina que esté actualizando. Esto se debe a
que cada uno de esos servicios puede cerrarse durante la actualización, y
podría hacer que el sistema se volviese <span class="emphasis"><em>inaccesible</em></span> y
que está sólo actualizado a la mitad. <span class="emphasis"><em>No se recomienda</em></span>
el uso de la aplicación GNOME <span class="command"><strong>update-manager</strong></span> para
realizar actualizaciones a nuevas versiones, dado que esta herramienta
requiere una sesión de escritorio activa.
  </p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="system-status"></a>4.2. Comprobar el estado del sistema</h2></div></div></div><p>
Se ha diseñado el proceso de actualización descrito en este capítulo para
actualizaciones de sistemas wheezy <span class="quote">“<span class="quote">puros</span>”</span>, en los
que no existe ningún paquete de otros proveedores. Puede ser sensato
eliminar paquetes de este tipo antes de empezar para asegurarse que el
proceso de actualización puede funcionar correctamente.
</p><p>
No se da soporte a actualizaciones de versiones de Debian anteriores a
7 (wheezy). Por favor, siga las instrucciones en las
<a class="ulink" href="https://www.debian.org/releases/wheezy/releasenotes" target="_top">Notas de
publicación para Debian 7</a> para actualizarse primero a
7.
</p><p>
Se supone que su sistema se ha actualizado a la última revisión de
wheezy. Debe seguir las instrucciones descritas en <a class="xref" href="ap-old-stuff.es.html#old-upgrade" title="A.1. Actualizar su sistema wheezy">Sección A.1, “Actualizar su sistema wheezy”</a> si su sistema no está actualizado o no está seguro
de que lo esté.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="review-actions"></a>4.2.1. Revisar las acciones pendientes en el gestor de paquetes</h3></div></div></div><p>
En algunos casos, utilizar <span class="command"><strong>apt-get</strong></span> para instalar paquetes
en lugar de <span class="command"><strong>aptitude</strong></span> puede hacer que
<span class="command"><strong>aptitude</strong></span> considere que un paquete no está siendo
utilizado (marcado como «unused») y lo marcará para su eliminación. Por
regla general debería asegurarse que su sistema está totalmente actualizado
y <span class="quote">“<span class="quote">limpio</span>”</span> antes de empezar la actualización.
</p><p>
Por ello, es necesario que revise si existe alguna acción pendiente en el
gestor de paquetes <span class="command"><strong>aptitude</strong></span>. El procedimiento de
actualización puede verse afectado negativamente si algún paquete está
marcado para eliminarse o actualizarse. Tenga en cuenta que sólo podrá
corregir esto si su archivo de configuración
<code class="filename">sources.list</code> apunta a
<span class="emphasis"><em>wheezy</em></span> y no a <span class="emphasis"><em>stable</em></span> o
<span class="emphasis"><em>jessie</em></span>, consulte <a class="xref" href="ap-old-stuff.es.html#old-sources" title="A.2. Comprobar su lista de fuentes">Sección A.2, “Comprobar su lista de fuentes”</a>.
</p><p>
Para realizar esta revisión debería ejecutar el interfaz de usuario en
<span class="quote">“<span class="quote">modo visual</span>”</span> de <span class="command"><strong>aptitude</strong></span> y pulsar
<span class="keycap"><strong>g</strong></span> (<span class="quote">“<span class="quote">Go</span>”</span>). Si se muestra cualquier acción,
debería revisarla y o bien arreglarlas o llevar a cabo las acciones que se
le sugieran. Se le presentará el mensaje <span class="quote">“<span class="quote">No hay ningún paquete
planificado para instalar, eliminar o actualizar</span>”</span> si no hay ninguna
acción pendiente.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="disable-apt-pinning"></a>4.2.2. Desactivar el bloqueo de APT</h3></div></div></div><p>
Si ha configurado APT para que instale ciertos paquetes de una distribución
distinta de la estable, por ejemplo la distribución <span class="quote">“<span class="quote">testing</span>”</span>
(<span class="quote">“<span class="quote">en pruebas</span>”</span>, N. del T.), puede ser que haya cambiado la
configuración de bloqueo (o <span class="emphasis"><em>pinning</em></span>) de APT (almacenada
en <code class="filename">/etc/apt/preferences</code> y
<code class="filename">/etc/apt/preferences.d/</code>) para permitir que se
actualicen paquetes con versiones más recientes que en la distribución
estable. Puede encontrar más información sobre el bloqueo de APT en
<span class="citerefentry"><span class="refentrytitle">apt_preferences</span>(5)</span>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="package-status"></a>4.2.3. Verificar el estado de los paquetes</h3></div></div></div><p>
Independientemente del método que se use para actualizar, se recomienda que
compruebe el estado de todos los paquetes primero, y que verifique que todos
los paquetes se encuentran en un estado actualizable. La siguiente orden
mostrará cualquier paquete que se haya quedado a medio instalar (estado
<span class="emphasis"><em>Half-Installed</em></span>) o en los que haya fallado la
configuración (estado <span class="emphasis"><em>Failed-Config</em></span>), así como los que
tengan cualquier estado de error.
</p><pre class="screen">
# dpkg --audit
</pre><p>
También puede inspeccionar el estado de todos los paquetes de su sistema
usando <span class="command"><strong>aptitude</strong></span> o con órdenes tales como:
</p><pre class="screen">
# dpkg -l | pager
</pre><p>
o
</p><pre class="screen">
# dpkg --get-selections "*" &gt; ~/paqu-actuales.txt
</pre><p>
Es deseable eliminar cualquier paquete retenido (paquete en estado «hold»,
N. del T.) antes de actualizar. El proceso fallará si un paquete esencial
para la actualización está bloqueado.
</p><p>
Tenga en cuenta que <span class="command"><strong>aptitude</strong></span> utiliza un método para
registrar los paquetes retenidos distinto del que utilizan
<span class="command"><strong>apt-get</strong></span> y <span class="command"><strong>dselect</strong></span>. Puede utilizar la
siguiente orden para identificar los paquetes que están retenidos en
<span class="command"><strong>aptitude</strong></span>:
</p><pre class="screen">
# aptitude search "~ahold" 
</pre><p>
Si quiere comprobar los paquetes que tiene retenidos con
<span class="command"><strong>apt-get</strong></span> debería utilizar:
</p><pre class="screen">
# dpkg --get-selections | grep 'hold$'
</pre><p>
Si ha cambiado y recompilado un paquete de forma local, y no le ha cambiado
el nombre o marcado con una época («epoch», N. del T.) en la versión,
debería retenerlo (ponerlo en <span class="emphasis"><em>hold</em></span>) para evitar que se
actualice.
</p><p>
Se puede cambiar el estado de un paquete retenido (<span class="quote">“<span class="quote">hold</span>”</span>) para
que lo tengan en cuenta <span class="command"><strong>apt-get</strong></span> con la siguiente orden:
</p><pre class="screen">
# echo <em class="replaceable"><code>nombre_de_paquete</code></em> hold | dpkg --set-selections
</pre><p>
Cambie <code class="literal">hold</code> por <code class="literal">install</code> para borrar la
marca del paquete y que éste deje de estar retenido.
</p><p>
Si hay algo que debe arreglar es mejor que se asegure de que su archivo
<code class="filename">sources.list</code> aún incluye referencias a wheezy
tal y como se explica en <a class="xref" href="ap-old-stuff.es.html#old-sources" title="A.2. Comprobar su lista de fuentes">Sección A.2, “Comprobar su lista de fuentes”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="proposed-updates"></a>4.2.4. La sección <span class="quote">“<span class="quote">proposed-updates</span>”</span></h3></div></div></div><p>
    Antes de actualizar el sistema debería eliminar la sección
<code class="literal">proposed-updates</code> de su archivo
<code class="filename">/etc/apt/sources.list</code> si la tiene listada. Esta medida
de precaución reducirá la posibilidad de que se produzcan conflictos.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="unofficial-sources"></a>4.2.5. Fuentes no oficiales</h3></div></div></div><p>
Debe tener en cuenta que si tiene paquetes en el sistema que no sean de
Debian es posible que éstos se eliminen durante la actualización debido a
dependencias que entren en conflicto. Si el paquete se instaló después de
añadir un repositorio de paquetes extra en su archivo
<code class="filename">/etc/apt/sources.list</code> debería asegurarse de que ese
repositorio también ofrece paquetes compilados para jessie y cambiar
la línea de la fuente al mismo tiempo que cambia otras líneas de las fuentes
de los paquetes Debian.
</p><p>
Algunos usuarios tienen versiones <span class="quote">“<span class="quote">más nuevas</span>”</span> de paquetes que
<span class="emphasis"><em>sí</em></span> están en Debian a través de recompilaciones
<span class="emphasis"><em>no oficiales</em></span> («backports», N. del T.) que están
instaladas en su sistema wheezy. Es muy probable que estos
paquetes causen problemas durante la actualización y que den lugar a
conflictos de archivos<a href="#ftn.idp41784000" class="footnote" id="idp41784000"><sup class="footnote">[4]</sup></a>. Puede encontrar
más información sobre los conflictos de archivos y su resolución en la
sección <a class="xref" href="ch-upgrading.es.html#trouble" title="4.5. Posibles problemas durante o después de la actualización">Sección 4.5, “Posibles problemas durante o después de la actualización”</a>.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="upgrade-process"></a>4.3. Preparar las fuentes para APT</h2></div></div></div><p>
Antes de comenzar la actualización, debe modificar las listas de paquetes en
el archivo de configuración de <code class="systemitem">apt</code><a id="idp41788480" class="indexterm"></a>:
<code class="filename">/etc/apt/sources.list</code>.
</p><p>
<code class="systemitem">apt</code><a id="idp41791152" class="indexterm"></a> tomará en consideración todos
los paquetes que pueda encontrar mediante una línea que empiece por
<span class="quote">“<span class="quote"><code class="literal">deb</code></span>”</span>, e instalará el paquete con el mayor
número de versión, dando prioridad a las líneas que aparezcan primero. En el
caso de utilizar distintos repositorios de paquetes, habitualmente se
indicará primero el disco duro local, luego los CD-ROM, y por último las
réplicas HTTP y FTP.
</p><p>
Una versión se puede designar tanto por su nombre en clave (por ejemplo
<code class="literal">wheezy</code>, <code class="literal">jessie</code>) como
por su nombre de estado (esto es, <code class="literal">oldstable</code>,
<code class="literal">stable</code>, <code class="literal">testing</code>,
<code class="literal">unstable</code>). Referirse a la distribución por su nombre en
clave tiene la ventaja de que nunca se sorprenderá si se produce una nueva
versión y por esa razón es el caso que aquí se describe. Esto significa que
va a tener que estar atento a los anuncios nuevas versiones. Sin embargo, si
utiliza el nombre del estado verá un número muy elevado de actualizaciones
de paquetes en el mismo momento en el que la publicación de una nueva
versión se haya realizado.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="network"></a>4.3.1. Añadir fuentes en Internet para APT</h3></div></div></div><p>
La configuración por omisión para la instalación escoge los principales
servidores de Debian en Internet, pero puede que desee modificar
<code class="filename">/etc/apt/sources.list</code> para usar otras réplicas,
preferentemente una que esté cerca (en términos de red) de usted.
</p><p>
Encontrará la lista de direcciones de las réplicas en HTTP o FTP de Debian
en <a class="ulink" href="https://www.debian.org/distrib/ftplist" target="_top">https://www.debian.org/distrib/ftplist</a> (busque en la sección
<span class="quote">“<span class="quote">Lista de completa de sitios de réplica</span>”</span>). Las réplicas HTTP
suelen ser más rápidas, en general, que las FTP.
</p><p>
Por ejemplo, suponga que su réplica más cercana es
<code class="literal">http://mirrors.kernel.org/</code>. Si observa su contenido mediante
un navegador web o un programa FTP, comprobará que los directorios
principales están organizados así:
</p><pre class="programlisting">
http://mirrors.kernel.org/debian/dists/jessie/main/binary-<span class="phrase">amd64</span>/...
http://mirrors.kernel.org/debian/dists/jessie/contrib/binary-<span class="phrase">amd64</span>/...
</pre><p>
Deberá añadir esta línea a su archivo <code class="filename">sources.list</code> para
usar esta réplica con <code class="systemitem">apt</code><a id="idp41809152" class="indexterm"></a>:
</p><pre class="programlisting">deb http://mirrors.kernel.org/debian jessie main contrib</pre><p>
Fíjese que <span class="quote">“<span class="quote"><code class="literal">dists</code></span>”</span> se añade de forma
implícita, y los parámetros tras el nombre de la versión se usan para
expandir la ruta a varios directorios.
</p><p>
Tras añadir sus nuevas fuentes, desactive las líneas
<span class="quote">“<span class="quote"><code class="literal">deb</code></span>”</span> que había en
<code class="filename">sources.list</code>, colocando el símbolo de sostenido
(<code class="literal">#</code>) delante de ellas.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="localmirror"></a>4.3.2. Añadir las réplicas locales para APT</h3></div></div></div><p>
En lugar de utilizar réplicas de paquetes HTTP ó FTP, puede que desee
modificar el archivo <code class="filename">/etc/apt/sources.list</code> para usar
una réplica existente en su disco local (posiblemente montada mediante
<acronym title="Network File System («Sistema de ficheros en red», N. del T.)">NFS</acronym>).
</p><p>
Por ejemplo, su réplica de paquetes puede encontrarse en
<code class="filename">/var/ftp/debian/</code>, y tener directorios como estos:
</p><pre class="programlisting">
/var/ftp/debian/dists/jessie/main/binary-<span class="phrase">amd64</span>/...
/var/ftp/debian/dists/jessie/contrib/binary-<span class="phrase">amd64</span>/...
</pre><p>
Para usar esta ubicación con <code class="systemitem">apt</code>
debe añadir esta línea a su archivo <code class="filename">sources.list</code>:
</p><pre class="programlisting">deb file:/var/ftp/debian jessie main contrib</pre><p>
Fíjese que <span class="quote">“<span class="quote"><code class="literal">dists</code></span>”</span> se añade de forma
implícita, y los parámetros tras el nombre de la versión se usan para
expandir la ruta a varios directorios.
</p><p>
Tras añadir sus nuevas fuentes, desactive las líneas
<span class="quote">“<span class="quote"><code class="literal">deb</code></span>”</span> que había en
<code class="filename">sources.list</code>, colocando el símbolo de sostenido
(<code class="literal">#</code>) delante de ellas.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cdroms"></a>4.3.3. Añadir fuentes para APT de medios ópticos</h3></div></div></div><p>
Si quiere utilizar <span class="emphasis"><em>sólo</em></span> CDs (o DVDs, o discos Blu-ray),
comente todas las líneas <span class="quote">“<span class="quote"><code class="literal">deb</code></span>”</span> existentes en
<code class="filename">/etc/apt/sources.list</code> colocando delante de ellas un
símbolo de sostenido (<code class="literal">#</code>).
</p><p>
Asegúrese de que existe una línea en <code class="filename">/etc/fstab</code> que
permita montar la unidad lectora de CD-ROMs en el punto de montaje
<code class="filename">/media/cdrom</code>. Por ejemplo, si su lector de CD-ROM se
encuentra en <code class="filename">/dev/sr0</code>, el archivo de configuración
<code class="filename">/etc/fstab</code> debería incluir una línea similar a la
siguiente:
</p><pre class="programlisting">
/dev/sr0 /media/cdrom auto noauto,ro 0 0
</pre><p>
Fíjese que <span class="emphasis"><em>no debe haber espacios</em></span> entre las palabras
<code class="literal">noauto,ro</code> en el cuarto campo.
</p><p>
Para verificar que esto funciona, inserte un CD e intente ejecutar
</p><pre class="screen">
# mount /media/cdrom   # ésto montará el CD en el punto de montaje
# ls -alF /media/cdrom # ésto debería mostrar el directorio raíz del CD 
# umount /media/cdrom  # ésto desmontará el CD
</pre><p>
Después, ejecute:
</p><pre class="screen">
# apt-cdrom add
</pre><p>
para añadir los datos a la base de datos de APT. Repita esta operación para
cada CD-ROM de binarios de Debian que tenga.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="upgradingpackages"></a>4.4. Actualizar los paquetes</h2></div></div></div><p>
El método recomendado para actualizar desde versiones anteriores de Debian
es usar la herramienta de gestión de paquetes <span class="command"><strong>apt-get</strong></span>. En
versiones anteriores, se recomendaba la orden <span class="command"><strong>aptitude</strong></span>
para este propósito, pero las versiones más recientes de
<span class="command"><strong>apt-get</strong></span> ofrecen la misma funcionalidad y se ha demostrado
que proporcionan los resultados deseables para una actualización de forma
más consistente.
</p><p>
No olvide montar todas las particiones que necesite (en particular la raíz y
<code class="filename">/usr</code>) en modo lectura y escritura, con una orden como:
</p><pre class="screen">
# mount -o remount,rw /<em class="replaceable"><code>punto_de_montaje</code></em>
</pre><p>
A continuación asegúrese de que las entradas con las fuentes de APT (en el
archivo <code class="filename">/etc/apt/sources.list</code>) hacen referencia a la
distribución <span class="quote">“<span class="quote"><code class="literal">jessie</code></span>”</span> o a estable
(<span class="quote">“<span class="quote"><code class="literal">stable</code></span>”</span>). No debería haber ninguna entrada
que haga referencia a <span class="quote">“<span class="quote"><code class="literal">wheezy</code></span>”</span>.
</p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Nota]" src="images/note.png" /></td><th align="left">Nota</th></tr><tr><td align="left" valign="top"><p>
    Las líneas de fuentes de un CD-ROM pueden hacen referencia a inestable
(<span class="quote">“<span class="quote"><code class="literal">unstable</code></span>”</span>), aunque esto le parezca confuso
<span class="emphasis"><em>no</em></span> debería cambiarlo.
  </p></td></tr></table></div><p>
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="record-session"></a>4.4.1. Grabar la sesión</h3></div></div></div><p>
Se recomienda encarecidamente que utilice el programa
<span class="command"><strong>/usr/bin/script</strong></span> para guardar una transcripción de la
sesión de actualización. Así, si ocurre algún problema, tendrá un registro
de lo que ha sucedido y, si fuera necesario, podrá proporcionar la
información detallada cuando envíe un informe de fallo. Para iniciar la
transcripción, teclee:
</p><pre class="screen">
# script -t 2&gt;~/actualiza-a-jessie<em class="replaceable"><code>paso</code></em>.time -a ~/actualiza-a-jessie<em class="replaceable"><code>paso</code></em>.script
</pre><p>
o similar. Si tiene que volver a ejecutar la transcripción (por ejemplo, si
ha reiniciado el sistema) debería utilizar distintos valores de
<em class="replaceable"><code>paso</code></em> para indicar el paso de la actualización que
se está transcribiendo. No ponga el archivo de transcripción en un
directorio temporal como <code class="filename">/tmp</code> o
<code class="filename">/var/tmp</code> (los archivos que hay en esos directorios se
pueden borrar durante la actualización o durante el reinicio del sistema).
</p><p>
La transcripción también le permitirá revisar la información que se haya
salido fuera de la pantalla. Simplemente acceda al terminal VT2 (utilizando
<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span>)
y, después de acceder al sistema, utilice <code class="literal">less -R
~root/actualiza-a-jessie.script</code> para leer el archivo.
</p><p>
Después de completar la actualización puede terminar con la transcripción de
<span class="command"><strong>script</strong></span> escribiendo <code class="literal">exit</code> en el
indicador de línea de órdenes.
</p><p>
Si ha utilizado la opción <span class="emphasis"><em>-t</em></span> para
<span class="command"><strong>script</strong></span> puede utilizar el programa
<span class="command"><strong>scriptreplay</strong></span> para reproducir la sesión completa:
</p><pre class="screen">
# scriptreplay ~/actualiza-a-jessie.time ~/actualiza-a-jessie.script
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating-lists"></a>4.4.2. Actualizar las listas de paquetes</h3></div></div></div><p>
En primer lugar, tiene que descargar la lista con los paquetes disponibles
para la nueva versión. Logrará esto si ejecuta:
</p><pre class="screen">
# apt-get update
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sufficient-space"></a>4.4.3. Asegúrese de que tiene suficiente espacio libre para actualizar</h3></div></div></div><p>
Antes de actualizar su sistema tiene que asegurarse de que tendrá suficiente
espacio libre en su disco duro para poder seguir las instrucciones de una
actualización completa del sistema que se describen en <a class="xref" href="ch-upgrading.es.html#upgrading-full" title="4.4.5. Actualizar el sistema">Sección 4.4.5, “Actualizar el sistema”</a>. En primer lugar, cualquier paquete que necesario
para la instalación se descargará y se almacenará en
<code class="filename">/var/cache/apt/archives</code> (y en el subdirectorio
<code class="filename">partial/</code>, mientras se está descargando), por lo que
necesitará suficiente espacio libre en la partición donde se encuentre
<code class="filename">/var/</code> para poder descargar temporalmente los paquetes
que se instalarán en su sistema. Después de la descarga, probablemente
necesitará más espacio en las otras particiones de sistemas de ficheros para
poder instalar tanto las actualizaciones de los paquetes (que podrían
contener archivos binarios más grandes o más datos) como los nuevos paquetes
que se necesiten en la actualización. Si su sistema no tiene suficiente
espacio podría terminar con una actualización incompleta de la cual es
difícil recuperarse.
</p><p>
La orden <span class="command"><strong>apt-get</strong></span> le puede mostrar información detallada
del espacio libre necesario para la instalación. Puede consultar esa
estimación, antes de proceder con la actualización, si ejecuta:
</p><pre class="screen">
# apt-get -o APT::Get::Trivial-Only=true dist-upgrade
[...]
XXX actualizados, XXX se instalará, XXX para eliminar y XXX no actualizados.
Se necesita descargar xx.xxMB/yyyMB de archivos. 
Se utilizarán AAAMB de espacio de disco adicional después de esta operación.
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Nota]" src="images/note.png" /></td><th align="left">Nota</th></tr><tr><td align="left" valign="top"><p>
Puede que la ejecución de esta orden al principio del proceso de
actualización genere un error, por las razones descritas en las siguientes
secciones. En ese caso tiene que esperar para ejecutar esta orden hasta
haber realizado una actualización mínima del sistema tal y como se describe
en <a class="xref" href="ch-upgrading.es.html#minimal-upgrade" title="4.4.4. Actualización mínima del sistema">Sección 4.4.4, “Actualización mínima del sistema”</a> antes de ejecutar esta orden para poder
estimar el espacio de disco necesario.
</p></td></tr></table></div><p>
Si no tiene espacio suficiente para la actualización,
<span class="command"><strong>apt-get</strong></span> le avisará con un mensaje como este:
</p><pre class="screen">
E: No tiene suficiente espacio libre en /var/cache/apt/archives/.
</pre><p>Si no tiene espacio suficiente para la actualización, asegúrese de hacer
sitio antes de proceder. Puede hacer lo siguiente:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Elimine aquellos paquetes que se han descargado previamente para su
instalación (en <code class="filename">/var/cache/apt/archive</code>). Puede utilizar
la orden <span class="command"><strong>apt-get clean</strong></span> para borrar todos los archivos de
paquetes previamente descargados.
</p></li><li class="listitem"><p>
Eliminar paquetes olvidados. Si ha utilizado <span class="command"><strong>aptitude</strong></span> o
<span class="command"><strong>apt-get</strong></span> para instalar manualmente paquetes de
wheezy, la herramienta hará un seguimiento de los paquetes que
haya instalado y podrá marcar como redundantes aquellos paquetes que se
obtuvieron sólo para cumplir las dependencias pero que ya no se necesitan
porque el paquete que los necesitaba se ha eliminado. No se marcarán como
obsoletos aquellos paquetes que haya instalado manualmente. Pero si lo hará
para aquellos paquetes que se instalaron automáticamente para cumplir
dependencias. Para eliminar automáticamente los paquetes instalados que no
se necesitan puede ejecutar lo siguiente:
</p><pre class="screen">
# apt-get autoremove
</pre><p>
También puede utilizar para encontrar paquetes redundantes
<span class="command"><strong>deborphan</strong></span>, <span class="command"><strong>debfoster</strong></span> o
<span class="command"><strong>cruft</strong></span>. No elimine a ciegas los paquetes que le indiquen
estas herramientas, especialmente si utiliza opciones agresivas, distintas a
las definidas por omisión, que pueden dar lugar a muchos falsos
positivos. Se le recomienda encarecidamente que revise los paquetes que
éstas le sugieren eliminar (esto es: sus contenidos, su tamaño y
descripción) antes de eliminarlos
</p></li><li class="listitem"><p>
Elimine paquetes que consumen mucho espacio y que no necesita actualmente
(siempre puede instalarlos después de la actualización). Puede utilizar la
orden <span class="command"><strong>popcon-largest-unused</strong></span> para listar los paquetes que
no utiliza que consumen más espacio si tiene instalado <code class="systemitem">popularity-contest</code><a id="idp41899552" class="indexterm"></a>. Puede encontrar los paquetes
que consumen más espacio con <span class="command"><strong>dpigs</strong></span> (disponible en el
paquete <code class="systemitem">debian-goodies</code><a id="idp41902096" class="indexterm"></a>) o con
<span class="command"><strong>wajig</strong></span> (ejecutando <code class="literal">wajig size</code>). También
puede encontrarlos con <code class="systemitem">aptitude</code><a id="idp41905280" class="indexterm"></a>. Ejecute <span class="command"><strong>aptitude</strong></span> en
<span class="emphasis"><em>modo visual</em></span>, seleccione <span class="guimenu">Vistas</span> y
<span class="guimenu">Nueva vista de paquetes plana</span>, pulse la tecla
<span class="keycap"><strong>l</strong></span> e introduzca <code class="literal">~i</code>, pulse la tecla
<span class="keycap"><strong>S</strong></span> e introduzca <code class="literal">~installsize</code>. Una vez
hecho esto, dispondrá de una lista de paquetes con los que puede trabajar. 
</p></li><li class="listitem"><p>
  Puede eliminar las traducciones y los archivos de localización del sistema
si no los necesita. Para ello puede instalar el paquete <code class="systemitem">localepurge</code><a id="idp41913568" class="indexterm"></a>, configurándolo para que sólo se
mantengan en el sistema algunas localizaciones específicas. Esto reducirá el
espacio de disco consumido en <code class="filename">/usr/share/locale</code>.
</p></li><li class="listitem"><p>
   Mueva de forma temporal a otro sistema o elimínelos de forma permanente, los
registros del sistema que residen en <code class="filename">/var/log/</code>.
</p></li><li class="listitem"><p>
    Utilice una ubicación temporal para
<code class="filename">/var/cache/apt/archives</code>: puede utilizar una caché
temporal en otro sistema de archivos (<acronym title="Universal serial bus («Bus serie universal», N. del T.)">USB</acronym>, dispositivo de
almacenamiento, espacio en disco duro temporal, sistema de ficheros en uso,
etc. ).
  </p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Nota]" src="images/note.png" /></td><th align="left">Nota</th></tr><tr><td align="left" valign="top"><p>
      No utilice un sistema montado a través de <acronym title="Network File System («Sistema de ficheros en red», N. del T.)">NFS</acronym> dado que la
conexión de red podría interrumpirse durante la actualización.
    </p></td></tr></table></div><p>
  Por ejemplo, si tiene una unidad <acronym title="Universal serial bus («Bus serie universal», N. del T.)">USB</acronym> montada en
<code class="filename">/media/usbkey</code>:
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
	elimine los paquetes que se han descargado previamente para la instalación

	</p><pre class="screen"># apt-get clean</pre><p>
      </p></li><li class="listitem"><p>
	copie los contenidos de <code class="filename">/var/cache/apt/archives</code> a la
unidad <acronym title="Universal serial bus («Bus serie universal», N. del T.)">USB</acronym>:

	</p><pre class="screen"># cp -ax /var/cache/apt/archives /media/usbkey/</pre><p>
      </p></li><li class="listitem"><p>
	monte el directorio de caché temporal sobre el actual:

	</p><pre class="screen"># mount --bind /media/usbkey/archives /var/cache/apt/archives</pre><p>
      </p></li><li class="listitem"><p>
	después de la actualización, restaure el directorio original
<code class="filename">/var/cache/apt/archives</code>

	</p><pre class="screen"># umount /media/usbkey/archives</pre><p>
      </p></li><li class="listitem"><p>
	elimine el directorio  <code class="filename">/media/usbkey/archives</code>.
      </p></li></ol></div><p>
  Puede crear una directorio de caché temporal en cualquier sistema de
archivos montado en su sistema.
  </p></li><li class="listitem"><p>
    Realice un actualización mínima del sistema (consulte <a class="xref" href="ch-upgrading.es.html#minimal-upgrade" title="4.4.4. Actualización mínima del sistema">Sección 4.4.4, “Actualización mínima del sistema”</a>) o una actualización parcial seguida de una
actualización completa del sistema. Esto le permitirá actualizar el sistema
parcialmente, lo que le permitirá limpiar la caché de paquetes antes de la
actualización completa.
  </p></li></ul></div><p>
Tenga en cuenta que para poder eliminar los paquetes con seguridad debería
cambiar su <code class="filename">sources.list</code> a wheezy como se
describe en <a class="xref" href="ap-old-stuff.es.html#old-sources" title="A.2. Comprobar su lista de fuentes">Sección A.2, “Comprobar su lista de fuentes”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="minimal-upgrade"></a>4.4.4. Actualización mínima del sistema</h3></div></div></div><p>
En algunos casos, la realización directamente de una actualización completa
(como se describe más abajo) podría tener como consecuencia la eliminación
de un buen número de paquetes que quiere conservar. Le recomendamos por
tanto un proceso de actualización en dos pasos. En primer lugar, una
actualización mínima para resolver estos conflictos, seguido de una
actualización completa como se describe en <a class="xref" href="ch-upgrading.es.html#upgrading-full" title="4.4.5. Actualizar el sistema">Sección 4.4.5, “Actualizar el sistema”</a>. 
</p><p>
Para hacer esto, ejecute primero lo siguiente:
</p><pre class="screen">
# apt-get upgrade
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Nota]" src="images/note.png" /></td><th align="left">Nota</th></tr><tr><td align="left" valign="top"><p>
      El proceso de actualización para algunas de las versiones anteriores
recomendaba el uso de la herramienta  <span class="command"><strong>aptitude</strong></span> para
realizar la actualización. Esta herramienta ya no se recomienda para las
actualizaciones de wheezy a jessie.
    </p></td></tr></table></div><p>
Esto tiene como consecuencia que se actualicen los paquetes que se puedan
actualizar en el sistema sin que sea necesario eliminar ni instalar ningún
otro paquete.
</p><p>
La actualización mínima del sistema también puede ser útil cuando hay poco
espacio libre disponible en el sistema y no puede ejecutarse la
actualización completa debido a problemas de espacio.
</p><p>
  Si está instalado el paquete <code class="systemitem">apt-listchanges</code><a id="idp41946240" class="indexterm"></a>, mostrará (en su configuración
por omisión) información importante sobre los paquetes actualizados en un
paginador. Pulse <span class="keycap"><strong>q</strong></span> después de leer esta información para
salir del paginador y continuar con la actualización.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="upgrading-full"></a>4.4.5. Actualizar el sistema</h3></div></div></div><p>
Una vez haya realizado los pasos anteriores, estará en condiciones de seguir
con la parte principal de la actualización. Ejecute:
</p><pre class="screen">
# apt-get dist-upgrade
</pre><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Nota]" src="images/note.png" /></td><th align="left">Nota</th></tr><tr><td align="left" valign="top"><p>
      El proceso de actualización para algunas de las versiones anteriores
recomendaba el uso de la herramienta  <span class="command"><strong>aptitude</strong></span> para
realizar la actualización. Esta herramienta ya no se recomienda para las
actualizaciones de wheezy a jessie.
    </p></td></tr></table></div><p>
Se realizará una actualización completa del sistema, esto es, se instalarán
las versiones más recientes de los paquetes y se resolverán todos los
posibles cambios de dependencias entre los paquetes de diferentes
versiones. Si fuera necesario, se instalarán nuevos paquetes (normalmente,
nuevas versiones de las bibliotecas o paquetes que han cambiado de nombre),
y se eliminarán los paquetes obsoletos conflictivos.
</p><p>
Cuando esté actualizando desde un conjunto de CD-ROM (o DVD), se le pedirá
que inserte algunos CD específicos en varios momentos durante la
actualización. Puede que tenga que insertar el mismo CD varias veces; esto
se debe a paquetes interrelacionados que estén dispersos en varios CD.
</p><p>
Las versiones nuevas de los paquetes ya instalados que no se puedan
actualizar sin cambiar el estado de la instalación de otro paquete se
dejarán en su versión actual (en cuyo caso se mostrarán como «held back», es
decir, «retenidos»). Se puede resolver esta incidencia usando
<span class="command"><strong>aptitude</strong></span> para elegir esos paquetes para que se instalen,
o intentando ejecutar <code class="literal">apt-get install
<em class="replaceable"><code>paquete</code></em></code>.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="trouble"></a>4.5. Posibles problemas durante o después de la actualización</h2></div></div></div><p>
Las siguientes secciones describen problemas conocidos que pueden aparecer
durante la actualización a jessie.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="immediate-configure"></a>4.5.1. Dist-upgrade falla con «No se pudo realizar la configuración inmediata»</h3></div></div></div><p>
En algunos casos el paso <span class="command"><strong>apt-get dist-upgrade</strong></span> puede
fallar después de descargar los paquetes con el siguiente error:
</p><pre class="screen">
E: No se pudo realizar la configuración inmediata de «<em class="replaceable"><code>paquete</code></em>». Consulte la página de manual con «man 5 apt.conf» bajo «APT::Immediate-Configure» para más información.
</pre><p>
</p><p>
Si esto sucede, debería ejecutar la orden <span class="command"><strong>apt-get dist-upgrade -o
APT::Immediate-Configure=0</strong></span>, que permitirá continuar con la
actualización.
</p><p>
Otra posible alternativa para evitar este problema es añadir temporalmente
fuentes tanto de wheezy como de jessie en el archivo
<code class="filename">sources.list</code> y ejecutar <span class="command"><strong>apt-get
update</strong></span>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="expected-removals"></a>4.5.2. Eliminaciones esperadas</h3></div></div></div><p>
El proceso de actualización a jessie puede solicitar la eliminación
de paquetes en el sistema. La lista exacta de paquetes dependerá del
conjunto de paquetes que tenga instalado. Estas notas de publicación
proporcionan recomendaciones generales sobre estas eliminaciones pero, si
tiene dudas, se recomienda que revise los paquetes que se van a eliminar
propuestos por cada método antes de continuar. Encontrará más información de
los paquetes obsoletos en  jessie en <a class="xref" href="ch-upgrading.es.html#obsolete" title="4.10. Paquetes obsoletos">Sección 4.10, “Paquetes obsoletos”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="conflicts-loops"></a>4.5.3. Bucles en Conflictos o Pre-Dependencias</h3></div></div></div><p>
Algunas veces es necesario activar la opción
<code class="literal">APT::Force-LoopBreak</code> en APT para permitir el borrado
temporal de un paquete esencial debido a un bucle de Conflictos y
Dependencias previas. <span class="command"><strong>apt-get</strong></span> le alertará de esta
situación y abortará la actualización. Puede resolver esto especificando la
opción <code class="literal">-o APT::Force-LoopBreak=1</code> en la línea de órdenes
de <span class="command"><strong>apt-get</strong></span>.
</p><p>
Es posible que la estructura de dependencias del sistema esté tan dañada que
precise de intervención manual. Normalmente, esto implica usar
<span class="command"><strong>apt-get</strong></span> o
</p><pre class="screen">
# dpkg --remove <em class="replaceable"><code>nombre_de_paquete</code></em>
</pre><p>
para eliminar algunos de los paquete problemáticos, o
</p><pre class="screen">
# apt-get -f install
# dpkg --configure --pending
</pre><p>
En casos extremos, puede que necesite forzar la reinstalación con una orden
como:
</p><pre class="screen">
# dpkg --install <em class="replaceable"><code>/ruta/al/nombre_de_paquete.deb</code></em>
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="file-conflicts"></a>4.5.4. Conflictos de archivo</h3></div></div></div><p>
No deberían producirse conflictos entre archivos si actualiza de un sistema
wheezy <span class="quote">“<span class="quote">puro</span>”</span>, pero sí pueden producirse si ha
instalado versiones nuevas no oficiales («backports», N. del T.). Si se
produce un conflicto entre archivos se mostrará con un error similar al
siguiente:
</p><pre class="screen">
Desempaquetando <em class="replaceable"><code>&lt;paquete-foo&gt;</code></em> (de <em class="replaceable"><code>&lt;paquete-foo-fichero&gt;</code></em>) ...
dpkg: error al procesar <em class="replaceable"><code>&lt;paquete-foo&gt;</code></em> (--install):
 intentando sobreescribir `<em class="replaceable"><code>&lt;algún-nombre-fichero&gt;</code></em>',
 que está también en el paquete <em class="replaceable"><code>&lt;paquete-bar&gt;</code></em>
dpkg-deb: subprocess paste killed by signal (Broken pipe)
 Se encontraron errores al procesar:
 <em class="replaceable"><code>&lt;paquete-foo&gt;</code></em>
</pre><p>
Puede intentar resolver los conflictos entre archivos forzando a que se
elimine el paquete mencionado en la <span class="emphasis"><em>última</em></span> línea del
mensaje de error:
</p><pre class="screen">
# dpkg -r --force-depends <em class="replaceable"><code>nombre_de_paquete</code></em>
</pre><p>
Debería poder continuar la instalación donde la dejó tras corregir el
problema repitiendo las órdenes de <code class="literal">apt-get</code> descritas
previamente.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-changes"></a>4.5.5. Cambios de configuración</h3></div></div></div><p>
Se le harán preguntas sobre la configuración o reconfiguración de diversos
paquetes durante la actualización. Cuando se le pregunte si debería
reemplazarse algún archivo en el directorio
<code class="filename">/etc/init.d</code>, o el archivo
<code class="filename">/etc/manpath.config</code> con la versión que propone el
mantenedor del paquete, normalmente deberá responder <span class="quote">“<span class="quote">sí</span>”</span> para
asegurar la consistencia del sistema. Siempre puede volver más tarde a las
versiones antiguas, ya que quedan guardadas con la extensión
<code class="literal">.dpkg-old</code>.
</p><p>
Si no está seguro de lo que debe hacer, anote el nombre del paquete o
archivo, y revise la situación más adelante. Recuerde que podrá buscar en el
archivo de transcripción de la instalación y revisar la información que
apareció en pantalla durante la actualización.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="console-change"></a>4.5.6. Cambio de la sesión en consola</h3></div></div></div><p>
Si está vd. ejecutando el proceso de actualización utilizando la consola
local del sistema es posible que en algunos momentos durante la
actualización se cambie la consola a una vista distinta y deje de ver el
proceso de actualización. Esto puede suceder, por ejemplo, en sistemas de
escritorio cuando se reinicia el gestor de escritorios.
</p><p>
Para recuperar la consola donde se estaba realizando la actualización tendrá
que utilizar la combinación de teclas <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>
(si está en la pantalla de arranque gráfico) o <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> (si está
en la consola de modo texto) para volver al terminal virtual 1. Reemplace F1
por la tecla de función que tenga el mismo número que el terminal virtual
donde se estaba realizando la actualización. También puede utilizar la
combinación <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Flecha
Izquierda</strong></span> o <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Flecha
Derecha</strong></span> para conmutar entre los distintos terminales de
modo texto.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="package-specific-issues"></a>4.5.7. Precauciones especiales con paquetes específicos</h3></div></div></div><p>
Los paquetes deberían actualizarse en la mayoría de los casos de una forma
suave al pasar de wheezy a jessie. Existe un pequeño
conjunto de casos donde es necesario realizar alguna intervención, bien
antes o bien durante la actualización. Se detallan a continuación paquete a
paquete.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="issues-systemd"></a>4.5.7.1. systemd</h4></div></div></div><p>
    La actualización de Debian de wheezy a jessie migrará su
sistema init por omisión de SysV a systemd.  Puede que tenga que realizar
algunos cambios manuales, lo que dependerá de su sistema y de su
configuración.  Hemos detallado los problemas conocidos en <a class="xref" href="ch-information.es.html#systemd-upgrade-default-init-system" title="5.6. La actualización instala el nuevo sistema de arranque predeterminado para Jessie">Sección 5.6, “La actualización instala el nuevo sistema de arranque predeterminado para
Jessie”</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="issues-lxc"></a>4.5.7.2. LXC</h4></div></div></div><p>
    Debe tener especial cuidado con la actualización de su sistema y sus
contenedores si tiene instalado LXC. Revise el capítulo <a class="xref" href="ch-information.es.html#lxc-upgrade-issues" title="5.8. Consideraciones de actualización de los equipos LXC y contenedores">Sección 5.8, “Consideraciones de actualización de los equipos LXC y contenedores”</a> que describe problemas conocidos y sus
soluciones.
  </p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="newkernel"></a>4.6. Actualización de su núcleo y paquetes relacionados</h2></div></div></div><p>
Esta sección explica cómo actualizar su núcleo e identifica los posibles
problemas que pueden darse con relación a esta actualización. Puede o bien
instalar uno de los paquetes <code class="systemitem">linux-image-*</code><a id="idp42016240" class="indexterm"></a> que ofrece Debian o compilar un
núcleo personalizado desde el código fuente del mismo.
</p><p>
Tenga en cuenta que gran parte de la información de esta sección se basa en
la suposición de que está utilizando uno de los núcleos modulares de Debian,
conjuntamente con <code class="systemitem">initramfs-tools</code><a id="idp42018848" class="indexterm"></a> y
<code class="systemitem">udev</code><a id="idp42020512" class="indexterm"></a>. Parte de la información aquí
presentada puede no ser relevante para usted si utiliza un núcleo a medida
que no necesita un initrd o si utiliza un generador de initrd distinto.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="kernel-metapackage"></a>4.6.1. Instalación de un metapaquete del núcleo</h3></div></div></div><p>
Cuando realice «dist-upgrade» desde wheezy a jessie, le
recomendamos encarecidamente que instale uno de los nuevos metapaquetes
«linux-image-*» si aún no lo ha hecho. Estos metapaquetes instalarán de
forma automática una nueva versión del núcleo durante una
actualización. Puede verificar si tiene uno ya instalado con la siguiente
orden:
</p><pre class="screen">
# dpkg -l "linux-image*" | grep ^ii | grep -i meta
</pre><p>
Si no observa ningún mensaje, entonces necesitará instalar un nuevo paquete
«linux-image» a mano o instalar un metapaquete «linux-image». Para ver una
lista de los metapaquetes «linux-image» disponibles, ejecute:
</p><pre class="screen">
# apt-cache search linux-image- | grep -i meta | grep -v transition
</pre><p>
Si no está seguro de qué paquete instalar, ejecute la orden <code class="literal">uname
-r</code> y busque un paquete con un nombre similar. Por ejemplo, si ve
«<code class="literal">2.6.32-5-amd64</code>», le recomendamos que instale <code class="systemitem">linux-image-amd64</code><a id="idp42029008" class="indexterm"></a>. También puede utilizar
<span class="command"><strong>apt-cache</strong></span> para ver una descripción más larga de cada uno
de los paquetes para así ayudarle a realizar una mejor elección de entre los
que hay disponibles. Por ejemplo:
</p><pre class="screen">
# apt-cache show linux-image-amd64
</pre><p>
Luego debería usar <code class="literal">apt-get install</code> para
instalarlo. Debería reiniciar en cuanto le sea posible una vez que haya
instalado el núcleo nuevo para empezar a beneficiarse de las características
que proporciona la nueva versión del núcleo. Sin embargo, debe leer primero
<a class="xref" href="ch-upgrading.es.html#nownownow" title="4.7. Qué hacer antes del siguiente reinicio">Sección 4.7, “Qué hacer antes del siguiente reinicio”</a> antes de hacer el primer reinicio tras una
actualización.
</p><p>
Para los más aventureros, hay una forma fácil para compilar su propio núcleo
a medida en Debian. Instale las fuentes del núcleo, que se incluyen en el
paquete <code class="systemitem">linux-source</code><a id="idp42035504" class="indexterm"></a>. Puede utilizar
el objetivo <code class="literal">deb-pkg</code> disponible en el fichero Makefile de
los paquetes fuentes utilizados para construir un paquete binario. Puede
encontrar más información en el <a class="ulink" href="http://kernel-handbook.alioth.debian.org/" target="_top">Debian Linux Kernel
Handbook</a>, que también está disponible en el paquete <code class="systemitem">debian-kernel-handbook</code><a id="idp42039056" class="indexterm"></a>."
</p><p>
Siempre que sea posible, es mejor para usted si actualiza el paquete del
núcleo de forma independiente a la actualización principal con
<code class="literal">dist-ugprade</code>, para así reducir las posibilidades de tener
durante un cierto periodo de tiempo un sistema que no se puede
iniciar. Tenga en cuenta que sólo debería hacer esto después de haber
realizado el proceso de actualización mínima del sistema que se describe en
<a class="xref" href="ch-upgrading.es.html#minimal-upgrade" title="4.4.4. Actualización mínima del sistema">Sección 4.4.4, “Actualización mínima del sistema”</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="initramfs-tools-issues"></a>4.6.2. Cambios al montaje y comprobaciones del sistema de ficheros raíz y
<code class="filename">/usr</code></h3></div></div></div><p>
    <code class="systemitem">initramfs-tools</code><a id="idp42045296" class="indexterm"></a> ahora también
ejecutará <code class="literal">fsck</code> en el sistema de ficheros raíz antes de
montarlo. Si el programa elegido para la función «init» es
<code class="literal">systemd</code> y existe un sistema de ficheros separado para
<code class="filename">/usr</code>, también se comprobará con fsck y se montará
<code class="filename">/usr</code>.
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	Deberá cambiar la configuración de <code class="literal">INITRDSTART</code> si el
sistema de ficheros <code class="filename">/usr</code> es un sistema independiente en
un dispositivo RAID y la configuración de <code class="literal">INITRDSTART</code> en
<code class="filename">/etc/default/mdadm</code> no es '<code class="literal">all</code>'. Para
ello, deberá incluir ese dispositivo dentro de la opción.
      </p></li><li class="listitem"><p>
	Si el sistema de ficheros <code class="filename">/usr</code> es un sistema separado
en un volúmen lógico, y la líena para  <code class="filename">/usr</code> en
<code class="filename">/etc/fstab</code> especifica el dispositivo con
<code class="literal">UUID</code> o <code class="literal">LABEL</code>, debe cambiar esta línea
para especificar el dispositivo utilizando el formato
<code class="filename">/dev/mapper/<em class="replaceable"><code>VG</code></em>-<em class="replaceable"><code>LV</code></em></code>
o
<code class="filename">/dev/<em class="replaceable"><code>VG</code></em>/<em class="replaceable"><code>LV</code></em></code>.
      </p></li><li class="listitem"><p>
	No es posible ya montar en modo «bind» el sistema de ficheros
<code class="filename">/usr</code>.
      </p></li><li class="listitem"><p>
	El programa <code class="literal">e2fsck</code> mostrará un aviso durante el arranque
indicando que el tiempo cambió hacia atrás si el RTC («real time clock» o
reloj de tiempo real) está configurado con la hora local y la hora local
está adelantada con respecto a UTC (<a class="ulink" href="https://bugs.debian.org/767040" target="_top">bug #767040</a>). Puede
deshabilitar este aviso introduciendo las siguientes líneas en
<code class="filename">/etc/e2fsck.conf</code>:
      </p><pre class="screen">
[options]
broken_system_clock=1
</pre></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="nownownow"></a>4.7. Qué hacer antes del siguiente reinicio</h2></div></div></div><p>
La actualización «formal» habrá terminado cuando lo haga <code class="literal">apt-get
dist-upgrade</code>, pero hay algunas otras cosas que debería tener en
cuenta <span class="emphasis"><em>antes</em></span> del próximo reinicio del sistema.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
      Cuando se realiza una actualización de Wheezy a Jessie
puede ser una buena idea purgar los paquetes antiguos
<span class="emphasis"><em>antes</em></span> del primer reinicio. En concreto, los programas
de arranque init pueden causar problemas. Consulte <a class="xref" href="ch-upgrading.es.html#purge-removed-packages" title="4.8.1. Purgando los paquetes eliminados">Sección 4.8.1, “Purgando los paquetes eliminados”</a> para los detalles de cómo encontrar y
purgar los paquetes eliminados.
    </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="for-next"></a>4.8. Prepararse para la siguiente distribución</h2></div></div></div><p>
Una vez hecha la actualización hay ciertas cosas que puede hacer para
prepararse para la siguiente versión de la distribución.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Elimine los paquetes redundantes y obsoletos tal y como se describe en <a class="xref" href="ch-upgrading.es.html#obsolete" title="4.10. Paquetes obsoletos">Sección 4.10, “Paquetes obsoletos”</a>. Debería revisar qué archivos de configuración utilizan
éstos y considerar como opción purgarlos para eliminar sus archivos de
configuración. También puede consultar la sección <a class="xref" href="ch-upgrading.es.html#purge-removed-packages" title="4.8.1. Purgando los paquetes eliminados">Sección 4.8.1, “Purgando los paquetes eliminados”</a>.
</p></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="purge-removed-packages"></a>4.8.1. Purgando los paquetes eliminados</h3></div></div></div><p>
    En general es recomendable purgar los paquetes eliminados. Esto es
particularmente necesario si se han eliminado en una actualización anterior
(p.ej. por la actualización a wheezy) o eran parte de paquetes de
terceros. Se han dado muchos casos en los que los programas de init.d
antiguos han causado problemas.
  </p><div class="caution"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Atención]" src="images/caution.png" /></td><th align="left">Atención</th></tr><tr><td align="left" valign="top"><p>
      En general, al purgar un paquete también se purgarán sus ficheros de
registro. Por lo que puede ser recomendable hacer una copia de seguridad de
éstos antes de hacerlo.
    </p></td></tr></table></div><p>
    La siguiente orden mostrará una lista de todos los paquetes eliminados que
puedan haber dejado ficheros de configuración en el sistema (si los hay):
  </p><pre class="screen">
# dpkg -l | awk '/^rc/ { print $2 }'
</pre><p>
    Los paquetes puede eliminarse utilizando <span class="command"><strong>apt-get
purge</strong></span>. Si lo que quiere es eliminarlos todos de un solo golpe,
puede utilizar la siguiente orden:
  </p><pre class="screen">
# apt-get purge $(dpkg -l | awk '/^rc/ { print $2 }')
</pre><p>
    Si utiliza <code class="systemitem">aptitude</code><a id="idp42085792" class="indexterm"></a>, también puede
utilizar las siguientes órdenes de forma alternativa a las listadas antes:
  </p><pre class="screen">
$ aptitude search '~c'
$ aptitude purge '~c'
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="deprecated"></a>4.9. Componentes descontinuados</h2></div></div></div><p>
Con la publicación de la versión 9 de Debian (nombre en clave
stretch) se descontinuará el soporte de algunas
funcionalidades. Los usuarios deberían migrar a otras alternativas para
ahorrarse problemas a la hora de actualizarse a stretch.
</p><p>
Esto incluye las siguientes funcionalidades:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>El paquete <code class="systemitem">hardening-wrapper</code><a id="idp42091872" class="indexterm"></a> se
considera obsoleto y se espera eliminar en Stretch.
		</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="obsolete"></a>4.10. Paquetes obsoletos</h2></div></div></div><p>
La versión jessie, aunque introduce muchos paquetes nuevos, también
retira o deja de distribuir algunos paquetes que estaban disponibles en
wheezy. No existe un mecanismo de actualización para estos
paquetes obsoletos. Aunque nada le impide que siga usando paquetes obsoletos
si así lo desea, el proyecto Debian deja de dar soporte de seguridad para
éstos un año después de la publicación de jessie<a href="#ftn.idp42095136" class="footnote" id="idp42095136"><sup class="footnote">[5]</sup></a> y no se ofrecerá otro tipo de soporte durante este
tiempo. Lo recomendable es reemplazar dichos paquetes con las alternativas
disponibles, si es que existen.
</p><p>
Hay muchas razones por las que un paquete puede haberse eliminado de la
distribución, a saber: no hay mantenimiento por parte de los desarrolladores
originales, no hay ningún desarrollador en Debian que esté interesado en
mantener los paquetes, la funcionalidad que ofrecen la ofrece ahora otros
programas (o una nueva versión), o ya no se consideran aptos para
distribuirse en jessie debido a los errores que presentan. En este
último caso los paquetes puede que sigan estando presentes en la
distribución <span class="quote">“<span class="quote">inestable</span>”</span>.
</p><p>
Es fácil detectar qué paquetes de un sistema actualizado están
<span class="quote">“<span class="quote">obsoletos</span>”</span>, dado que las interfaces de gestión de paquetes los
marcarán como tal. Si está utilizando <span class="command"><strong>aptitude</strong></span> podrá ver
el listado de dichos paquetes en la entrada <span class="quote">“<span class="quote">Paquetes obsoletos y
creados localmente</span>”</span>.
</p><p>
A menudo podrá encontrar más información de por qué un paquete fue eliminado
en el <a class="ulink" href="https://bugs.debian.org/" target="_top">Sistema de seguimiento de fallos de
Debian</a>. Debería consultar tanto los informes de fallos del propio
paquete como los informes de fallos archivados del <a class="ulink" href="https://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=ftp.debian.org&amp;archive=yes" target="_top">pseudo-paquete
ftp.debian.org</a>.
</p><p>
  La lista de los paquetes obsoletos incluye:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
	<code class="systemitem">postgresql-9.1</code><a id="idp42104816" class="indexterm"></a>, su reemplazo es
<code class="systemitem">postgresql-9.4</code><a id="idp42106512" class="indexterm"></a>. Una vez ha terminado
la actualización del sistema operativo debería planificar la actualización
de sus clústers de bases de datos PostgreSQL 9.1 a la versión 9.4 utilizando
para ello la herramienta <span class="command"><strong>pg_upgradecluster</strong></span>. Los usuarios
del lenguaje procedimental PL/perl disponen en jessie de un paquete
<code class="systemitem">postgresql-plperl-9.1</code><a id="idp42109392" class="indexterm"></a> actualizado
que está enlazado con la versión en jessie de libperl para poder actualizar
a la nueva versión de Perl y, al mismo tiempo, facilitando que las funciones
de bases de datos en PL/perl puedan utilizarse mientras no se realice la
actualización de la base de datos.
      </p></li><li class="listitem"><p>
        
        
<code class="systemitem">python3.2</code><a id="idp42116480" class="indexterm"></a>, sustituido por
<code class="systemitem">python3.4</code><a id="idp42118176" class="indexterm"></a> (hay soporte de la versión
2.7 tanto en wheezy como en jessie).
      </p></li><li class="listitem"><p>
        <code class="systemitem">ruby1.8</code><a id="idp42120768" class="indexterm"></a> y <code class="systemitem">ruby1.9.1</code><a id="idp42122432" class="indexterm"></a>, sustituido por <code class="systemitem">ruby2.1</code><a id="idp42124128" class="indexterm"></a>. Se recomienda instalar el paquete
<code class="systemitem">ruby</code><a id="idp42125840" class="indexterm"></a> para mantener el sistema
actualizado siempre a la última versión de ruby.
      </p></li><li class="listitem"><p>
        <code class="systemitem">mplayer</code><a id="idp42128448" class="indexterm"></a>; las alternativas son
<code class="systemitem">mplayer2</code><a id="idp42130144" class="indexterm"></a>, y <code class="systemitem">mpv</code><a id="idp42131808" class="indexterm"></a> (nuevo en jessie).  El primero de
éstos es en general compatible con mplayer desde el punto de vista de las
opciones de línea de órdenes y de configuación (y añade algunas nuevas
funcionalidades). La segunda opción proporciona muchas más funcionalidades
nuevas y mejoras, y está activamente mantenido por sus desarrolladores
originales.
      </p></li><li class="listitem"><p>
        <code class="systemitem">openoffice.org</code><a id="idp42134896" class="indexterm"></a>, sustituido por
<code class="systemitem">libreoffice</code><a id="idp42136592" class="indexterm"></a>
      </p></li><li class="listitem"><p>
        <code class="systemitem">squid</code><a id="idp42139024" class="indexterm"></a>, sustituido por <code class="systemitem">squid3</code><a id="idp42140720" class="indexterm"></a>
      </p></li><li class="listitem"><p>
        <code class="systemitem">libjpeg-progs</code><a id="idp42143152" class="indexterm"></a>, sustituido por
<code class="systemitem">libjpeg-turbo-progs</code><a id="idp42144848" class="indexterm"></a>
      </p></li><li class="listitem"><p>
        <code class="systemitem">openjdk-6-*</code><a id="idp42147280" class="indexterm"></a>, sustituido por
<code class="systemitem">openjdk-7-*</code><a id="idp42148976" class="indexterm"></a>
      </p></li></ul></div><p>
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dummy"></a>4.10.1. Paquetes «dummy»</h3></div></div></div><p>
Se han divido algunos paquetes de wheezy en más de un paquete en
jessie, generalmente para mejorar la mantenibilidad del sistema. Para
facilitar el proceso de actualización en estos casos se ofrecen paquetes
<span class="quote">“<span class="quote">dummy</span>”</span> (tontos, N. del T.) dentro de jessie. Éstos son
paquetes vacíos que tienen el mismo nombre que el anterior paquete en
wheezy con un conjunto de dependencias que asegura que se instalen
los nuevos paquetes. Estos paquetes <span class="quote">“<span class="quote">dummy</span>”</span> se consideran
redundantes tras la actualización y puede eliminarlos una vez haya
actualizado el sistema.
</p><p>
La mayoría (pero no todas) de las descripciones de los paquetes «dummy»
indican su propósito. Sin embargo, las descripciones de estos paquetes no
son uniformes así que puede que encuentre útil utilizar
<span class="command"><strong>deborphan</strong></span> con las opciones
<code class="literal">--guess-<em class="replaceable"><code>*</code></em></code>
(p.ej. <code class="literal">--guess-dummy</code>) para detectar los que están
instalados en su sistema. Tenga en cuenta que algunos paquetes «dummy» no
están pensados para ser eliminados después de una actualización sino que se
utilizan para poder seguir a lo largo del tiempo la versión más reciente de
un programa.
</p></div></div><div class="footnotes"><br /><hr width="100" align="left" /><div id="ftn.idp41677520" class="footnote"><p><a href="#idp41677520" class="para"><sup class="para">[1] </sup></a>Si la prioridad de debconf se fija al valor «muy alto» no se le realizarán
preguntas de configuración, pero los servicios que dependen de las
respuestas por omisión pueden no arrancar si las respuestas por omisión no
aplican a su sistema.</p></div><div id="ftn.idp41679216" class="footnote"><p><a href="#idp41679216" class="para"><sup class="para">[2] </sup></a>Por ejemplo: servicios DNS ó DHCP, especialmente si no existe ninguna
redundancia o mecanismo de alta disponibilidad. En el caso de DHCP los
usuarios pueden quedarse desconectados de la red si el tiempo de
mantenimiento de las direcciones es inferior al tiempo que tarda el proceso
de actualización en completarse.</p></div><div id="ftn.idp41695696" class="footnote"><p><a href="#idp41695696" class="para"><sup class="para">[3] </sup></a> Esta funcionalidad puede deshabilitarse si añade el parámetro
<code class="literal">panic=0</code> dentro de los parámetros del arranque.  </p></div><div id="ftn.idp41784000" class="footnote"><p><a href="#idp41784000" class="para"><sup class="para">[4] </sup></a> El sistema de gestión de paquetes no permite por regla general que un
paquete elimine o reemplace un archivo que pertenezca a otro paquete a menos
que se haya indicado que el nuevo paquete reemplaza al antiguo.  </p></div><div id="ftn.idp42095136" class="footnote"><p><a href="#idp42095136" class="para"><sup class="para">[5] </sup></a> O hasta que se publique una nueva versión en ese tiempo. Habitualmente sólo
se da soporte a dos versiones estables en un momento determinado.  </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch-installing.es.html"><img src="images/prev.png" alt="Anterior" /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch-information.es.html"><img src="images/next.png" alt="Siguiente" /></a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 3. Sistema de instalación </td><td width="20%" align="center"><a accesskey="h" href="index.es.html"><img src="images/home.png" alt="Inicio" /></a></td><td width="40%" align="right" valign="top"> Capítulo 5. Problemas que debe tener en cuenta para jessie</td></tr></table></div></body></html>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Глава 5. Что нужно знать о jessie</title><link rel="stylesheet" type="text/css" href="debian.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.ru.html" title="Информация о выпуске Debian 8 (jessie) для архитектуры 64-bit PC" /><link rel="up" href="index.ru.html" title="Информация о выпуске Debian 8 (jessie) для архитектуры 64-bit PC" /><link rel="prev" href="ch-upgrading.ru.html" title="Глава 4. Обновление с Debian 7 (wheezy)" /><link rel="next" href="ch-moreinfo.ru.html" title="Глава 6. Дополнительная информация о Debian" /><meta xmlns="" name="viewport" content="width=device-width, initial-scale=1" /><style xmlns="" type="text/css">
      body {
        background-repeat: no-repeat;
        background-image: none;
      }
    </style></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Глава 5. Что нужно знать о jessie</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch-upgrading.ru.html"><img src="images/prev.png" alt="Пред." /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch-moreinfo.ru.html"><img src="images/next.png" alt="След." /></a></td></tr></table><hr /></div><div xml:lang="ru" class="chapter" lang="ru"><div class="titlepage"><div><div><h1 class="title"><a id="ch-information"></a>Глава 5. Что нужно знать о jessie</h1></div></div></div><div class="toc"><p><strong>Содержание</strong></p><dl class="toc"><dt><span class="section"><a href="ch-information.ru.html#limited-security-support">5.1. Ограничения поддержки безопасности</a></span></dt><dd><dl><dt><span class="section"><a href="ch-information.ru.html#browser-security">5.1.1. Состояние безопасности веб-браузеров</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#libv8">5.1.2. Отсутствие поддержки безопасности экосистемы libv8 и Node.js</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#mediawiki-security">5.1.3. Раннее окончание поддержки безопасности MediaWiki</a></span></dt></dl></dd><dt><span class="section"><a href="ch-information.ru.html#openssh">5.2. По умолчанию сервер OpenSSH настроен с параметром "PermitRootLogin
without-password"</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#puppet">5.3. Совместимость Puppet 2.7 / 3.7</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#php-incompat">5.4. Обновление PHP 5.6 изменило поведение</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#apache-httpd-incomat">5.5. Несовместимые изменения в Apache HTTPD 2.4</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#systemd-upgrade-default-init-system">5.6. Обновление приводит к установке новой системы инициализации по умолчанию для
Jessie</a></span></dt><dd><dl><dt><span class="section"><a href="ch-information.ru.html#systemd-auto-mounts-incompat">5.6.1. Более строгая обработка ошибок монтирования во время загрузки под systemd</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#idp62796208">5.6.2. Устаревшие сценарии инициализации должны быть вычищены</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#idp62800976">5.6.3. Изменённые локально сценарии инициализации требуется перенести на systemd</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#plymouth-required-for-boot-prompts">5.6.4. Для Plymouth при загрузке под systemd требуется boot-prompts</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#idp62823936">5.6.5. Взаимодействие между logind и acpid</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#systemd-cryptsetup-unsupported-features">5.6.6. Неподдерживаемые возможности crypttab под systemd (напр., "keyscript=...")</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#systemd-sigkill-regression">5.6.7. systemd: слишком рано производится отправка SIGKILL [исправлено в 8.1]</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#systemd-halt-behavior">5.6.8. systemd: поведение команды 'halt'</a></span></dt></dl></dd><dt><span class="section"><a href="ch-information.ru.html#required-kernel-config-options">5.7. Требуемые для Jessie опции настроек ядра</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#lxc-upgrade-issues">5.8. Обновление узлов и контейнеров LXC</a></span></dt><dd><dl><dt><span class="section"><a href="ch-information.ru.html#issues-lxc-wheezy-host">5.8.1. Обновление гостевых систем LXC, работающих на узлах Wheezy</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#issues-lxc-jessie-host">5.8.2. Обновление гостевых систем LXC, работающих на узлах Jessie</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#issues-lxc-further-docu">5.8.3. Дополнительная информация</a></span></dt></dl></dd><dt><span class="section"><a href="ch-information.ru.html#cryptsetup-luks-whirlpool">5.9. Ручная миграция зашифрованных с помощью LUKS whirpool дисков (нестандартные
настройки)</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#gnome-3d">5.10. Для рабочего стола GNOME требуется базовая поддержка 3D графики</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#gnome-fglrx">5.11. Рабочий стол GNOME не работает с проприетарным драйвером FGLRX от AMD</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#gnome-shortcuts">5.12. Изменения сочетаний клавиш по умолчанию в GNOME</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#base-passwd-hardening">5.13. Изменения командной оболочки по умолчанию для системных пользователей,
предоставляемых пакетом <code class="systemitem">base-passwd</code></a></span></dt><dt><span class="section"><a href="ch-information.ru.html#kde-kontact">5.14. Переход на новый менеджер электронной почты, календаря и списка контактов
для KDE (Kontact)</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#missing-virtual-consoles">5.15. Отсутствие виртуальных консолей ("getty"s) при использовании нескольких
окружений рабочего стола</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#idp62949984">5.16. "VGA signal out of range" / пустой экран при загрузке с помощью grub-pc</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#idp62955728">5.17. Более строгая проверка файлов cron в crontab</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#perl-module-load-permissions">5.18. Изменение в обработке нечитаемых путей модулей в пакете <code class="systemitem">perl</code></a></span></dt><dt><span class="section"><a href="ch-information.ru.html#ganeti-upgrade-issues">5.19. Обновление кластеров Ganeti</a></span></dt><dd><dl><dt><span class="section"><a href="ch-information.ru.html#ganeti-upgrade-DRBD-UUIDs">5.19.1. Проблема с обновлением кластеров Ganeti с экземплярами на DRBD [исправлена в
8.1]</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#ganeti-upgrade-general">5.19.2. Общие сведения об обновлении кластеров Ganeti</a></span></dt></dl></dd><dt><span class="section"><a href="ch-information.ru.html#idp62979744">5.20. Новые требования для выполнения файлов в Samba4</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#cryptsetup-busybox">5.21. Cryptsetup может прерывать загрузку при использовании опции BUSYBOX=n</a></span></dt><dt><span class="section"><a href="ch-information.ru.html#squid-incompat">5.22. Обратная совместимость изменений в веб-прокси Squid</a></span></dt></dl></div><p>
Иногда изменения, внесённые в новый выпуск, приводят к побочным эффектам,
которых нельзя избежать без появления ошибок где-то ещё. Этот раздел
описывает проблемы, которые уже известны нам. Прочитайте также список
известных ошибок, соответствующую документацию на пакеты, отчёты об ошибках
и другую информацию, указанную в <a class="xref" href="ch-moreinfo.ru.html#morereading" title="6.1. Что ещё можно прочитать">Раздел 6.1, «Что ещё можно прочитать»</a>.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="limited-security-support"></a>5.1. Ограничения поддержки безопасности</h2></div></div></div><p>
    Для некоторых пакетов Debian не может гарантировать какой-либо минимальной
поддержки исправлений безопасности. О таких пакетах написано в следующих
разделах.
  </p><p>
    Заметьте, что пакет <code class="systemitem">debian-security-support</code><a id="idp62683808" class="indexterm"></a>, добавленный в
Jessie, помогает отслеживать статус поддержки исправлений
безопасности для установленных пакетов.
  </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="browser-security"></a>5.1.1. Состояние безопасности веб-браузеров</h3></div></div></div><p>
В Debian 8 включено несколько браузерных движков (browser engines),
в которых постоянно находят большое количество уязвимостей. Из-за этого и
частичного отсутствия авторской поддержки предыдущих версий возникают
большие сложности с переносом исправлений безопасности в старые
версии. Также из-за библиотечных зависимостей невозможно произвести
обновление до новых версий. В силу этого, браузеры, созданные на основе
механизмов webkit, qtwebkit и khtml, включены в Jessie, но не
обладают полной поддержкой безопасности. Данные браузеры лучше не
использовать для просмотра ненадёжных сайтов.
</p><p>
Для повседневной работы рекомендуется использовать браузеры Iceweasel или
Chromium.
</p><p>
Chromium, хотя он основан на кодовой базе Webkit, является производным
пакетом, который будет поддерживаться в актуальном состоянии путём сборки
текущих выпусков Chromium для стабильного выпуска. Iceweasel и Icedove также
будут поддерживаться в актуальном состоянии путём сборки текущих выпусков
версии ESR для стабильного выпуска.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="libv8"></a>5.1.2. Отсутствие поддержки безопасности экосистемы libv8 и Node.js</h3></div></div></div><p>
   Node.js представляет собой платформу, собранную на основе <code class="systemitem">libv8-3.14</code><a id="idp62692576" class="indexterm"></a>, в этом пакете часто обнаруживаются
проблемы безопасности, но в настоящее время ни добровольцы, ни команда
безопасности не достаточно заинтересованы и не хотят тратить большое
количество времени, требуемого для решения этих проблем.
</p><p>
   К сожалению, это означает, что пакеты <code class="systemitem">libv8-3.14</code><a id="idp62695408" class="indexterm"></a>, <code class="systemitem">nodejs</code><a id="idp62697072" class="indexterm"></a>, а также другие пакеты node-* указанной
экосистемы не должны использоваться с недоверенным содержимым, таким как
непроверенные данные из сети Интернет.
</p><p>
   Кроме того, эти пакеты не будут получать обновлений безопасности в течении
жизненного цикла Jessie.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mediawiki-security"></a>5.1.3. Раннее окончание поддержки безопасности MediaWiki</h3></div></div></div><p>
  Поддержка безопасности в основной ветке разработки версии 1.19 пакета
<code class="systemitem">mediawiki</code><a id="idp62701872" class="indexterm"></a> будет прекращена в течении
ожидаемого жизненного цикла Jessie. Пакет <code class="systemitem">mediawiki</code><a id="idp62703792" class="indexterm"></a> входит в Jessie для удовлетворения
зависимостей других пакетов.
</p><p>
  Поддержка безопасности пакета <code class="systemitem">mediawiki</code> будет
прекращена вместе с прекращением поддержки Wheezy в апреле 2016 год.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="openssh"></a>5.2. По умолчанию сервер OpenSSH настроен с параметром "PermitRootLogin
without-password"</h2></div></div></div><p>
    Для улучшения безопасности настроек по умолчанию файл настроек пакета
<code class="systemitem">openssh-server</code><a id="idp62709168" class="indexterm"></a> содержит параметр
"PermitRootLogin without-password". Если вы используете аутентификацию
пользователя <code class="literal">root</code> по паролю, то это изменение вас
коснётся.
  </p><p>
    Пакет <code class="systemitem">openssh-server</code><a id="idp62712464" class="indexterm"></a> при обновлении
попытается обнаружить подобные случаи и увеличит приоритет приглашения
debconf.
  </p><p>
    Если вы хотите оставить аутентификацию по паролю для пользователя
<code class="literal">root</code>, вы можете автоматически ответить на соответствующий
вопрос обновления, используя следующую команду:
    </p><pre class="screen">
# Фактически, значение "false" здесь верно, хотя и вводит в заблуждение.
$ echo 'openssh-server openssh-server/permit-root-login boolean false' | debconf-set-selections
</pre><p>
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="puppet"></a>5.3. Совместимость Puppet 2.7 / 3.7</h2></div></div></div><p>
  Если вы используете Puppet, вам следует помнить, что в Puppet 3.7
отсутствует обратная совместимость с Puppet 2.7. Среди прочих вещей были
изменены и правила области действия, также были удалены многие устаревшие
конструкты. Информацию о некоторых изменения можно получить в <a class="ulink" href="https://docs.puppetlabs.com/puppet/3/reference/release_notes.html#puppet-300" target="_top">информации
о выпуске Puppet 3.x</a>, но следует помнить и о том, что в версии 3.7
имеются дополнительные изменения, не указанные в этом документе.
</p><p>
  Проверка файлов журнала вашего текущего puppetmaster на предмент наличия в
них предупреждений об использовании устаревших возможностей и разрешение
всех таких предупреждений до выполнения обновления значительно облегчит
процесс обновления. Также вы можете дополнительно протестировать файлы
настроек с каким-нибудь инструментом типа <a class="ulink" href="https://github.com/duritong/puppet_catalog_test" target="_top">Puppet catalog
test</a>, что также позволит обнаружить потенциальные проблемы до
выполнения обновления.
</p><p>
  При обновлении системы управления Puppet с Wheezy до Jessie, вы должны
убедиться, что соответствующий puppetmaster запускает Puppet версии
3.7. Если мастер запускает <code class="systemitem">puppetmaster</code><a id="idp62724288" class="indexterm"></a> из Wheezy, то к управляемой системе
Jessie невозможно будет подключиться.
</p><p>
  Дополнительную информацию о несовместимых изменениях можно найти в <a class="ulink" href="https://projects.puppetlabs.com/projects/puppet/wiki/Telly_Upgrade_Issues" target="_top">проблемах
обновления</a>, а также в <a class="ulink" href="http://somethingsinistral.net/blog/the-angry-guide-to-puppet-3/" target="_top">"Гневном
руководстве по Puppet 3"</a>.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="php-incompat"></a>5.4. Обновление PHP 5.6 изменило поведение</h2></div></div></div><p>
    Обновление до Jessie включает в себя обновление PHP с версии 5.4 до версии
5.6. Это может задеть локальные сценарии PHP, рекомендуется проверить эти
сценарии до выполнения обновления. Ниже приведён список некоторых изменения.
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        Для предотвращения атак по принципу человек-в-середине против зашифрованных
соединений клиентские потоки данных теперь по умолчанию выполняют проверку
сертификатов узлов.
      </p><p>
        В результате существующий код, использующий обёртки ssl:// или tls:// для
потоков (напр.,  file_get_contents(), fsockopen(), stream_socket_client())
больше не могут успешно подключиться к узлу без отключения проверки узлов
вручную с помощью опции контекстов потоков "verify_peer".
      </p><p>
        Дополнительную информацию об этой конкретной проблеме см. в <a class="ulink" href="https://wiki.php.net/rfc/tls-peer-verification" target="_top">этом документе</a>.
      </p></li><li class="listitem"><p>
        В PHP произошли изменения в обработке нечувствительности к регистру:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
            Вся внутренняя нечувствительная к регистру обработка классов, функций и имён
констант выполняется в соответствиями с правилами ASCII. Текущие настройки
локали игнорируются.
          </p></li><li class="listitem"><p>
            Ключевые слова "self", "parent" и "static" теперь всегда чувствительны к
регистру.
          </p></li><li class="listitem"><p>
            Функция json_decode() более не принимает варианты булевых значений в нижнем
регистре.
          </p></li></ul></div></li><li class="listitem"><p>
        logo-варианты функций GUID (напр., php_logo_guid()) были удалены.
      </p></li><li class="listitem"><p>
        Больше нельзя перезаписывать ключи в статичных скалярных массивах. Пример и
дополнительную информацию об этой проблеме см. в <a class="ulink" href="https://bugs.php.net/bug.php?id=66015" target="_top">PHP, ошибка 66015</a>.
      </p></li><li class="listitem"><p>
        Функции mcrypt_encrypt(), mcrypt_decrypt() и mcrypt_{MODE}()  более не
принимают ключи или IV некорректного размера. Более того, IV теперь
требуется в том случае, если он нужен используемому блочному шифру.
      </p></li><li class="listitem"><p>
        По юридическим причинам реализация JSON, поставляемая в составе PHP, была
заменена на версию, предоставляемую PECL-модулем "jsonc". Код,
предполагающий от грамматического разбора JSON чего-то особенного, следует
проверить по совместимость.
      </p></li><li class="listitem"><p>
        The "short_open_tag" setting is now disabled by default.  The ASP variant of
the short tags ("&lt;%" and "%&gt;") are scheduled for removal in PHP7.
      </p></li></ul></div><p>
    Дополнительную информацию и полный список потенциальных проблем см. в списке
изменений без обратной несовместимости для PHP <a class="ulink" href="https://php.net/manual/en/migration55.incompatible.php" target="_top">5.5</a> и
<a class="ulink" href="https://php.net/manual/en/migration56.incompatible.php" target="_top">5.6</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="apache-httpd-incomat"></a>5.5. Несовместимые изменения в Apache HTTPD 2.4</h2></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
      Данный раздел касается только тех систем, в которых установлен сервер Apache
HTTPD, который настроен вручную.
    </p></td></tr></table></div><p>
    В настройке сервера Apache HTTPD версии 2.4 произошло ряд изменений. Со
стороны основной ветки разработки был изменён синтаксис файлов настройки. В
особенности, директивы управления доступом были существенно изменены,
требуется вручную перейти на использование новых директив.
  </p><p>
    Модуль <code class="literal">mod_access_compat</code> указан в руководстве по
обновлению из основной ветки разработки как возможная альтернатива такого
перехода. Тем не менее, сообщается, что такой способ не всегда может
работать.
  </p><p>
    Управление файлами настройки в пакетах Debian также было изменено. В
частности, все файлы настройки и сайты должны оканчиваться на ".conf", в
этом случае по умолчанию будет произведён их грамматический разбор. Данное
изменение заменяет <code class="filename">/etc/apache2/conf.d/</code>.
  </p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
      Во время обновления вы можете увидеть предупреждения о файлах настроек,
размещённых в <code class="filename">/etc/apache2/conf.d/</code>, которые
предоставляются пакетами из состава Debian. Данное предупреждение является
неизбежным, но безвредным, поскольку такие пакеты переместят свои настройки
по завершению обновления (что обычно происходит уже после того, как Apache
HTTPD выводит данное предупреждение).
    </p></td></tr></table></div><p>
    Дополнительную информацию и полный список изменений можно найти в следующих
документах:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Документ <a class="ulink" href="http://httpd.apache.org/docs/2.4/upgrading.html" target="_top">обновление до 2.4 с
2.2</a>, предоставляемый основной веткой разработки Apache.
      </p></li><li class="listitem"><p>
        Файл <code class="filename">/usr/share/doc/apache2/NEWS.Debian.gz</code>,
предоставляемый пакетом <code class="systemitem">apache2</code><a id="idp62766624" class="indexterm"></a>.
      </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="systemd-upgrade-default-init-system"></a>5.6. Обновление приводит к установке новой системы инициализации по умолчанию для
Jessie</h2></div></div></div><p>
    Jessie поставляется с <code class="systemitem">systemd-sysv</code><a id="idp62770272" class="indexterm"></a> в
качестве системы инициализации <span class="emphasis"><em>по умолчанию</em></span>. Этот пакет
устанавливается автоматически при выполнении обновления.
  </p><p>
    Если вы предпочитаете другую систему инициализации, такую как <code class="systemitem">sysvinit-core</code><a id="idp62773424" class="indexterm"></a> или <code class="systemitem">upstart</code><a id="idp62775120" class="indexterm"></a>, рекомендуется установить закрепление
(pinning) для APT до выполнения обновления. Также это может потребоваться в
случае обновления LXC-контейнеров до обновления самого узла. В этом случае
обратитесь к <a class="xref" href="ch-information.ru.html#issues-lxc-wheezy-host" title="5.8.1. Обновление гостевых систем LXC, работающих на узлах Wheezy">Раздел 5.8.1, «Обновление гостевых систем LXC, работающих на узлах Wheezy»</a>.
  </p><p>Например, чтобы запретить установку пакета <code class="systemitem">systemd-sysv</code><a id="idp62778448" class="indexterm"></a> во время обновления, вы можете
создать файл <code class="filename">/etc/apt/preferences.d/local-pin-init</code> со
следующим содержимым:
  </p><pre class="screen">
Package: systemd-sysv
Pin: release o=Debian
Pin-Priority: -1
</pre><div class="caution"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Внимание]" src="images/caution.png" /></td><th align="left">Внимание</th></tr><tr><td align="left" valign="top"><p>
      Следует помнить, что некоторые пакеты могут работать хуже, либо могут не
иметь некоторой функциональности при использовании системы инициализации,
отличной от системы инициализации по умолчанию.
    </p></td></tr></table></div><p>
    Заметьте, что обновление может привести к установке пакетов, содержащих
"systemd" в названии пакета даже несмотря на закрепление APT. Сами по себе
они <span class="emphasis"><em>не</em></span> изменяют вашу систему инициализации. Чтобы
использовать systemd в качестве системы инициализации, следует сначала
установить пакет <code class="systemitem">systemd-sysv</code><a id="idp62785104" class="indexterm"></a>.
  </p><p>
    Если APT или aptitude испытывают проблемы с вычислением пути обновления с
использованием закрепления, вам может потребоваться вручную установить и
<code class="systemitem">sysvinit-core</code><a id="idp62787744" class="indexterm"></a>, и <code class="systemitem">systemd-shim</code><a id="idp62789440" class="indexterm"></a>.
  </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="systemd-auto-mounts-incompat"></a>5.6.1. Более строгая обработка ошибок монтирования во время загрузки под systemd</h3></div></div></div><p>
    Новая система инициализации по умолчанию, <code class="systemitem">systemd-sysv</code><a id="idp62792768" class="indexterm"></a>, строже обрабатывает ошибки
монтирования разделов в режиме "auto" во время загрузки по сравнению с
sysvinit. Если не удаётся смонтировать раздел в режиме "auto" (без опции
"nofail"), systemd перейдёт в консоль восстановления вместо того, чтобы
продолжить загрузку.
  </p><p>
    Рекомендуется всем извлекаемым точкам монтирования или разделам с режимом
"optional" (напр., некритичные сетевые диски), указанным в
<code class="filename">/etc/fstab</code> добавить либо опцию "noauto", либо "nofail".
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp62796208"></a>5.6.2. Устаревшие сценарии инициализации должны быть вычищены</h3></div></div></div><p>
    Если вы выполняете обновление с предыдущего выпуска, то ваша система может
содержать устаревшие сценарии, предоставленные (теперь) устаревшими
пакетами. Эти сценарии могут содержать неточности в метаданных зависимостей,
либо вообще не содержать таких метаданных, что может приводить к циклам
зависимостей при настройке инициализации.
  </p><p>
    Чтобы избежать этого, рекомендуется проверить список пакетов в состоянии
"rc" ("удалён, но файлы настроек остаются в системе") и вычистить по меньшей
мере все их сценарии инициализации.
  </p><p>
    Подробную информацию о поиске и вычистке удалённых пакетов см. в <a class="xref" href="ch-upgrading.ru.html#purge-removed-packages" title="4.8.1. Вычистка удалённых пакетов">Раздел 4.8.1, «Вычистка удалённых пакетов»</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp62800976"></a>5.6.3. Изменённые локально сценарии инициализации требуется перенести на systemd</h3></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
      Данный раздел касается только тех систем, в которых предоставленные Debian
сценарии инициализации были изменены локально.
    </p></td></tr></table></div><p>
    Если у вас имеются предоставленные Debian, но изменённые вами сценарии
инициализации, они могут быть заменены юнит-файлами systemd или самой
systemd. Если у вас установлен debsums, вы можете проверить, были ли
локально изменены какие-либо сценарии инициализации, используя следующую
команду:
  </p><pre class="screen">
debsums -c -e | grep ^/etc/init.d
</pre><p>Либо же в случае отсутствия debsums можно использовать следующее.
  </p><pre class="screen">
dpkg-query --show -f'${Conffiles}' | sed 's, /,\n/,g' | \
  grep /etc/init.d | awk 'NF,OFS="  " {print $2, $1}' | \
  md5sum --quiet -c
</pre><p>
    Если либо командные флаги любых файлов и соответствующие им пакеты,
<span class="emphasis"><em>либо</em></span> пакет <code class="systemitem">systemd</code><a id="idp62807872" class="indexterm"></a> предоставляет юнит-файл systemd для
такой службы, юнит-файл systemd получит приоритет перед локально изменённым
сценарием инициализации. В зависимости от природы внесённого изменения,
имеются разные пути выполнения миграции.
  </p><p>
    Если это необходимо, можно переопределить юнит-файл systemd так, чтобы он
запускал сценарий sysvinit. Дополнительную информацию о юнит-файлах systemd
можно получить на приведённых ниже ресурсах.
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        <a class="ulink" href="http://0pointer.de/blog/projects/systemd-for-admins-3.html" target="_top">Как
преобразовать сценарий инициализации SysV в сервисный файл systemd? </a>
      </p></li><li class="listitem"><p>
        <a class="ulink" href="http://0pointer.de/public/systemd-man/systemd.special.html" target="_top">systemd.special
— специальные юниты systemd</a>
      </p></li><li class="listitem"><p><a class="ulink" href="http://www.freedesktop.org/wiki/Software/systemd/MyServiceCantGetRealtime/" target="_top">Моя
служба не может работать в реальном времени!</a> (также содержит
короткое описание вызова сценариев инициализации из юнит-файлов)</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="plymouth-required-for-boot-prompts"></a>5.6.4. Для Plymouth при загрузке под systemd требуется boot-prompts</h3></div></div></div><p>
    Если ваш процесс загрузки интерактивен (напр., требуется ввести пароль для
зашифрованного диска), убедитесь, что у вас установлен <span class="emphasis"><em>и
настроен</em></span> пакет <code class="systemitem">plymouth</code><a id="idp62819072" class="indexterm"></a>
. За дополнительной информацией о том, как настроить plymouth обратитесь к
файлу <code class="filename">/usr/share/doc/plymouth/README.Debian</code>.
  </p><p>
    Без пакета <code class="systemitem">plymouth</code><a id="idp62822224" class="indexterm"></a> приглашение при
загрузке может не появиться. Согласно сообщениям пользователей, приглашение
cryptsetup всё ещё принимает ввод, но остаётся невидимым. Если у вас
возникла эта проблема, ввод правильного пароля всё ещё может сработать.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp62823936"></a>5.6.5. Взаимодействие между logind и acpid</h3></div></div></div><p>
    Событи ACPI могут обрабатываться logind или acpid. Настройка обеих служб на
обработку событий разным способом может приводить к нежелательным
результатам.
  </p><p>
    Рекомендуется перенести любые настройки, отличные от настроек по умолчанию,
на logind и удалить acpid. С другой стороны, также можно настроить logind на
игнорирование событий ACPI, добавив следующие строки:
  </p><pre class="screen">
HandlePowerKey=ignore
HandleSuspendKey=ignore
HandleHibernateKey=ignore
HandleLidSwitch=ignore
</pre><p>
    в файл <code class="filename">/etc/systemd/logind.conf</code>. Заметьте, что это
может изменить поведение окружений рабочего стола, которые работают с
logind.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="systemd-cryptsetup-unsupported-features"></a>5.6.6. Неподдерживаемые возможности crypttab под systemd (напр., "keyscript=...")</h3></div></div></div><p>
    Некоторые возможности cryptsetup, к сожалению, не поддерживаются при
использовании systemd в качестве системы инициализации. Не поддерживаются
следующие возможности:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>precheck</p></li><li class="listitem"><p>check</p></li><li class="listitem"><p>checkargs</p></li><li class="listitem"><p>noearly</p></li><li class="listitem"><p>loud</p></li><li class="listitem"><p>keyscript</p></li></ul></div><p>
    Если ваша система использует какую-то из этих возможностей для осуществления
загрузки, вам придётся использовать sysvinit (пакет <code class="systemitem">sysvinit-core</code><a id="idp62837840" class="indexterm"></a>) в качестве системы
инициализации. Обратитесь к <a class="xref" href="ch-information.ru.html#systemd-upgrade-default-init-system" title="5.6. Обновление приводит к установке новой системы инициализации по умолчанию для Jessie">Раздел 5.6, «Обновление приводит к установке новой системы инициализации по умолчанию для
Jessie»</a>, чтобы получить информацию
о том, как изменить систему инициализации.
  </p><p>
    Вы можете проверить использование этих опций в вашей системе, запустив
следующую команду:
  </p><pre class="screen">
grep -e precheck -e check -e checkargs -e noearly -e loud -e keyscript /etc/crypttab
</pre><p>
    Если вы не увидите какого-либо вывода приведённой выше команды, то в вашей
системе не используются опции, которые могут вызывать проблемы.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="systemd-sigkill-regression"></a>5.6.7. systemd: слишком рано производится отправка SIGKILL [исправлено в 8.1]</h3></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
      Эта проблема была исправлена в ревизии 8.1 выпуска Jessie.
    </p></td></tr></table></div><p>
    О регрессе в systemd сообщили после выпуска jessie.  Ошибка возникает во
время выключения или перезагрузки, systemd не предоставляет достаточную
задержку до отправления процессам сигнала SIGKILL.  Это может приводить к
потере данных тех процессов, которые не сохранили все данные в момент
запуска перезагрузки (напр., работающие базы данных).
  </p><p>
    Эта проблема отслеживается в отчёте об <a class="ulink" href="https://bugs.debian.org/784720" target="_top">ошибке
Debian #784720</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="systemd-halt-behavior"></a>5.6.8. systemd: поведение команды 'halt'</h3></div></div></div><p>
    Реализация команды <span class="command"><strong>halt</strong></span> в <code class="systemitem">sysvinit</code><a id="idp62849920" class="indexterm"></a> тоже выключает машину.  Реализация
<code class="systemitem">systemd-sysv</code><a id="idp62851728" class="indexterm"></a> останавливает систему,
но не выключает машину. Для остановки машины и её выключения, используйте
команду <span class="command"><strong>poweroff</strong></span>.
  </p><p>
    См. также <a class="ulink" href="https://bugs.debian.org/760923" target="_top">сообщение об ошибке Debian
#760923</a>
  </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="required-kernel-config-options"></a>5.7. Требуемые для Jessie опции настроек ядра</h2></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
      Данный раздел касается только тех, что желает скомпилировать собственное
ядро. Если вы используете ядра, скомпилированные Debian, можете пропустить
этот раздел.
    </p></td></tr></table></div><p>
    Для Jessie требуются, либо рекомендуются следующие опции настройки ядра (в
дополнение к тем, что относятся к предыдущим выпускам):
  </p><pre class="screen">
# Требуется для udev
CONFIG_DEVTMPFS=y
# Требуется для *некоторых* служб systemd
CONFIG_DEVPTS_MULTIPLE_INSTANCES=y
# Требуется "bluez" (GNOME)
CONFIG_BT=y
# Требуется для cups + systemd.
CONFIG_PPDEV=y
</pre><p>
    Службы systemd, которым требуется CONFIG_DEVPTS_MULTIPLE_INSTANCES=y, обычно
содержат по меньшей мере одну из следующих директив:
  </p><pre class="screen">
PrivateTmp=yes
PrivateDevices=yes
PrivateNetwork=yes
ProtectSystem=yes
</pre><p>
    Если вы не используете systemd, либо абсолютно уверены в том, что ни одна из
служб systemd не будет использовать хотя бы одну из приведённых выше
директив, то эта опция настройки ядра не требуется для вашей системы.
  </p><p>
    Дополнительную информацию о требованиях см. в разделе "REQUIREMENTS" файла
<a class="ulink" href="https://sources.debian.net/src/systemd/jessie/README/" target="_top">README</a>
из пакета <code class="systemitem">systemd</code><a id="idp62864432" class="indexterm"></a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="lxc-upgrade-issues"></a>5.8. Обновление узлов и контейнеров LXC</h2></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
    Данный раздел касается только тех систем, в которых имеются LXC-контейнеры,
а также LXC узлов. Системы обычных конечных пользователей обычно не содержат
подобного.
  </p></td></tr></table></div><p>
Обновление с Wheezy да Jessie по умолчанию изменит вашу систему
инициализации на систему инициализации systemd (см. <a class="xref" href="ch-information.ru.html#systemd-upgrade-default-init-system" title="5.6. Обновление приводит к установке новой системы инициализации по умолчанию для Jessie">Раздел 5.6, «Обновление приводит к установке новой системы инициализации по умолчанию для
Jessie»</a>).
</p><p>
При обновлении LXC-контейнер или виртуальной машины LXC это приведёт к
различным последствиям в зависимости от того, обновлена уже
<span class="emphasis"><em>хостовая система</em></span> до Jessie или нет.
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="issues-lxc-wheezy-host"></a>5.8.1. Обновление гостевых систем LXC, работающих на узлах Wheezy</h3></div></div></div><p>
  Если вы обновляете гостевой контейнер LXC, запущенный на хостовой системе
<span class="emphasis"><em>Wheezy</em></span>, то вам нужно будет запретить автоматический
переход гостевой системы на systemd. Запретить переход можно с помощью
закрепления (pinning) как это описано в <a class="xref" href="ch-information.ru.html#systemd-upgrade-default-init-system" title="5.6. Обновление приводит к установке новой системы инициализации по умолчанию для Jessie">Раздел 5.6, «Обновление приводит к установке новой системы инициализации по умолчанию для
Jessie»</a>.
</p><p>
  Это необходимо сделать потому, что в хостовой системе Wheezy отсутствует
требуемая функциональность для загрузки системы под systemd.
</p><p>
  Вы сможете переключиться на systemd в гостевой системе LXC после того, как
обновите <span class="emphasis"><em>хостовую</em></span> систему до Jessie. См. в следующем
параграфе описание того, что следует сделать на хостовых системах Jessie.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="issues-lxc-jessie-host"></a>5.8.2. Обновление гостевых систем LXC, работающих на узлах Jessie</h3></div></div></div><p>
  Для того, чтобы загрузить гостевую система LXC с systemd, вам необходимо
изменить настройки вашего LXC-контейнера. Настройки контейнера обычно
находятся в файле
<code class="filename">/var/lib/lxc/<em class="replaceable"><code>ИМЯ_КОНТЕЙНЕРА</code></em>/config</code>.
Вам следует добавить следующие две опции в файл настройки:
</p><pre class="screen">
lxc.autodev = 1
lxc.kmsg = 0
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="issues-lxc-further-docu"></a>5.8.3. Дополнительная информация</h3></div></div></div><p>
  Дополнительную информацию о LXC в Debian см. на <a class="ulink" href="https://wiki.debian.org/LXC" target="_top">вики-страницах Debian</a>.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="cryptsetup-luks-whirlpool"></a>5.9. Ручная миграция зашифрованных с помощью LUKS whirpool дисков (нестандартные
настройки)</h2></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
      Данный раздел предназначен только для тех, кто самостоятельно настроил
зашифрованные с помощью LUKS диски, используя хэш whirlpool. Программа
установки Debian <span class="emphasis"><em>никогда</em></span> не поддерживала создание таких
дисков.
    </p></td></tr></table></div><p>
    Если вы <span class="emphasis"><em>вручную</em></span> настроили зашифрованный с помощью LUKS
whirpool диск, то вам следует вручную выполнить переход на более стойкий
хэш. Вы можете проверить, используется ли для шифрования вашего диска
функция whirlpool, выполнив следующую команду:
  </p><pre class="screen">
# /sbin/cryptsetup luksDump <em class="replaceable"><code>&lt;устройство&gt;</code></em> | grep -i whirlpool
</pre><p>
    Дополнительную информацию о миграции см. в разделе "8.3 Gcrypt 1.6.x and
later break Whirlpool" в <a class="ulink" href="https://code.google.com/p/cryptsetup/wiki/FrequentlyAskedQuestions" target="_top">ЧаВО
по cryptsetup</a>.
  </p><div class="caution"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Внимание]" src="images/caution.png" /></td><th align="left">Внимание</th></tr><tr><td align="left" valign="top"><p>
      Если в вашей системе имеется такой диск, пакет <code class="systemitem">cryptsetup</code><a id="idp62891824" class="indexterm"></a> по умолчанию откажется его
расшифровывать. Если ваша корневая файловая система или другие системные
диски (напр., /usr) зашифрованы с помощью whirlpool, вам следует выполнить
миграцию этих дисков до первой перезагрузки после обновления пакета
<code class="systemitem">cryptsetup</code><a id="idp62894112" class="indexterm"></a>.
    </p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-3d"></a>5.10. Для рабочего стола GNOME требуется базовая поддержка 3D графики</h2></div></div></div><p>
    Рабочий стол GNOME 3.14 в Jessie более не поддерживает fallback для машин
без базовой поддержки трёхмерной графики. Для работы ему требуется либо
достаточно новый ПК (любой ПК не старше 10 лет должен иметь требуемую
поддержку SSE2), либо графический адаптер с поддержкой ускоренной трехмерной
графики с драйверами EGL, если архитектура вашей система отличается от i386
или amd64.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-fglrx"></a>5.11. Рабочий стол GNOME не работает с проприетарным драйвером FGLRX от AMD</h2></div></div></div><p>
    В отличии от остальных драйверов OpenGL, драйвер FGLRX от AMD для адаптеров
Radeon не поддерживает интерфейс EGL. Поэтому некоторые приложения GNOME,
включая базовую часть рабочего стола GNOME, вообще не запустятся, если в
системе используется этот драйвер.
  </p><p>
    Рекомендуется использовать свободный драйвер <code class="literal">radeon</code>,
которые используется по умолчанию в jessie.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gnome-shortcuts"></a>5.12. Изменения сочетаний клавиш по умолчанию в GNOME</h2></div></div></div><p>
    Сочетания горячих клавиш по умолчанию в рабочем столе GNOME были изменены с
тем, чтобы больше соответствовать сочетаниям клавиш в других операционных
системах.
  </p><p>
    Сочетания клавиш, которые были изменены пользователем, при обновлении
сохраняться. Их можно настроить в центре управления GNOME. Для того, чтобы
попасть в него, следует кликнуть на иконке "settings" в верхнем правом меню.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="base-passwd-hardening"></a>5.13. Изменения командной оболочки по умолчанию для системных пользователей,
предоставляемых пакетом <code class="systemitem">base-passwd</code><a id="idp62906832" class="indexterm"></a></h2></div></div></div><p>
    Обновление пакета <code class="systemitem">base-passwd</code><a id="idp62908848" class="indexterm"></a>
приведёт к замене командной оболочки некоторых системных пользователей на
командную оболочку "nologin". Изменение коснётся следующих пользователей:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>daemon</p></li><li class="listitem"><p>bin</p></li><li class="listitem"><p>sys</p></li><li class="listitem"><p>sync</p></li><li class="listitem"><p>games</p></li><li class="listitem"><p>man</p></li><li class="listitem"><p>lp</p></li><li class="listitem"><p>mail</p></li><li class="listitem"><p>news</p></li><li class="listitem"><p>uucp</p></li><li class="listitem"><p>proxy</p></li><li class="listitem"><p>www-data</p></li><li class="listitem"><p>backup</p></li><li class="listitem"><p>list</p></li><li class="listitem"><p>irc</p></li><li class="listitem"><p>gnats</p></li><li class="listitem"><p>nobody</p></li></ul></div><p>
    Если ваши локальные настройки требуют, чтобы какой-то из перечисленных
пользователей имел командную оболочку, вам следует ответить отрицательно на
вопрос о миграции, либо выполнить миграцию, а затем изменить командную
оболочку для соответствующих пользователей. В частности, часто локальные
резервные копии выполняются от лица пользователя "backup" с аутентификацией
по "ssh-key".
  </p><div class="caution"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Внимание]" src="images/caution.png" /></td><th align="left">Внимание</th></tr><tr><td align="left" valign="top"><p>
      Переход будет выполнен автоматически в случае, если приоритет вопросов
debconf у вас выставлен в значение "high" или выше.
    </p></td></tr></table></div><p>
      Если вы хотите сохранить текущую командную оболочку данного пользователь,
можно выполнить следующую команду:
  </p><pre class="screen">
echo 'base-passwd base-passwd/system/<em class="replaceable"><code>имя_пользователя</code></em>/shell/<em class="replaceable"><code>изменённая_текущая_командная_оболочка</code></em>/_usr_sbin_nologin boolean false' | debconf-set-selections
</pre><p>
    Где <em class="replaceable"><code>имя_пользователя</code></em> представляет собой имя
пользователя, для которого следует выполнить это действие, а
<em class="replaceable"><code>изменённая_текущая_командная_оболочка</code></em> —
название командной оболочки. Изменение выполняется путём замены всех
символов, отличных от букв, цифр, тире и подчёркиваний, на
подчёркивания. Напр., /bin/bash становится _bin_bash.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="kde-kontact"></a>5.14. Переход на новый менеджер электронной почты, календаря и списка контактов
для KDE (Kontact)</h2></div></div></div><p>
    Система управления личной информацией Kontact получила большое
обновление. Новая версия существенно больше использует индексирование
метданных, для данных каждого пользователя следует выполнить миграцию на
новые указатели.
  </p><p>
    Электронная почта, события календаря и контакты из адресной книги будут
автоматически перенесены, когда соответствующий пользователь выполнит вход в
систему, а соответствующий компонент будет запущен. Некоторые продвинутые
настройки, такие как фильтры электронной почты и персональные шаблоны
требуют вмешательства вручную. Дополнительную информацию и предложения по
исправлению проблем см. в <a class="ulink" href="https://wiki.debian.org/KDE/Jessie/kontact" target="_top">вики Debian</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="missing-virtual-consoles"></a>5.15. Отсутствие виртуальных консолей ("getty"s) при использовании нескольких
окружений рабочего стола</h2></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
      Сообщается, что данная проблема исправлена в Jessie.  Если у вас она всё
равно возникает, сообщите об этом в отчёт об <a class="ulink" href="https://bugs.debian.org/766462" target="_top">ошибке Debian #766462</a>.  Заметьте, что вам
может потребоваться вывести отчёт об ошибке из архива (за информацией о том,
как это можно сделать, обратитесь к документации по <a class="ulink" href="https://www.debian.org/Bugs/server-control" target="_top">управляющему серверу
системы отслеживания ошибок Debian</a>).
    </p></td></tr></table></div><p>
    Если у вас установлено несколько окружений рабочего стола, то может
оказаться так, что ни одна "виртуальная консоль" не показывает запрос данных
учётной записи.
  </p><p>
    Эта проблема возникает в случае, когда установлены пакеты <code class="systemitem">plymouth</code><a id="idp62943888" class="indexterm"></a>, <code class="systemitem">systemd</code><a id="idp62945552" class="indexterm"></a> и GNOME. О данной проблеме уже известно,
см. <a class="ulink" href="https://bugs.debian.org/766462" target="_top">ошибка Debian #766462</a>.
  </p><p>
     Известно, что удаление аргумента "splash" из командной строки ядра может
временно решить данную проблему. См. файл
<code class="filename">/etc/default/grub</code>, обязательно выполните
<code class="literal">update-grub</code> после изменения этого файла.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idp62949984"></a>5.16. "VGA signal out of range" / пустой экран при загрузке с помощью grub-pc</h2></div></div></div><p>
    Пакет <code class="systemitem">grub-pc</code><a id="idp62951984" class="indexterm"></a> имеет проблемы
совместимости со старыми графическими картами (напр., "ATI Rage 128 Pro
Ultra TR"), что может приводить к отображению пустого экрана во время
загрузки. На экране может появиться сообщение "VGA signal out of range" (или
что-то похожее).
  </p><p>
    Для решения этой проблемы установите параметр
<code class="literal">GRUB_TERMINAL=console</code> в файле
<code class="filename">/etc/default/grub</code>.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idp62955728"></a>5.17. Более строгая проверка файлов cron в crontab</h2></div></div></div><p>
    Программа <code class="literal">crontab</code> теперь работает несколько строже и
может отказать в сохранении изменённого файла cron в случае, если он
некорректен. Если у вас возникли проблемы с <code class="literal">crontab -e</code>,
проверьте crontab на наличие ошибок.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="perl-module-load-permissions"></a>5.18. Изменение в обработке нечитаемых путей модулей в пакете <code class="systemitem">perl</code><a id="idp62960864" class="indexterm"></a></h2></div></div></div><p>
     Начиная с версии 5.18 (и 5.20, которая включена в Jessie), Perl выполняет
выход с выводом сообщения о фатальной ошибки в случае, если он встречает
нечитаемые пути модулей в <code class="literal">@INC</code>. Раньше подобные строки
пропускались. Рекомендуется проверить содержимое <code class="literal">@INC</code> в
вашем окружении на предмет наличия каталогов, которые закрыты для чтения
всем пользователям, и предпринять соответствующие действия.
  </p><p>
    Вы можете узнать <code class="literal">@INC</code> по умолчанию для Perl, выполнив
<span class="command"><strong>perl -V</strong></span>.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ganeti-upgrade-issues"></a>5.19. Обновление кластеров Ganeti</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ganeti-upgrade-DRBD-UUIDs"></a>5.19.1. Проблема с обновлением кластеров Ganeti с экземплярами на DRBD [исправлена в
8.1]</h3></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>
        Эта проблема была исправлена в ревизии 8.1 выпуска Jessie.
      </p></td></tr></table></div><p>
       Версия пакета <code class="systemitem">ganeti</code><a id="idp62971280" class="indexterm"></a> (2.12.0-3),
выпущенная в составе Jessie, не поддерживает миграции с систем, на которых
запущена версия 2.5 или более ранняя (включая Wheezy), в такх случаях, когда
в кластере имеются экземпляры с дисками DRBD. Надеемся, что эта проблема
будет решена в следующей редакции, рекомендуется пока не обновлять такие
кластеры Ganeti. Дополнительную информацию об этой проблеме можно получить в
отчёте об <a class="ulink" href="https://bugs.debian.org/783186" target="_top">ошибке Debian #783186</a>.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ganeti-upgrade-general"></a>5.19.2. Общие сведения об обновлении кластеров Ganeti</h3></div></div></div><p>
       Рекомендуемся процедура обновления кластера Ganeti с пакета <code class="systemitem">ganeti</code><a id="idp62976880" class="indexterm"></a> версии из Wheezy (2.5.2-1) до версии из
Jessie (2.12.0-3) предполагает остановку всех экземпляров, выполнение
обновления и одновременную перезагрузку всех нод. Это гарантирует, что все
экземпляры будут запущены с гипервизором из Jessie, и что все ноды будут
работать под управлением одно и той же версии Ganeti и DRBD.
    </p><p>
       Заметьте, что работа смешанного кластера, содержащего ноды версий 2.5 и
2.12, не поддерживается. Кроме того, в зависимости от гипервизора могут не
работать живые миграции экземпляров между версиями гипервизора из Wheezy и
Jessie.
    </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idp62979744"></a>5.20. Новые требования для выполнения файлов в Samba4</h2></div></div></div><p>
    Если клиент запрашивает, чтобы файл был "открыт для выполнения", Samba4
потребует дополнительно к обычным права на чтение установить бит выполнения
для этого файла. Также это вызывает молчаливое игнорирование сценарием
"netlogon" в том случае, если у них отсутствует бит выполнения.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="cryptsetup-busybox"></a>5.21. Cryptsetup может прерывать загрузку при использовании опции BUSYBOX=n</h2></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>Данный раздел касается только тех, кто вручную изменил свой файл
<code class="filename">/etc/initramfs-tools/initramfs.conf</code> так, чтобы не
использовать busybox.
    </p></td></tr></table></div><p>
    Если у вас установлены <span class="emphasis"><em>оба</em></span> пакета <code class="systemitem">busybox</code><a id="idp62986176" class="indexterm"></a> и <code class="systemitem">cryptsetup</code><a id="idp62987872" class="indexterm"></a>, а initramfs настроена на то, чтобы
<span class="emphasis"><em>не</em></span> использовать busybox, то ваша система может не
загрузиться.
  </p><p>
    Проверьте значение опции BUSYBOX в файле
<code class="filename">/etc/initramfs-tools/initramfs.conf</code> вслучае, если у вас
установлены оба этих пакета. Известно, что эту проблему можно временно
решить путём удаления пакета <code class="systemitem">busybox</code><a id="idp62992016" class="indexterm"></a>
или установки опции <code class="literal">BUSYBOX=y</code> в файле
<code class="filename">/etc/initramfs-tools/initramfs.conf</code>.
  </p><div class="warning"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Предупреждение]" src="images/warning.png" /></td><th align="left">Предупреждение</th></tr><tr><td align="left" valign="top"><p>
      Если вы внесли какие-либо изменения, то не забудьте выполнить
<code class="literal">update-initramfs -u</code> для обновления initramfs. В противном
случае загрузка всё равно не будет работать.
    </p></td></tr></table></div><p>
    Дополнительную информацию см. в <a class="ulink" href="https://bugs.debian.org/783297" target="_top">ошибке Debian
#783297</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="squid-incompat"></a>5.22. Обратная совместимость изменений в веб-прокси Squid</h2></div></div></div><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Примечание]" src="images/note.png" /></td><th align="left">Примечание</th></tr><tr><td align="left" valign="top"><p>Данный раздел касается только тех, кто установил веб-прокси squid.
    </p></td></tr></table></div><p>
    Настройка squid изменилась, эти изменения ломают совместимость.  В
частности, у некоторых "вспомогательных компонентов" ("helpers") squid были
изменены имена.  Если в ваших настроек используются старые возможности,
которые отсутствуют в текущей версии, либо используются старые имена
вспомогательных компонентов, то после обновления ваша служба squid не сможет
запуститься.
  </p><p>
    Дополнительную информацию см. в информации о выпуске основной ветки
разработки.  Информацию можно найти по следующим адресам:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="ulink" href="http://www.squid-cache.org/Versions/v3/3.2/RELEASENOTES.html" target="_top">
Информация о выпуске Squid 3.2</a> (список переименованных
вспомогательных компонентов можно найти в разделе <a class="ulink" href="http://www.squid-cache.org/Versions/v3/3.2/RELEASENOTES.html#ss2.6" target="_top">2.6
Helper Name Changes</a>)
        </p></li><li class="listitem"><p><a class="ulink" href="http://www.squid-cache.org/Versions/v3/3.3/RELEASENOTES.html" target="_top">
Информация о выпуске Squid 3.3</a>
        </p></li><li class="listitem"><p><a class="ulink" href="http://www.squid-cache.org/Versions/v3/3.4/RELEASENOTES.html" target="_top">
Информация о выпуске Squid 3.4</a>
        </p></li></ul></div><p>
  </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch-upgrading.ru.html"><img src="images/prev.png" alt="Пред." /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch-moreinfo.ru.html"><img src="images/next.png" alt="След." /></a></td></tr><tr><td width="40%" align="left" valign="top">Глава 4. Обновление с Debian 7 (wheezy) </td><td width="20%" align="center"><a accesskey="h" href="index.ru.html"><img src="images/home.png" alt="Начало" /></a></td><td width="40%" align="right" valign="top"> Глава 6. Дополнительная информация о Debian</td></tr></table></div></body></html>
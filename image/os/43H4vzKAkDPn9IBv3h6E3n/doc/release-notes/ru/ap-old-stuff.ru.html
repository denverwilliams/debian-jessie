<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Приложение A. Подготовка системы wheezy к обновлению</title><link rel="stylesheet" type="text/css" href="debian.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.ru.html" title="Информация о выпуске Debian 8 (jessie) для архитектуры 64-bit PC" /><link rel="up" href="index.ru.html" title="Информация о выпуске Debian 8 (jessie) для архитектуры 64-bit PC" /><link rel="prev" href="ch-moreinfo.ru.html" title="Глава 6. Дополнительная информация о Debian" /><link rel="next" href="apb.ru.html" title="Приложение B. Люди, участвовавшие в создании информации о выпуске" /><meta xmlns="" name="viewport" content="width=device-width, initial-scale=1" /><style xmlns="" type="text/css">
      body {
        background-repeat: no-repeat;
        background-image: none;
      }
    </style></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Приложение A. Подготовка системы wheezy к обновлению</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch-moreinfo.ru.html"><img src="images/prev.png" alt="Пред." /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="apb.ru.html"><img src="images/next.png" alt="След." /></a></td></tr></table><hr /></div><div xml:lang="ru" class="appendix" lang="ru"><div class="titlepage"><div><div><h1 class="title"><a id="ap-old-stuff"></a>Приложение A. Подготовка системы wheezy к обновлению</h1></div></div></div><div class="toc"><p><strong>Содержание</strong></p><dl class="toc"><dt><span class="section"><a href="ap-old-stuff.ru.html#old-upgrade">A.1. Обновление системы wheezy</a></span></dt><dt><span class="section"><a href="ap-old-stuff.ru.html#old-sources">A.2. Проверка списка источников APT</a></span></dt><dt><span class="section"><a href="ap-old-stuff.ru.html#old-config">A.3. Удаление устаревших файлов настройки</a></span></dt><dt><span class="section"><a href="ap-old-stuff.ru.html#switch-utf8">A.4. Переход к использованию локалей с UTF-8</a></span></dt></dl></div><p>
В этом приложении содержится информация о том, как перед обновлением до
jessie удостовериться, что вы можете устанавливать или обновлять
пакеты wheezy. Это может понадобиться в некоторых случаях.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="old-upgrade"></a>A.1. Обновление системы wheezy</h2></div></div></div><p>
В основном, это обновление ничем не отличается от всех предыдущих обновлений
wheezy, которые вы делали. Единственное отличие состоит в том, что
сначала надо убедиться, что ваши списки пакетов всё ещё содержат ссылки на
пакеты wheezy, как описано в <a class="xref" href="ap-old-stuff.ru.html#old-sources" title="A.2. Проверка списка источников APT">Раздел A.2, «Проверка списка источников APT»</a>.
</p><p>
Если вы обновляете систему с сервера-зеркала Debian, то автоматически будет
выполнено обновление до последнего выпуска wheezy.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="old-sources"></a>A.2. Проверка списка источников APT</h2></div></div></div><p>
Если в одной или нескольких строках в вашем
<code class="filename">/etc/apt/sources.list</code> есть ссылка на стабильный
дистрибутив (stable), то вы уже <span class="quote">«<span class="quote">используете</span>»</span>
jessie. Это может быть не то, что вы хотите, если вы пока не готовы к
обновлению. Если вы уже запустили <code class="literal">apt-get update</code>, то ещё
не поздно всё отменить, просто выполнив инструкцию, приведённую ниже.
</p><p>
Если вы успели установить пакеты из jessie, то особого смысла в
установке пакетов из wheezy уже нет. В этом случае вам следует
решить — доводить до конца обновление или нет. Вернуться к
использованию старых версий пакетов возможно, но эта процедура выходит за
рамки данного документа.
</p><p>
Откройте файл <code class="filename">/etc/apt/sources.list</code> с помощью любого
текстового редактора (имея привилегии <code class="literal">root</code>) и поищите в
строках, начинающихся с <code class="literal">deb http:</code> или с <code class="literal">deb
ftp:</code>, слово <span class="quote">«<span class="quote"><code class="literal">stable</code></span>»</span>. При
нахождении, замените <span class="quote">«<span class="quote"><code class="literal">stable</code></span>»</span> на
<span class="quote">«<span class="quote"><code class="literal">wheezy</code></span>»</span>.
</p><p>
Если вы нашли строки, начинающиеся с <code class="literal">deb file:</code>, то вам
придётся самостоятельно проверить, какие пакеты хранятся в указанном
каталоге — wheezy или jessie.
</p><div class="important"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Важно]" src="images/important.png" /></td><th align="left">Важно</th></tr><tr><td align="left" valign="top"><p>
    Не исправляйте строки, начинающиеся с <code class="literal">deb cdrom:</code>. Если вы
исправите такую строку, то вам придётся снова запускать
<span class="command"><strong>apt-cdrom</strong></span>. Не беспокойтесь, если источник cdrom ссылается
на нестабильный (<span class="quote">«<span class="quote"><code class="literal">unstable</code></span>»</span>)
дистрибутив. Как это ни странно, так и должно быть.
  </p></td></tr></table></div><p>
Если вы внесли какие-нибудь изменения, сохраните файл и выполните команду
</p><pre class="screen">
# apt-get update
</pre><p>
для обновления списка пакетов.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="old-config"></a>A.3. Удаление устаревших файлов настройки</h2></div></div></div><p>
Перед обновлением системы до jessie, рекомендуется удалить из системы
старые файлы настроек (такие как <code class="filename">*.dpkg-{new,old}</code> в
<code class="filename">/etc</code>.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="switch-utf8"></a>A.4. Переход к использованию локалей с UTF-8</h2></div></div></div><p>
Если вы работаете с локализованной версией системы и используемая локаль
основана не на UTF-8, то настоятельно советуем задействовать в системе
локаль с UTF-8. В прошлом были ошибки<a href="#ftn.idp63084656" class="footnote" id="idp63084656"><sup class="footnote">[6]</sup></a>,
которые проявляются только, когда используется локаль не-UTF-8. Работа
приложений для рабочего стола с этими устаревшими локалями поддерживается
специфическими внутренними механизмами библиотек, и мы больше не можем
предоставить полную поддержку пользователям, которые продолжают их
использовать.
</p><p>
Для настройки локали в системе запустите <span class="command"><strong>dpkg-reconfigure
locales</strong></span>. Выберите локаль с UTF-8, когда будет задан вопрос о
системной локали по умолчанию. Также, посмотрите настройки локали
пользователей и убедитесь, что в их окружении не включены старые локали.
</p></div><div class="footnotes"><br /><hr width="100" align="left" /><div id="ftn.idp63084656" class="footnote"><p><a href="#idp63084656" class="para"><sup class="para">[6] </sup></a>Хранитель экрана GNOME при использовании паролей с не-ASCII символами,
поддержка pam_ldap или даже возможность разблокировать экран могут работать
ненадёжно, если не используется UTF-8. Программа чтения с экрана GNOME
содержит ошибку <a class="ulink" href="http://bugs.debian.org/599197" target="_top">#599197</a>. Файловый менеджер
Nautilus (и все программы на основе glib, и, вероятно, также все программы
на Qt) предполагают, что имена файлов хранятся в UTF-8, хотя командная
оболочка предполагает, что для этого используется кодировка текущей
локали. При повседневном использовании с именами файлов не-ASCII просто
невозможно работать. Кроме того, для программы чтения с экрана gnome-orca
(которая позволяет работать с окружением рабочего стола GNOME незрячим
пользователям) требуется локаль UTF-8 начиная с выпуска Squeeze; при
использовании устаревшего набора символов невозможно прочитать информацию из
окна таких элементов рабочего стола, как Nautilus/GNOME Panel или меню
Alt-F1.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch-moreinfo.ru.html"><img src="images/prev.png" alt="Пред." /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="apb.ru.html"><img src="images/next.png" alt="След." /></a></td></tr><tr><td width="40%" align="left" valign="top">Глава 6. Дополнительная информация о Debian </td><td width="20%" align="center"><a accesskey="h" href="index.ru.html"><img src="images/home.png" alt="Начало" /></a></td><td width="40%" align="right" valign="top"> Приложение B. Люди, участвовавшие в создании информации о выпуске</td></tr></table></div></body></html>